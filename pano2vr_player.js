//////////////////////////////////////////////////////////////////////
// Pano2VR 5.2.1/15974 HTML5/CSS3 & WebGL Panorama Player           //
// License: Karl Harris                                             //
// (c) 2017, Garden Gnome Software, http://ggnome.com               //
//////////////////////////////////////////////////////////////////////

function G(){var m="perspective",k=["Webkit","Moz","O","ms","Ms"],g;for(g=0;g<k.length;g++)"undefined"!==typeof document.documentElement.style[k[g]+"Perspective"]&&(m=k[g]+"Perspective");"undefined"!==typeof document.documentElement.style[m]?"webkitPerspective"in document.documentElement.style?(m=document.createElement("style"),k=document.createElement("div"),g=document.head||document.getElementsByTagName("head")[0],m.textContent="@media (-webkit-transform-3d) {#ggswhtml5{height:5px}}",g.appendChild(m),
k.id="ggswhtml5",document.documentElement.appendChild(k),g=5===k.offsetHeight,m.parentNode.removeChild(m),k.parentNode.removeChild(k)):g=!0:g=!1;return g}function N(){var m;if(m=!!window.WebGLRenderingContext)try{var k=document.createElement("canvas");k.width=100;k.height=100;var g=k.getContext("webgl");g||(g=k.getContext("experimental-webgl"));m=!!g}catch(b){m=!1}return m}
var __extends=this&&this.__extends||function(m,k){function g(){this.constructor=m}for(var b in k)k.hasOwnProperty(b)&&(m[b]=k[b]);m.prototype=null===k?Object.create(k):(g.prototype=k.prototype,new g)},ggP2VR;
(function(m){var k=function(){function b(a){this.g=null;this.Bf=this.ck=this.yb=!1;this.mb=this.Da=this.va=0;this.f=70;this.Sa=0;this.autoplay=this.Ef=!1;this.id="";this.j=this.pan=0;this.g=a;this.Sc=this.Ac=100;this.kd=1}b.prototype.Db=function(a){var d;if(d=a.getAttributeNode("id"))this.id=d.nodeValue.toString();if(d=a.getAttributeNode("pan"))this.pan=Number(d.nodeValue);if(d=a.getAttributeNode("tilt"))this.j=Number(d.nodeValue)};b.prototype.wl=function(a){var d="",c=this.g,b=!0;if(c.If){var f=
new m.ra(0,0,-100);f.va(-this.j*Math.PI/180);f.Da(this.pan*Math.PI/180);f.Da(-c.pan.c*Math.PI/180);f.va(c.j.c*Math.PI/180);f.mb(c.N.c*Math.PI/180);.01<=f.z&&(b=!1)}c.sc&&(d+="perspective("+a+"px) ");d=d+("translate3d(0px,0px,"+a+"px) ")+("rotateZ("+c.N.c.toFixed(10)+"deg) ");d+="rotateX("+c.j.c.toFixed(10)+"deg) ";d+="rotateY("+(-c.pan.c).toFixed(10)+"deg) ";d+="rotateY("+this.pan.toFixed(10)+"deg) ";d+="rotateX("+(-this.j).toFixed(10)+"deg) ";a=1E4;var f=this.a.videoWidth,l=this.a.videoHeight;if(0==
f||0==l)f=640,l=480;0<this.Ac&&(f=this.Ac);0<this.Sc&&(l=this.Sc);0<f&&0<l&&(this.a.width=f,this.a.height=l,this.a.style.width=f+"px",this.a.style.height=l+"px");0<this.f&&(a=f/(2*Math.tan(this.f/2*Math.PI/180)));d+="translate3d(0px,0px,"+(-a).toFixed(10)+"px) ";d+="rotateZ("+this.mb.toFixed(10)+"deg) ";d+="rotateY("+(-this.Da).toFixed(10)+"deg) ";d+="rotateX("+this.va.toFixed(10)+"deg) ";this.kd&&1!=this.kd&&(d+="scaleY("+this.kd+") ");d+="translate3d("+-f/2+"px,"+-l/2+"px,0px) ";this.a.style[c.Va+
"Origin"]="0% 0%";this.yb&&(d="",1==this.Sa&&(d+="scale("+Math.min(c.m.width/f,c.m.height/l)+") "),d+="translate3d("+-f/2+"px,"+-l/2+"px,0px) ");this.bn!=d&&(this.bn=d,this.a.style[c.Va]=d,this.a.style.visibility=b?"visible":"hidden",this.Bf&&this.ck==this.yb&&(this.a.style[c.Qc]="all 0s linear 0s"),this.ck=this.yb)};b.prototype.cl=function(){this.a&&(this.a.style.visibility="hidden")};b.prototype.ue=function(){var a=this.g;a.Z?(this.a.style.left=a.m.width/2+"px",this.a.style.top=a.m.height/2+"px"):
(this.a.style.left=a.margin.left+a.m.width/2+"px",this.a.style.top=a.margin.top+a.m.height/2+"px")};return b}();m.$o=k;var g=function(b){function a(a){b.call(this,a);this.Qi=this.Og=this.cf=this.ia=!1;this.mf=this.xb=null;this.ke=this.lg=0;this.zh=this.Pi=this.me=!1;this.url=[];this.loop=0;this.level=1;this.xc=0;this.mode=1;this.Jj=10;this.Dh=this.Ab=0;this.ka=1;this.Hc=this.wc=this.vc=this.Gc=0}__extends(a,b);a.prototype.fl=function(){this.ia&&this.zh?this.zh=!1:(!this.ia&&this.g.If&&(this.td(),
this.addElement()),0==this.loop?this.ia?(this.xb=null,this.Kc()):this.a.play():0<this.Nc?(this.Nc--,this.ia||(this.a.currentTime=0),this.Og&&(this.Rc&&0==this.Rc.gain.value||0==this.mc.gain.value&&0==this.pc.gain.value&&0==this.nc.gain.value&&0==this.oc.gain.value)||(this.ia?(this.xb=null,this.Kc()):this.a.play())):this.ia&&(this.xb=null,this.me=!1))};a.prototype.Ph=function(){var a=this.g.Ha;a&&(this.ia||(this.source=a.createMediaElementSource(this.a)),2==this.mode||3==this.mode||5==this.mode?(this.Be=
a.createChannelSplitter(2),this.mc=a.createGain(),this.nc=a.createGain(),this.oc=a.createGain(),this.pc=a.createGain(),this.qf=a.createChannelMerger(2),this.ia||this.source.connect(this.Be),this.Be.connect(this.mc,0),this.Be.connect(this.nc,0),this.Be.connect(this.oc,1),this.Be.connect(this.pc,1),this.mc.connect(this.qf,0,0),this.nc.connect(this.qf,0,1),this.oc.connect(this.qf,0,0),this.pc.connect(this.qf,0,1),this.qf.connect(a.destination)):(this.Rc=a.createGain(),this.ia||this.source.connect(this.Rc),
this.Rc.connect(a.destination)))};a.prototype.fg=function(){var a=this.g.Ha;this.yb||this.Qi||(this.mc.gain.setValueAtTime(this.Gc,a.currentTime),this.pc.gain.setValueAtTime(this.Hc,a.currentTime),this.nc.gain.setValueAtTime(this.vc,a.currentTime),this.oc.gain.setValueAtTime(this.wc,a.currentTime))};a.prototype.Ih=function(){var a=this.g,c=this.g.Ha;if(this.a||this.ia){var b,f=this.pan-a.pan.c;for(b=this.j-a.j.c;-180>f;)f+=360;for(;180<f;)f-=360;var l=this.xc,h=this.Jj;0==h&&(h=.01);0>h&&(h=a.f.c);
this.Fb||(this.Fb=new m.ra,this.Fb.Lj(this.pan,this.j));0!=this.mode&&1!=this.mode||!c||this.Rc&&this.Rc.gain.setValueAtTime(this.level*a.W*this.ka,c.currentTime);if(2==this.mode&&c){var x=.5*Math.cos(f*Math.PI/180)+.5;this.Gc=Math.sqrt(x)*this.ka*this.level*a.W;this.Hc=Math.sqrt(x)*this.ka*this.level*a.W;this.vc=Math.sqrt(1-x)*this.ka*this.level*a.W;this.wc=Math.sqrt(1-x)*this.ka*this.level*a.W;this.fg()}if(3==this.mode){0>f?f<-this.Ab?f+=this.Ab:f=0:f=f>this.Ab?f-this.Ab:0;x=this.level;b=Math.abs(b);
b=b<this.Dh?0:b-this.Dh;var A=1-b/h;if(Math.abs(f)>h||0>A){var g=x*l*a.W;c?(this.Gc=g*this.ka,this.Hc=g*this.ka,this.wc=this.vc=0,this.fg()):this.a.volume=x*l*a.W}else if(g=1-Math.abs(f/h),c){var k=x*(l+(1-l)*A*g)*a.W,g=x*l*a.W;0<=f?(this.Gc=k*this.ka,this.Hc=g*this.ka):(this.Gc=g*this.ka,this.Hc=k*this.ka);2*Math.abs(f)<h?(g=1-Math.abs(2*f)/h,k=x*(l+(1-l)*A*g)*a.W,g=.5*x*(1-l)*A*(1-g)*a.W,0<=f?(this.Hc=k*this.ka,this.wc=g*this.ka,this.vc=0):(this.Gc=k*this.ka,this.vc=g*this.ka,this.wc=0)):(g=1-(Math.abs(2*
f)-h)/h,k=.5*x*(1-l)*A*g*a.W,0<=f?(this.wc=k*this.ka,this.vc=0):(this.vc=k*this.ka,this.wc=0));this.fg()}else this.a.volume=x*(l+(1-l)*A*g)*a.W}4==this.mode&&(Math.abs(f)<this.Ab&&Math.abs(b)<this.Dh?this.cf||(this.cf=!0,this.Nc=this.loop-1,this.ia?this.me||this.Kc():this.a.play()):this.cf=!1);5==this.mode&&(b=180*Math.acos(a.di.oh(this.Fb))/Math.PI,b<this.Ab?c?(this.Gc=this.level*a.W*this.ka,this.Hc=this.level*a.W*this.ka,this.wc=this.vc=0,this.fg()):this.a.volume=this.level*a.W:c?b<this.Ab+h?(0>
f?f=f>-this.Ab?0:f+this.Ab:f=f<this.Ab?0:f-this.Ab,k=1-Math.max(b-this.Ab,0)/h,g=Math.max(1-Math.abs(f)*Math.cos(this.j*Math.PI/180)/h,0),0<f?(this.Gc=this.level*(k*(1-this.xc)+this.xc)*a.W*this.ka,this.Hc=this.level*(k*g*(1-this.xc)+this.xc)*a.W*this.ka,this.vc=0,this.wc=this.level*k*(1-g)*a.W*this.ka):(this.Gc=this.level*(k*g*(1-this.xc)+this.xc)*a.W*this.ka,this.Hc=this.level*(k*(1-this.xc)+this.xc)*a.W*this.ka,this.vc=this.level*k*(1-g)*a.W*this.ka,this.wc=0),this.fg()):(k=this.level*this.xc*
a.W,this.Gc=k*this.ka,this.Hc=k*this.ka,this.wc=this.vc=0):(b-=this.Ab,this.a.volume=b<h&&0<h?this.level*(l+(1-l)*(1-Math.abs(b/h)))*a.W:l*a.W));6==this.mode&&(b=180*Math.acos(a.di.oh(this.Fb))/Math.PI,Math.abs(b)<this.Ab?this.cf||(this.cf=!0,this.Nc=this.loop-1,this.ia?this.me||this.Kc():this.a.play()):this.cf=!1)}};a.prototype.Aj=function(){var a=this;a.xb=this.g.Ha.createBufferSource();a.xb.addEventListener("ended",function(){a.fl()},!1);2==a.mode||3==a.mode||5==a.mode?a.xb.connect(a.Be):a.xb.connect(a.Rc)};
a.prototype.Jn=function(a){var c=this,b=this.g.Ha;c.Aj();this.g.L("createBufferSoundSource()");b.decodeAudioData(a,function(a){c.mf=a;c.xb.buffer=a;c.g.L("audio Data decoded");c.Pi&&(c.Kc(),c.Pi=!1)})};a.prototype.Kc=function(){var a=this.g.Ha,c=this.ke;this.mf?(null==this.xb&&(this.Aj(),this.xb.buffer=this.mf),this.lg=a.currentTime-c,this.ke=0,this.me=!0,this.zh=!1,this.xb.start(0,c),this.g.L("buffer Source started")):(this.g.L("bufferSoundPlay() -> no audio buffer -> playWhenReady"),this.Pi=!0)};
a.prototype.Wh=function(){var a=this.g.Ha.currentTime-this.lg;this.Ae();this.ke=a};a.prototype.Ae=function(){this.xb&&this.me&&(this.zh=!0,this.xb.disconnect(),this.xb.stop(0),this.xb=null);this.lg=this.ke=0;this.me=!1};a.prototype.Zl=function(){var a=this.g.Ha;return this.ke?this.ke:this.lg?a.currentTime-this.lg:0};a.prototype.$l=function(a){this.Ae();this.ke=a;this.Kc()};a.prototype.addElement=function(){var a=-1,c=this,b=this.g,f=this.g.Ha;try{for(var l=!1,h=0;h<b.S.length;h++)b.S[h].id==c.id&&
(a=h,null==b.S[h].a&&!b.S[h].ia||b.S[h].url.join()!=c.url.join()||b.S[h].loop!=c.loop||b.S[h].mode!=c.mode||(l=!0));if(l)b.L("Keep playing "+c.id);else{if(0<=a){var x=b.S[a];if(null!=x.a||x.ia)if(f&&b.Ea.enabled)b.Ea.pg.push(x),1!=b.B.Na&&2!=b.B.Na&&b.Ea.ki(x);else{try{x.ia?x.Wh():x.a.pause()}catch(g){b.L(g)}try{x.td()}catch(g){b.L(g)}}}if(f&&b.Id&&(2==this.mode||3==this.mode||5==this.mode)){if(0<c.url.length){c.ia=!0;c.Ph();var A=new XMLHttpRequest;A.open("GET",b.Wb(c.url[0]),!0);A.responseType=
"arraybuffer";A.onload=function(){c.Jn(A.response)};A.send();c.Og=!1}}else{c.a=document.createElement("audio");c.a.crossOrigin=b.crossOrigin;c.a.setAttribute("class","ggmedia");b.Le&&c.a.setAttribute("id",b.Le+c.id);for(h=0;h<c.url.length;h++)l=void 0,l=document.createElement("source"),""!=c.url[h]&&"#"!=c.url[h]&&(l.crossOrigin=b.crossOrigin,l.setAttribute("src",b.Wb(c.url[h])),c.a.appendChild(l));c.a.volume=c.level*b.W;0<c.a.childNodes.length&&(b.U.appendChild(c.a),c.a.addEventListener("ended",
function(){c.fl()},!1),f&&(c.Ph(),c.Og=!1,0==c.loop&&c.source.mediaElement&&(c.source.mediaElement.loop=!0)))}1<=c.loop&&(c.Nc=c.loop-1);0<=a?b.S[a]=c:b.S.push(c);1!=c.mode&&2!=c.mode&&3!=c.mode&&5!=c.mode||!(0<=c.loop)||f&&b.Ea.enabled||(c.ia||(c.a.autoplay=!0),c.autoplay=!0);0==c.mode&&0<=c.loop&&(c.autoplay=!0);c.Ih()}}catch(g){this.g.L(g)}};a.prototype.td=function(){try{this.g.L("Remove Snd:"+this.id),this.ia||(this.g.U.removeChild(this.a),this.a=null)}catch(a){this.g.L(a)}};a.prototype.Db=function(a){b.prototype.Db.call(this,
a);var c;(c=a.getAttributeNode("url"))&&this.url.push(c.nodeValue.toString());if(c=a.getAttributeNode("level"))this.level=Number(c.nodeValue);if(c=a.getAttributeNode("loop"))this.loop=Number(c.nodeValue);if(c=a.getAttributeNode("mode"))this.mode=Number(c.nodeValue);if(c=a.getAttributeNode("field"))this.Jj=Number(c.nodeValue);if(c=a.getAttributeNode("ambientlevel"))this.xc=Number(c.nodeValue);if(c=a.getAttributeNode("pansize"))this.Ab=Number(c.nodeValue);if(c=a.getAttributeNode("tiltsize"))this.Dh=
Number(c.nodeValue);for(a=a.firstChild;a;)"source"==a.nodeName&&(c=a.getAttributeNode("url"))&&this.url.push(c.nodeValue.toString()),a=a.nextSibling};return a}(k);m.Pl=g;g=function(b){function a(a){b.call(this,a);this.poster="";this.mb=this.Da=this.va=0;this.f=50;this.Sa=0;this.Zc=this.Ef=!1}__extends(a,b);a.prototype.Tc=function(){1!=this.Sa&&4!=this.Sa||this.Cf(!this.yb);2==this.Sa&&this.g.Lk(this.id)};a.prototype.Cf=function(a){var c=this.g,b=c.Ha;if(1==this.Sa||4==this.Sa)if(this.yb=a,this.g.wb)(c=
c.ha)&&c.activateSound(this.id,this.yb?1:0);else{if(this.yb)this.a.play(),this.a.style.zIndex=(c.wg+8E4).toString(),this.a.style[this.g.Qc]="all 1s ease 0s",c.le(this.id);else{this.a.style.zIndex=c.wg.toString();this.a.style[this.g.Qc]="all 1s ease 0s";this.Qi=!0;var f=this;setTimeout(function(){f.Qi=!1},1E3)}if(b&&(2==this.mode||3==this.mode||5==this.mode)){var b=b.currentTime,l=this.mc.gain.value,h=this.pc.gain.value,x=this.nc.gain.value,g=this.oc.gain.value;this.yb?(this.mc.gain.linearRampToValueAtTime(l,
b),this.mc.gain.linearRampToValueAtTime(this.level*c.W,b+1),this.pc.gain.linearRampToValueAtTime(h,b),this.pc.gain.linearRampToValueAtTime(this.level*c.W,b+1),this.nc.gain.linearRampToValueAtTime(x,b),this.nc.gain.linearRampToValueAtTime(0,b+1),this.oc.gain.linearRampToValueAtTime(g,b),this.oc.gain.linearRampToValueAtTime(0,b+1)):(this.mc.gain.linearRampToValueAtTime(l,b),this.mc.gain.linearRampToValueAtTime(this.Gc,b+1),this.pc.gain.linearRampToValueAtTime(h,b),this.pc.gain.linearRampToValueAtTime(this.Hc,
b+1),this.nc.gain.linearRampToValueAtTime(x,b),this.nc.gain.linearRampToValueAtTime(this.vc,b+1),this.oc.gain.linearRampToValueAtTime(g,b),this.oc.gain.linearRampToValueAtTime(this.wc,b+1))}this.Bf=!0;this.g.xl()}2==this.Sa&&(a?this.g.le(this.id):this.g.Oi(this.id))};a.prototype.Df=function(){this.Bf=!1;this.a.style[this.g.Qc]="none"};a.prototype.So=function(){0==this.loop?this.a.play():0<this.Nc?(this.Nc--,this.a.currentTime=0,this.a.play()):this.qk=!1};a.prototype.Db=function(a){b.prototype.Db.call(this,
a);var c;if(c=a.getAttributeNode("poster"))this.poster=String(c.nodeValue);if(c=a.getAttributeNode("rotx"))this.va=Number(c.nodeValue);if(c=a.getAttributeNode("roty"))this.Da=Number(c.nodeValue);if(c=a.getAttributeNode("rotz"))this.mb=Number(c.nodeValue);if(c=a.getAttributeNode("fov"))this.f=Number(c.nodeValue);if(c=a.getAttributeNode("width"))this.Ac=Number(c.nodeValue);if(c=a.getAttributeNode("height"))this.Sc=Number(c.nodeValue);this.kd=(c=a.getAttributeNode("stretch"))?Number(c.nodeValue):1;if(c=
a.getAttributeNode("clickmode"))this.Sa=Number(c.nodeValue);if(c=a.getAttributeNode("handcursor"))this.Ef=1==Number(c.nodeValue)};a.prototype.addElement=function(){var a=this,c=this.g;try{a.a=document.createElement("video");a.a.setAttribute("class","ggmedia");a.a.crossOrigin=c.crossOrigin;a.a.hidden=!0;c.Le&&a.a.setAttribute("id",c.Le+a.id);if(c.tg)a.a.setAttribute("webkit-playsinline","webkit-playsinline"),a.a.setAttribute("style","display: none; max-width:none;");else if(a.a.setAttribute("style",
"max-width:none;pointer-events:none;"),a.a.setAttribute("webkit-playsinline","webkit-playsinline"),1==a.Sa||4==a.Sa)a.a.addEventListener(c.Dl(),function(){a.Df()},!1),a.a.addEventListener("transitionend",function(){a.Df()},!1);var b;for(b=0;b<a.url.length;b++){var f;f=document.createElement("source");f.crossOrigin=c.crossOrigin;f.setAttribute("src",c.Wb(a.url[b]));a.a.appendChild(f)}""!=a.poster&&(a.a.poster=c.Wb(a.poster),0>a.loop&&(a.a.b="none"));a.a.volume=a.level*c.W;1<=a.loop&&(a.Nc=a.loop-1);
(1==a.mode||2==a.mode||3==a.mode||5==a.mode)&&0<=a.loop&&(a.a.autoplay=!0,a.qk=!0,a.autoplay=!0);c.J.push(this);c.tg?c.U.appendChild(a.a):(a.a.style.position="absolute",a.Ac&&(a.a.width=a.Ac),a.Sc&&(a.a.height=a.Sc),c.C.appendChild(a.a),a.Ph());a.a.onclick=function(){a.Tc()};a.a.addEventListener("ended",function(){a.So()},!1)}catch(l){c.L(l)}};a.prototype.registerElement=function(a,c){this.Zc=!0;this.a=c;this.id=a;this.level=1;this.g.J.push(this)};a.prototype.td=function(){var a=this.g;a.tg&&(a.H.deleteTexture(this.hc),
this.hc=0,a.U.removeChild(this.a));a.yl&&a.C.removeChild(this.a);this.a=null};return a}(g);m.Yk=g;g=function(b){function a(a){b.call(this,a);this.url="";this.mb=this.Da=this.va=0;this.f=50;this.Sa=0;this.Ef=!1;this.Sc=this.Ac=100;this.kd=1}__extends(a,b);a.prototype.Db=function(a){b.prototype.Db.call(this,a);var c;if(c=a.getAttributeNode("url"))this.url=c.nodeValue.toString();if(c=a.getAttributeNode("rotx"))this.va=Number(c.nodeValue);if(c=a.getAttributeNode("roty"))this.Da=Number(c.nodeValue);if(c=
a.getAttributeNode("rotz"))this.mb=Number(c.nodeValue);if(c=a.getAttributeNode("fov"))this.f=Number(c.nodeValue);if(c=a.getAttributeNode("width"))this.Ac=Number(c.nodeValue);if(c=a.getAttributeNode("height"))this.Sc=Number(c.nodeValue);this.kd=(c=a.getAttributeNode("stretch"))?Number(c.nodeValue):1;if(c=a.getAttributeNode("clickmode"))this.Sa=Number(c.nodeValue);if(c=a.getAttributeNode("handcursor"))this.Ef=1==Number(c.nodeValue);for(a=a.firstChild;a;)"source"==a.nodeName&&(c=a.getAttributeNode("url"))&&
(this.url=c.nodeValue.toString()),a=a.nextSibling};a.prototype.Df=function(){this.Bf=!1;this.a.style[this.g.Qc]="none"};a.prototype.Tc=function(){1!==this.Sa&&4!==this.Sa||this.Cf(!this.yb)};a.prototype.Cf=function(a){var c=this.g;if(1===this.Sa||4===this.Sa)this.yb=a,this.g.wb?(a=this.g.ha)&&a.activateSound(this.id,this.yb?1:0):(this.a.style.zIndex=this.yb?(c.wg+8E4).toString():c.wg.toString(),this.a.style[c.Qc]="all 1s ease 0s",this.Bf=!0,c.sl())};a.prototype.addElement=function(){var a=this,c=
this.g;try{a.a=document.createElement("img");a.a.setAttribute("style","-webkit-user-drag:none; max-width:none; pointer-events:none;");a.a.setAttribute("class","ggmedia");a.a.hidden=!0;c.Le&&a.a.setAttribute("id",c.Le+a.id);a.a.ondragstart=function(){return!1};if(1===a.Sa||4===a.Sa)a.a.addEventListener(c.Dl(),function(){a.Df()},!1),a.a.addEventListener("transitionend",function(){a.Df()},!1);a.a.setAttribute("src",c.Wb(a.url));a.Ac&&(a.a.width=a.Ac);a.Sc&&(a.a.height=a.Sc);c.Xa.push(a);a.a.style.position=
"absolute";a.Tc&&(a.a.onclick=function(){a.Tc()});c.C.appendChild(a.a)}catch(b){c.L("Error addimage:"+b)}};a.prototype.td=function(){this.g.C.removeChild(this.a);this.a=null};return a}(k);m.Nl=g;k=function(b){function a(a){b.call(this,a);this.alpha=this.xj=50;this.type=0;this.color=16777215}__extends(a,b);a.prototype.Db=function(a){b.prototype.Db.call(this,a);var c;if(c=a.getAttributeNode("blinding"))this.xj=Number(c.nodeValue);if(c=a.getAttributeNode("alpha"))this.alpha=Number(c.nodeValue);if(c=
a.getAttributeNode("type"))this.type=Number(c.nodeValue);if(c=a.getAttributeNode("color"))this.color=1*Number(c.nodeValue)};return a}(k);m.Ol=k;k=function(){function b(a){this.type="empty";this.el=this.id=this.target=this.description=this.title=this.url="";this.Lh=100;this.Vg=20;this.Nh=!1;this.a=null;this.gb=this.na=this.j=this.pan=0;this.Sb=a.w.Sb;this.Pb=a.w.Pb;this.Rb=a.w.Rb;this.Ob=a.w.Ob;this.Ke=a.w.Ke;this.ug=[]}b.prototype.Ge=function(){this.id=this.id;this.pan=this.pan;this.tilt=this.j;this.url=
this.url;this.target=this.target;this.title=this.title;this.description=this.description;this.skinid=this.el;this.obj=this.a};b.prototype.Db=function(a){var d;if(d=a.getAttributeNode("url"))this.url=d.nodeValue.toString();if(d=a.getAttributeNode("target"))this.target=d.nodeValue.toString();if(d=a.getAttributeNode("title"))this.title=d.nodeValue.toString();if(d=a.getAttributeNode("description"))this.description=d.nodeValue.toString();if(d=a.getAttributeNode("id"))this.id=d.nodeValue.toString();if(d=
a.getAttributeNode("skinid"))this.el=d.nodeValue.toString();if(d=a.getAttributeNode("width"))this.Lh=Number(d.nodeValue);if(d=a.getAttributeNode("height"))this.Vg=Number(d.nodeValue);if(d=a.getAttributeNode("wordwrap"))this.Nh=1==Number(d.nodeValue);d=a.getAttributeNode("pan");this.pan=1*(d?Number(d.nodeValue):0);d=a.getAttributeNode("tilt");this.j=1*(d?Number(d.nodeValue):0);if(d=a.getAttributeNode("bordercolor"))this.Sb=1*Number(d.nodeValue);if(d=a.getAttributeNode("backgroundcolor"))this.Pb=1*
Number(d.nodeValue);if(d=a.getAttributeNode("borderalpha"))this.Rb=1*Number(d.nodeValue);if(d=a.getAttributeNode("backgroundalpha"))this.Ob=1*Number(d.nodeValue);if(d=a.getAttributeNode("handcursor"))this.Ke=1==Number(d.nodeValue);for(a=a.firstChild;a;){if("vertex"==a.nodeName){var c={pan:0,j:0};d=a.getAttributeNode("pan");c.pan=1*(d?Number(d.nodeValue):0);d=a.getAttributeNode("tilt");c.j=1*(d?Number(d.nodeValue):0);this.ug.push(c)}a=a.nextSibling}this.Ge()};return b}();m.ah=k})(ggP2VR||(ggP2VR={}));
(function(m){var k=function(){function g(b,a){this.x=b;this.y=a}g.prototype.Ya=function(b,a){this.x=b;this.y=a};g.prototype.md=function(b,a,d){var c=a.y-b.y;this.x=b.x+(a.x-b.x)*d;this.y=b.y+c*d};g.prototype.Yl=function(b,a,d,c,e){var f;f=new g;f.md(b,d,e);b=new g;b.md(d,c,e);d=new g;d.md(c,a,e);a=new g;a.md(f,b,e);f=new g;f.md(b,d,e);b=new g;b.md(a,f,e);this.x=b.x;this.y=b.y};g.prototype.Th=function(b,a,d,c,e){var f=new g,l=.5,h=.25;do{f.Yl(b,a,d,c,l);var x=f.x-e,l=0<x?l-h:l+h,h=h/2}while(.01<Math.abs(x));
this.x=f.x;this.y=f.y};return g}();m.kc=k})(ggP2VR||(ggP2VR={}));
(function(m){var k=function(){function g(b,a,d,c,e){this.x=b;this.y=a;this.z=d;this.bd=c;this.Fb=e}g.prototype.Ya=function(b,a,d,c,e){this.x=b;this.y=a;this.z=d;this.bd=c;this.Fb=e};g.prototype.toString=function(){return"("+this.x+","+this.y+","+this.z+") - ("+this.bd+","+this.Fb+")"};g.prototype.va=function(b){var a=Math.sin(b);b=Math.cos(b);var d=this.y,c=this.z;this.y=b*d-a*c;this.z=a*d+b*c};g.prototype.On=function(){var b=this.y;this.y=-this.z;this.z=b};g.prototype.Nn=function(){var b=this.y;
this.y=this.z;this.z=-b};g.prototype.Da=function(b){var a=Math.sin(b);b=Math.cos(b);var d=this.x,c=this.z;this.x=b*d+a*c;this.z=-a*d+b*c};g.prototype.Pn=function(){var b=this.x;this.x=-this.z;this.z=b};g.prototype.mb=function(b){var a=Math.sin(b);b=Math.cos(b);var d=this.x,c=this.y;this.x=b*d-a*c;this.y=a*d+b*c};g.prototype.Wk=function(){var b=this.x;this.x=-this.y;this.y=b};g.prototype.ne=function(b){return this.va(b*Math.PI/180)};g.prototype.$f=function(b){return this.Da(b*Math.PI/180)};g.prototype.th=
function(b){return this.mb(b*Math.PI/180)};g.prototype.clone=function(){return new g(this.x,this.y,this.z,this.bd,this.Fb)};g.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};g.prototype.normalize=function(){var b=this.length();0<b&&(b=1/b,this.x*=b,this.y*=b,this.z*=b)};g.prototype.oh=function(b){return this.x*b.x+this.y*b.y+this.z*b.z};g.prototype.Lj=function(b,a){var d;d=Math.cos(a*Math.PI/180);this.x=d*Math.sin(b*Math.PI/180);this.y=Math.sin(a*Math.PI/180);
this.z=d*Math.cos(b*Math.PI/180)};g.prototype.Ul=function(){return 180*Math.atan2(-this.x,-this.z)/Math.PI};g.prototype.Vl=function(){return 180*Math.asin(this.y/this.length())/Math.PI};g.prototype.md=function(b,a,d){this.x=b.x*d+a.x*(1-d);this.y=b.y*d+a.y*(1-d);this.z=b.z*d+a.z*(1-d);this.bd=b.bd*d+a.bd*(1-d);this.Fb=b.Fb*d+a.Fb*(1-d)};return g}();m.ra=k})(ggP2VR||(ggP2VR={}));
(function(m){var k=function(){function g(){this.Un()}g.prototype.Un=function(){this.Xb=1;this.$b=this.Zb=this.Yb=0;this.ac=1;this.dc=this.cc=this.bc=0;this.ec=1};g.prototype.clone=function(b){this.Xb=b.Xb;this.Yb=b.Yb;this.Zb=b.Zb;this.$b=b.$b;this.ac=b.ac;this.bc=b.bc;this.cc=b.cc;this.dc=b.dc;this.ec=b.ec};g.prototype.eo=function(b){var a=Math.cos(b);b=Math.sin(b);this.Xb=1;this.$b=this.Zb=this.Yb=0;this.ac=a;this.bc=-b;this.cc=0;this.dc=b;this.ec=a};g.prototype.fo=function(b){var a=Math.cos(b);
b=Math.sin(b);this.Xb=a;this.Yb=0;this.Zb=b;this.$b=0;this.ac=1;this.bc=0;this.cc=-b;this.dc=0;this.ec=a};g.prototype.ho=function(b){var a=Math.cos(b);b=Math.sin(b);this.Xb=a;this.Yb=-b;this.Zb=0;this.$b=b;this.ac=a;this.dc=this.cc=this.bc=0;this.ec=1};g.prototype.ao=function(b){this.eo(b*Math.PI/180)};g.prototype.bo=function(b){this.fo(b*Math.PI/180)};g.prototype.co=function(b){this.ho(b*Math.PI/180)};g.prototype.ne=function(b){var a,d;a=new g;d=new g;a.ao(b);d.clone(this);this.multiply(a,d)};g.prototype.$f=
function(b){var a,d;a=new g;d=new g;a.bo(b);d.clone(this);this.multiply(a,d)};g.prototype.th=function(b){var a,d;a=new g;d=new g;a.co(b);d.clone(this);this.multiply(a,d)};g.prototype.multiply=function(b,a){this.Xb=b.Xb*a.Xb+b.Yb*a.$b+b.Zb*a.cc;this.Yb=b.Xb*a.Yb+b.Yb*a.ac+b.Zb*a.dc;this.Zb=b.Xb*a.Zb+b.Yb*a.bc+b.Zb*a.ec;this.$b=b.$b*a.Xb+b.ac*a.$b+b.bc*a.cc;this.ac=b.$b*a.Yb+b.ac*a.ac+b.bc*a.dc;this.bc=b.$b*a.Zb+b.ac*a.bc+b.bc*a.ec;this.cc=b.cc*a.Xb+b.dc*a.$b+b.ec*a.cc;this.dc=b.cc*a.Yb+b.dc*a.ac+b.ec*
a.dc;this.ec=b.cc*a.Zb+b.dc*a.bc+b.ec*a.ec};g.prototype.rn=function(b){var a,d,c;a=b.x;d=b.y;c=b.z;b.x=a*this.Xb+d*this.Yb+c*this.Zb;b.y=a*this.$b+d*this.ac+c*this.bc;b.z=a*this.cc+d*this.dc+c*this.ec};return g}();m.Il=k})(ggP2VR||(ggP2VR={}));
(function(m){m.T={create:function(k){var g;"undefined"!=typeof Float32Array?g=new Float32Array(16):g=Array(16);k&&(g[0]=k[0],g[1]=k[1],g[2]=k[2],g[3]=k[3],g[4]=k[4],g[5]=k[5],g[6]=k[6],g[7]=k[7],g[8]=k[8],g[9]=k[9],g[10]=k[10],g[11]=k[11],g[12]=k[12],g[13]=k[13],g[14]=k[14],g[15]=k[15]);return g},set:function(k,g){g[0]=k[0];g[1]=k[1];g[2]=k[2];g[3]=k[3];g[4]=k[4];g[5]=k[5];g[6]=k[6];g[7]=k[7];g[8]=k[8];g[9]=k[9];g[10]=k[10];g[11]=k[11];g[12]=k[12];g[13]=k[13];g[14]=k[14];g[15]=k[15];return g},Hd:function(k){k[0]=
1;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=1;k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=1;k[11]=0;k[12]=0;k[13]=0;k[14]=0;k[15]=1;return k},multiply:function(k,g,b){b||(b=k);var a=k[0],d=k[1],c=k[2],e=k[3],f=k[4],l=k[5],h=k[6],x=k[7],A=k[8],n=k[9],m=k[10],p=k[11],u=k[12],t=k[13],v=k[14];k=k[15];var q=g[0],w=g[1],B=g[2],z=g[3],y=g[4],C=g[5],D=g[6],E=g[7],F=g[8],H=g[9],I=g[10],J=g[11],K=g[12],L=g[13],M=g[14];g=g[15];b[0]=q*a+w*f+B*A+z*u;b[1]=q*d+w*l+B*n+z*t;b[2]=q*c+w*h+B*m+z*v;b[3]=q*e+w*x+B*p+z*k;b[4]=y*a+C*f+D*A+
E*u;b[5]=y*d+C*l+D*n+E*t;b[6]=y*c+C*h+D*m+E*v;b[7]=y*e+C*x+D*p+E*k;b[8]=F*a+H*f+I*A+J*u;b[9]=F*d+H*l+I*n+J*t;b[10]=F*c+H*h+I*m+J*v;b[11]=F*e+H*x+I*p+J*k;b[12]=K*a+L*f+M*A+g*u;b[13]=K*d+L*l+M*n+g*t;b[14]=K*c+L*h+M*m+g*v;b[15]=K*e+L*x+M*p+g*k;return b},translate:function(k,g,b){var a=g[0],d=g[1];g=g[2];if(!b||k==b)return k[12]=k[0]*a+k[4]*d+k[8]*g+k[12],k[13]=k[1]*a+k[5]*d+k[9]*g+k[13],k[14]=k[2]*a+k[6]*d+k[10]*g+k[14],k[15]=k[3]*a+k[7]*d+k[11]*g+k[15],k;var c=k[0],e=k[1],f=k[2],l=k[3],h=k[4],x=k[5],
A=k[6],n=k[7],m=k[8],p=k[9],u=k[10],t=k[11];b[0]=c;b[1]=e;b[2]=f;b[3]=l;b[4]=h;b[5]=x;b[6]=A;b[7]=n;b[8]=m;b[9]=p;b[10]=u;b[11]=t;b[12]=c*a+h*d+m*g+k[12];b[13]=e*a+x*d+p*g+k[13];b[14]=f*a+A*d+u*g+k[14];b[15]=l*a+n*d+t*g+k[15];return b},scale:function(k,g,b){var a=g[0],d=g[1];g=g[2];if(!b||k==b)return k[0]*=a,k[1]*=a,k[2]*=a,k[3]*=a,k[4]*=d,k[5]*=d,k[6]*=d,k[7]*=d,k[8]*=g,k[9]*=g,k[10]*=g,k[11]*=g,k;b[0]=k[0]*a;b[1]=k[1]*a;b[2]=k[2]*a;b[3]=k[3]*a;b[4]=k[4]*d;b[5]=k[5]*d;b[6]=k[6]*d;b[7]=k[7]*d;b[8]=
k[8]*g;b[9]=k[9]*g;b[10]=k[10]*g;b[11]=k[11]*g;b[12]=k[12];b[13]=k[13];b[14]=k[14];b[15]=k[15];return b},rotate:function(k,g,b,a){var d=b[0],c=b[1];b=b[2];var e=Math.sqrt(d*d+c*c+b*b);if(!e)return null;1!=e&&(e=1/e,d*=e,c*=e,b*=e);var f=Math.sin(g),l=Math.cos(g),h=1-l;g=k[0];var e=k[1],x=k[2],A=k[3],n=k[4],m=k[5],p=k[6],u=k[7],t=k[8],v=k[9],q=k[10],w=k[11],B=d*d*h+l,z=c*d*h+b*f,y=b*d*h-c*f,C=d*c*h-b*f,D=c*c*h+l,E=b*c*h+d*f,F=d*b*h+c*f,d=c*b*h-d*f,c=b*b*h+l;a?k!=a&&(a[12]=k[12],a[13]=k[13],a[14]=k[14],
a[15]=k[15]):a=k;a[0]=g*B+n*z+t*y;a[1]=e*B+m*z+v*y;a[2]=x*B+p*z+q*y;a[3]=A*B+u*z+w*y;a[4]=g*C+n*D+t*E;a[5]=e*C+m*D+v*E;a[6]=x*C+p*D+q*E;a[7]=A*C+u*D+w*E;a[8]=g*F+n*d+t*c;a[9]=e*F+m*d+v*c;a[10]=x*F+p*d+q*c;a[11]=A*F+u*d+w*c;return a},vm:function(k,g,b,a,d,c,e){e||(e=m.T.create());var f=g-k,l=a-b,h=c-d;e[0]=2*d/f;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=2*d/l;e[6]=0;e[7]=0;e[8]=(g+k)/f;e[9]=(a+b)/l;e[10]=-(c+d)/h;e[11]=-1;e[12]=0;e[13]=0;e[14]=-(c*d*2)/h;e[15]=0;return e},perspective:function(k,g,b,a,d){k=
b*Math.tan(k*Math.PI/360);g=k*g;return m.T.vm(-g,g,-k,k,b,a,d)},fp:function(k,g,b,a,d,c,e){e||(e=m.T.create());var f=g-k,l=a-b,h=c-d;e[0]=2/f;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=2/l;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=-2/h;e[11]=0;e[12]=-(k+g)/f;e[13]=-(a+b)/l;e[14]=-(c+d)/h;e[15]=1;return e}}})(ggP2VR||(ggP2VR={}));
(function(m){var k=function(){function g(b){this.da=m.T.create();this.cb=m.T.create();this.Uc=0;this.Ua=[];this.Kf=!1;this.dj=this.oi=this.Ui=1;this.De=1E6;this.Gg=[!1,!1,!1,!1,!1,!1];this.yh=!1;this.hi=[];this.rj=8;this.Dd=[];this.g=b;if(b.Id||b.Xg)b.ng=2}g.prototype.Hf=function(){var b=this.g.H;if(b){var a=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n\t\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\tgl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n\t\t\t\t\t}");
b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(console&&console.log(b.getShaderInfoLog(a)),alert(b.getShaderInfoLog(a)),a=null);var d=b.createShader(b.VERTEX_SHADER);this.zc(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n\t\t\t\tattribute vec2 aTextureCoord;\n\t\t\t\tuniform mat4 uMVMatrix;\n\t\t\t\tuniform mat4 uPMatrix;\n\t\t\t\tuniform float uZoffset;\n\t\t\t\tvarying vec2 vTextureCoord;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n\t\t\t\t\tgl_Position.z += uZoffset;\n\t\t\t\t\tvTextureCoord = aTextureCoord;\n\t\t\t\t}");
this.F=b.createProgram();this.Ne(this.F,d,a);this.F.$=b.getAttribLocation(this.F,"aVertexPosition");b.enableVertexAttribArray(this.F.$);this.F.wa=b.getAttribLocation(this.F,"aTextureCoord");b.enableVertexAttribArray(this.F.wa);this.F.Ld=b.getUniformLocation(this.F,"uPMatrix");this.F.Vf=b.getUniformLocation(this.F,"uMVMatrix");this.F.Xe=b.getUniformLocation(this.F,"uSampler");this.F.Oh=b.getUniformLocation(this.F,"uZoffset");a=b.createShader(b.VERTEX_SHADER);this.zc(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n\t\t\t\tuniform vec2 uCanvasDimensions;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tvec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n\t\t\t\t\tgl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n\t\t\t\t}");
d=b.createShader(b.FRAGMENT_SHADER);this.zc(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform vec3 uColor;\n\t\t\t\tuniform float uAlpha;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = vec4(uColor, uAlpha);\n\t\t\t\t}");this.rd=b.createProgram();this.Ne(this.rd,a,d);this.rd.$=b.getAttribLocation(this.rd,"aVertexPosition");b.enableVertexAttribArray(this.rd.$);d=b.createShader(b.VERTEX_SHADER);this.zc(d,"precision highp float;\n\t\t\t\tattribute vec3 aVertexPosition;\n\t\t\t\tvarying vec2 vTextureCoord;\n\t\t\t\tuniform vec2 uCanvasDimensions;\n\t\t\t\tuniform vec4 uRect;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tvec2 pos = vec2(uRect.x + uRect.z*aVertexPosition.x,uRect.y + uRect.w*aVertexPosition.y);\n\t\t\t\t\tvec2 pointNorm = (pos / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n\t\t\t\t\tgl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 1.0, 1.0);\n\t\t\t\t\tvTextureCoord.s=aVertexPosition.x;\n\t\t\t\t\tvTextureCoord.t=1.0-aVertexPosition.y;\n\t\t\t\t}");
a=b.createShader(b.FRAGMENT_SHADER);this.zc(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = texture2D(uSampler,vTextureCoord);\n\t\t\t\t}");this.uf=b.createProgram();this.Ne(this.uf,d,a)}};g.prototype.Wg=function(){var b=this.g,a=b.H,d,c;a?(d=a.createShader(a.FRAGMENT_SHADER),c=this.ui(13),this.zc(d,c),c=a.createShader(a.VERTEX_SHADER),
this.zc(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
this.Qk=a.createProgram(),this.Ne(this.Qk,c,d),d=a.createShader(a.FRAGMENT_SHADER),c=this.ui(4),this.zc(d,c),c=a.createShader(a.VERTEX_SHADER),this.zc(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
this.Rk=a.createProgram(),this.Ne(this.Rk,c,d),d=a.createShader(a.FRAGMENT_SHADER),c=this.ui(b.o.format),this.zc(d,c),c=a.createShader(a.VERTEX_SHADER),this.zc(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
this.Sk=a.createProgram(),this.Ne(this.Sk,c,d),this.qh||(this.qh=a.createBuffer())):this.g.L("No WebGL to initRemapShader!")};g.prototype.zc=function(b,a){var d=this.g.H;d.shaderSource(b,a);d.compileShader(b);d.getShaderParameter(b,d.COMPILE_STATUS)||(console&&console.log(d.getShaderInfoLog(b)),O&&alert(d.getShaderInfoLog(b)))};g.prototype.Ne=function(b,a,d){var c=this.g.H;c.attachShader(b,a);c.attachShader(b,d);c.linkProgram(b);c.getProgramParameter(b,c.LINK_STATUS)||(alert("Could not initialise shader program"),
console&&console.log(c.getError()));c.useProgram(b)};g.prototype.ui=function(b){var a=this.g,d;d="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#define M_PI 3.14159265358979323846\nvarying vec2 dst;\nuniform vec2 srcScale;\nuniform vec2 srcOffset;\nuniform float rectDstDistance;\nuniform float fisheyeDistance;\nuniform float stereoDistance;\nuniform float directionBlend;\nuniform mat4 matRotate; // = mat4( 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0 );\nconst float rectSrcDistance = 1.0;\nuniform vec2 tonemap;\n";
d=(13==b?d+"uniform samplerCube cubeTexture;":d+"uniform sampler2D tileTexture;\n")+"void main()\n{\n";d+="vec4 direction;\n";d+="vec2 src;\n";d+="vec2 srcCord;\n";d+="vec2 texc;\n";var c=this.$j(a.ya());a.ya()!=a.fc&&0!=a.fc?(a=this.$j(a.fc),d+="vec4 direction1,direction2;\n",d+=c.replace("direction=","direction1="),d+=a.replace("direction=","direction2="),d+="direction=normalize(mix(direction1, direction2,1.0-directionBlend));\n"):d+=c;d+="direction=direction*matRotate;\n";13==b&&(d+="direction.z=-direction.z;",
d+="gl_FragColor = textureCube(cubeTexture, direction.xyz);");4==b&&(d+="float iz=1.0/(direction.z * rectSrcDistance);\n",d+="src.x=-direction.x*iz;\n",d+="src.y= direction.y*iz;\n",d+="texc=src * srcScale + srcOffset;\n",d+="if (",d+="(direction.z<0.0) && ",d+="(texc.x>=0.0) && (texc.x<=1.0) && (texc.y>=0.0) && (texc.y<=1.0)) {\n",d+="  gl_FragColor = texture2D(tileTexture, texc);\n",d+="} else {\n",d+="  discard;\n",d+="}\n");1==b&&(d+="src.x=atan(float(-direction.x), float(-direction.z));",d+=
"src.y=asin(direction.y);\n",d+="texc=src * srcScale + srcOffset;\n",d+="gl_FragColor = texture2D(tileTexture, texc);\n");14==b&&(d+="vec2 cf;\n",d+="if ((direction.z<0.0) && (direction.z<=-abs(direction.x)) && (direction.z<=-abs(direction.y))) {\n",d+="  src.x=-direction.x/direction.z;\n",d+="  src.y=+direction.y/direction.z;\n",d+="  cf.x=1.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.x>=0.0) && (direction.x>=abs(direction.y)) && (direction.x>=abs(direction.z))) {\n",d+="  src.x=+direction.z/direction.x;\n",
d+="  src.y=-direction.y/direction.x;\n",d+="  cf.x=3.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.z>=0.0) && (direction.z>=abs(direction.x)) && (direction.z>=abs(direction.y))) {\n",d+="  src.x=-direction.x/direction.z;\n",d+="  src.y=-direction.y/direction.z;\n",d+="  cf.x=5.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.x<=0.0) && (direction.x<=-abs(direction.y)) && (direction.x<=-abs(direction.z))) {\n",d+="  src.x=+direction.z/direction.x;\n",d+="  src.y=+direction.y/direction.x;\n",d+="  cf.x=1.0;cf.y=1.0;\n",
d+="}\n",d+="if ((direction.y>=0.0) && (direction.y>=abs(direction.x)) && (direction.y>=abs(direction.z))) {\n",d+="  src.x=+direction.x/direction.y;\n",d+="  src.y=-direction.z/direction.y;\n",d+="  cf.x=5.0;cf.y=1.0;\n",d+="}\n",d+="if ((direction.y<=0.0) && (direction.y<=-abs(direction.x)) && (direction.y<=-abs(direction.z))) {\n",d+="  src.x=-direction.x/direction.y;\n",d+="  src.y=-direction.z/direction.y;\n",d+="  cf.x=3.0;cf.y=1.0;\n",d+="}\n",d+="texc.x=(cf.x+src.x*srcScale.x) / 6.0;\n",d+=
"texc.y=(cf.y+src.y*srcScale.y) / 4.0;\n",d+="gl_FragColor = texture2D(tileTexture, texc);\n");return d+="}\n"};g.prototype.$j=function(b){var a="";switch(b){case 4:a+="direction.x=dst.x*rectDstDistance;\ndirection.y=dst.y*rectDstDistance;\ndirection.z=-1.0;\n";break;case 12:a+="float r,ph,ro;\nr=length(dst.xy)*0.5;\nro=atan(float(dst.x),float(-dst.y));\nph=r / fisheyeDistance;\ndirection.x= sin(ph) * sin(ro);\ndirection.y=-sin(ph) * cos(ro);\ndirection.z=-cos(ph);\n";break;case 9:a+="float n;\nvec2 ind;\nind=dst*stereoDistance;\nn=1.0 + ind.x*ind.x + ind.y*ind.y;\ndirection.x=2.0*ind.x/n;\ndirection.y=2.0*ind.y/n;\ndirection.z=(n-2.0)/n;\n"}return a+
"direction.w=0.0;\ndirection=normalize(direction);\n"};g.prototype.ik=function(b){var a,d,c,e,f=this.g,l=this.g.H;this.ci=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,this.ci);var h=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];for(a=0;12>a;a++)2>a%3&&(h[a]*=b);l.bufferData(l.ARRAY_BUFFER,new Float32Array(h),l.STATIC_DRAW);this.Xd=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,this.Xd);var x=[1,0,0,0,0,1,1,1];l.bufferData(l.ARRAY_BUFFER,new Float32Array(x),l.STATIC_DRAW);this.Mc=l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,
this.Mc);var g=[0,1,2,0,2,3];l.bufferData(l.ELEMENT_ARRAY_BUFFER,new Uint16Array(g),l.STATIC_DRAW);var h=[],g=[],x=[],k=new m.ra;for(b=0;6>b;b++){c=b%3;e=3>b?1:0;for(d=0;4>d;d++){k.x=-1;k.y=-1;k.z=1;for(a=0;a<d;a++)k.Wk();x.push((0>k.x?.33:0)+.33*c,(0>k.y?0:.5)+.5*e);if(4>b)for(a=0;a<b;a++)k.Pn();else 5==b?k.On():k.Nn();h.push(k.x,k.y,k.z)}a=4*b;g.push(0+a,1+a,2+a,0+a,2+a,3+a)}f.o.pj=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,f.o.pj);l.bufferData(l.ARRAY_BUFFER,new Float32Array(h),l.STATIC_DRAW);
f.o.Ah=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,f.o.Ah);l.bufferData(l.ARRAY_BUFFER,new Float32Array(x),l.STATIC_DRAW);f.o.Ai=l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,f.o.Ai);l.bufferData(l.ELEMENT_ARRAY_BUFFER,new Uint16Array(g),l.STATIC_DRAW);this.dn=l.createBuffer();this.cn=l.createBuffer()};g.prototype.wi=function(b){var a=this;return function(){try{if(b.un)return;var d=a.g.H;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,1);var c=!1;null!=b.ge&&b.ge.complete?b.dk||(d.bindTexture(d.TEXTURE_2D,
b),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,b.ge),c=b.dk=!0):null!=b.Re&&b.Re.complete&&(d.bindTexture(d.TEXTURE_2D,b),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,b.Re),c=!0);c&&(b.loaded=!0);d.bindTexture(d.TEXTURE_2D,null);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,0)}catch(e){a.g.L(e)}a.g.update()}};g.prototype.jk=function(){var b,a,d=this.g,c=d.H;if(this.Ua)for(;0<this.Ua.length;)c.deleteTexture(this.Ua.pop());this.Ua=[];for(var e=0;6>e;e++)a=c.createTexture(),this.Uc++,
a.Re=null,a.ge=null,a.dk=!1,c.bindTexture(c.TEXTURE_2D,a),c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),d.Ee[e]&&(b=new Image,b.crossOrigin=d.crossOrigin,b.src=d.Wb(d.Ee[e]),a.Re=b,b.addEventListener&&b.addEventListener("load",this.wi(a),!1),d.Gb.push(b)),this.Ua.push(a);for(e=0;6>e;e++)d.Hg[e]&&
(b=new Image,b.crossOrigin=d.crossOrigin,b.src=d.Wb(d.Hg[e]),b.addEventListener?b.addEventListener("load",this.wi(this.Ua[e]),!1):b.onload=this.wi(this.Ua[e]),this.Ua[e].ge=b,d.Gb.push(b));for(e=0;e<d.J.length;e++)d.J[e].Zc||(d.J[e].hc=c.createTexture(),d.Uc++,c.bindTexture(c.TEXTURE_2D,d.J[e].hc),c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));d.o.hc=c.createTexture();d.Uc++;c.bindTexture(c.TEXTURE_2D,d.o.hc);c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.bindTexture(c.TEXTURE_2D,null)};g.prototype.Yo=function(){var b=this.g;if(b.m.width!=b.C.offsetWidth||b.m.height!=b.C.offsetHeight)b.m.width=b.C.offsetWidth,
b.m.height=b.C.offsetHeight;b.be&&(b.Bc(0),b.cd());if(b.H){var a=b.H;this.Gh();a.clear(a.DEPTH_BUFFER_BIT);a.useProgram(this.F);this.hg(0);a.uniform1i(this.F.Xe,0);a.enableVertexAttribArray(this.F.$);a.enableVertexAttribArray(this.F.wa);a.bindBuffer(a.ARRAY_BUFFER,this.Xd);a.vertexAttribPointer(this.F.wa,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Mc);a.uniform1f(this.F.Oh,1E-4);a.vertexAttribPointer(this.F.$,3,a.FLOAT,!1,0,0);m.T.Hd(this.cb);m.T.perspective(b.Jb(),
b.jb.width/b.jb.height,.1,100,this.cb);a.uniformMatrix4fv(this.F.Ld,!1,this.cb);for(b=0;6>b;b++)this.hg(b),a.bindBuffer(a.ARRAY_BUFFER,this.ci),a.vertexAttribPointer(this.F.$,3,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.Xd),a.vertexAttribPointer(this.F.wa,2,a.FLOAT,!1,0,0),6<=this.Ua.length&&this.Ua[b].loaded&&(a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.Ua[b]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Mc),a.uniform1i(this.F.Xe,0),a.uniformMatrix4fv(this.F.Vf,!1,this.da),a.uniformMatrix4fv(this.F.Ld,
!1,this.cb),a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0))}};g.prototype.Gh=function(){var b=this.g;if(b.h.Te&&6<b.h.Te.length){var a=parseInt(b.h.Te);b.H.clearColor((a>>16&255)/255,(a>>8&255)/255,(a>>0&255)/255,1)}};g.prototype.hg=function(b){var a=this.g;m.T.Hd(this.da);m.T.rotate(this.da,-a.N.c*Math.PI/180,[0,0,1]);m.T.rotate(this.da,-a.j.c*Math.PI/180,[1,0,0]);m.T.rotate(this.da,(180-a.pan.c)*Math.PI/180,[0,1,0]);a.Ca&&(m.T.rotate(this.da,-a.Ca.pitch*Math.PI/180,[1,0,0]),m.T.rotate(this.da,
a.Ca.N*Math.PI/180,[0,0,1]));4>b?m.T.rotate(this.da,-Math.PI/2*b,[0,1,0]):m.T.rotate(this.da,Math.PI/2*(5==b?1:-1),[1,0,0])};g.prototype.Bo=function(b){var a=this;return function(){a.hi.push(b)}};g.prototype.mm=function(b){this.g.xa=!0;this.g.Oc=!0;b.loaded=!0;b.Vi=0;b.Nd=0;var a=this.g.H;this.nm();a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,1);if(null!=b.h&&b.h.complete){b.bb=a.createTexture();this.g.Uc++;a.bindTexture(a.TEXTURE_2D,b.bb);try{a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b.h)}catch(d){a.texImage2D(a.TEXTURE_2D,
0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array([128,128,128,250])),this.g.L(d)}}this.g.update()};g.prototype.nm=function(){this.g.Fa&&this.g.Fa--;0==this.g.Fa&&this.g.O&&this.g.O.ggLoadedLevels&&this.g.O.ggLoadedLevels()};g.prototype.om=function(){if(0<this.hi.length){var b=this.hi.shift();this.mm(b)}};g.prototype.sn=function(b){var a=this;return function(){a.g.xa=!0;a.g.Oc=!0;var d=a.g.h;try{if(null!=b&&b.complete){var c=d.I[d.I.length-1],e=d.Ka;c.height=c.width=b.width-2*e;c.M=c.ea=1;for(var f=
0;6>f;f++){var l=new m.Gd;l.K=document.createElement("canvas");a.g.Z?(l.K.width=c.width+2*e,l.K.height=c.height+2*e):(l.K.width=d.G+2*e,l.K.height=d.G+2*e);l.Oa=l.K.getContext("2d");l.K.style[a.g.Va+"Origin"]="0% 0%";l.K.style.overflow="hidden";l.K.style.position="absolute";l.h=b;var h=c.width+2*e,x=c.height+2*e;l.Oa&&l.Oa.drawImage(b,0,f*x,h,x,0,0,h,x);if(a.g.Z&&a.g.H){var g=a.g.H;g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,1);l.bb=g.createTexture();a.g.Uc++;g.bindTexture(g.TEXTURE_2D,l.bb);try{g.texImage2D(g.TEXTURE_2D,
0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,l.K)}catch(k){a.g.L(k)}g.bindTexture(g.TEXTURE_2D,null);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,0)}a.g.Fc&&(l.K.Fd=-1,a.g.C.insertBefore(l.K,a.g.C.firstChild));c.V[f]=l}c.loaded=!0}}catch(k){a.g.L(k)}a.g.update()}};g.prototype.ol=function(b){var a=this;return function(){a.g.xa=!0;a.g.Oc=!0;b.h=null}};g.prototype.Wo=function(){var b=this.g,a=b.h,d=b.h.I;b.be&&(b.Bc(0),b.cd());if(b.H){var c=b.H;c.useProgram(this.F);this.Gh();c.clear(c.DEPTH_BUFFER_BIT);c.enable(c.DEPTH_TEST);
m.T.Hd(this.cb);m.T.perspective(b.Jb(),b.jb.width/b.jb.height,.1,100,this.cb);c.uniformMatrix4fv(this.F.Ld,!1,this.cb);b.ul();b.Gi();var e=b.li(),f;for(f=d.length-1;f>=e;){var l=d[f],h=1;f==d.length-1&&0==a.Ka&&(h=a.G/(a.G-.5));for(var x=0;6>x;x++){var g;g=this.g.hb.ab[x];var k=g.Pe;if(g.qc&&0<k.ff&&0<k.vg&&0<k.scale||l.cache){g.xa=!1;var r;g.ze[f]||(g.ze[f]={Wa:0,rb:0,tb:0,ub:0});r=g.ze[f];l.cache?(r.Wa=0,r.rb=0,r.tb=l.M-1,r.ub=l.ea-1):b.ak(l,k,r);for(var k=!0,p=r.rb;p<=r.ub;p++)for(var u=r.Wa;u<=
r.tb;u++){var t=u+p*l.M+x*l.M*l.ea,v=l.V[t];v||(v=l.V[t]=new m.Gd);this.Mg()?v.h||(v.Nd?v.Nd--:(this.gh(v,l,b.qe(x,f,u,p)),b.xa=!0)):this.g.uc++;if(v.bb){if(!v.Je){t=.5*f+1;v.Je=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,v.Je);var q=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];q[3]=u*a.G-a.Ka;q[0]=Math.min((u+1)*a.G,l.width)+a.Ka;q[7]=p*a.G-a.Ka;q[1]=Math.min((p+1)*a.G,l.height)+a.Ka;q[4]=q[1];q[6]=q[3];q[9]=q[0];q[10]=q[7];for(var w=0;12>w;w++)q[w]=0==w%3?h*t*(-2*q[w]/l.width+1):1==w%3?h*t*(-2*q[w]/l.height+
1):t;c.bufferData(c.ARRAY_BUFFER,new Float32Array(q),c.STATIC_DRAW)}}else k=!1;v.visible=g.qc}r.Di=k}}f--}for(x=0;6>x;x++)if(g=b.hb.ab[x],g.qc)for(k=g.Pe,this.hg(x),c.uniform1i(this.F.Xe,0),c.uniformMatrix4fv(this.F.Ld,!1,this.cb),c.uniformMatrix4fv(this.F.Vf,!1,this.da),c.enableVertexAttribArray(this.F.$),c.enableVertexAttribArray(this.F.wa),c.bindBuffer(c.ARRAY_BUFFER,this.Xd),c.vertexAttribPointer(this.F.wa,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.Mc),
c.useProgram(this.F),f=e;f<=d.length-1;){l=d[f];if(g.qc&&0<k.ff&&g.ze[f]&&0<=g.ze[f].Wa){r=g.ze[f];for(p=r.rb;p<=r.ub;p++)for(u=r.Wa;u<=r.tb;u++)t=u+p*l.M+x*l.M*l.ea,(v=l.V[t])&&v.bb&&(c.uniform1f(this.F.Oh,1E-4*(u%2+p%2*2)),c.bindBuffer(c.ARRAY_BUFFER,v.Je),c.vertexAttribPointer(this.F.$,3,c.FLOAT,!1,0,0),c.bindTexture(c.TEXTURE_2D,v.bb),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,
c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0)),v.visible=g.qc;r.Di&&(f=d.length)}f++}this.Wi();b.Oc=!1}};g.prototype.Mg=function(){return this.g.Fa<this.g.ng};g.prototype.gh=function(b,a,d){var c=this.g;c.zi++;b.h=new Image;b.Vi++;b.Nd=1<<b.Vi;b.h.onload=this.Bo(b);b.h.onerror=this.ol(b);b.h.onabort=this.ol(b);b.h.crossOrigin=c.crossOrigin;b.h.setAttribute("src",d);c.L("load "+d);a.cache&&c.Gb.push(b.h);0==this.g.Fa&&
c.O&&c.O.ggReLoadedLevels&&c.O.ggReLoadedLevels();this.g.Fa++};g.prototype.Cl=function(){var b=this.g,a=b.h;b.be&&(b.Bc(0),b.cd());if(b.H){var d=b.H;this.Gh();O&&d.clearColor(.2,0,0,1);d.clear(d.DEPTH_BUFFER_BIT);d.disable(d.DEPTH_TEST);d.disable(d.CULL_FACE);d.bindBuffer(d.ARRAY_BUFFER,this.qh);var c=[0,0];c[2]=b.m.width;c[3]=0;c[4]=b.m.width;c[5]=b.m.height;c[6]=0;c[7]=b.m.height;d.bufferData(d.ARRAY_BUFFER,new Float32Array(c),d.STATIC_DRAW);this.g.uc=0;if(!this.rc||this.Kf)0<a.I.length?this.km():
this.lm();b.o.Wc?this.An():(d.enable(d.DEPTH_TEST),d.depthRange(0,1),d.depthFunc(d.LESS),this.yh=!1,0<a.I.length&&this.Xo(),this.rc&&!this.yh&&this.zn())}};g.prototype.no=function(b,a,d,c,e,f,l){var h=this.g,g=h.h,k=h.m,n=d*g.G/a.width,r=(d+1)*g.G/a.width;d=c*g.G/a.height;a=(c+1)*g.G/a.height;1<r&&(e*=2,r=1);1<a&&(e*=2,a=1);e=Math.min(this.rj,e);var r=(r-n)/e,p=(a-d)/e;c=a=0;var u,t,g={x:0,y:0},v={x:0,y:0},q=0;b.Ug=0;var w=h.Wf,B=new m.ra,z=new m.Il;4>f?z.$f(-90*f):z.ne(5==f?90:-90);h.Ca&&(z.th(h.Ca.N),
z.ne(-h.Ca.pitch));z.$f(-h.pan.c);z.ne(h.j.c);z.th(h.N.c);for(f=0;f<=e;f++)for(var y=0;y<=e;y++)u=2*(n+y*r)-1,t=2*(d+f*p)-1,B.x=1*u,B.y=1*t,B.z=-1,B.normalize(),z.rn(B),u=this.Yj(B,g,h.ya()),0!=h.fc&&1>w&&(u=u&&this.Yj(B,v,h.fc),g.x=g.x*w+v.x*(1-w),g.y=g.y*w+v.y*(1-w)),u?-1E10<g.x&&1E10>g.x&&-1E10<g.y&&1E10>g.y?-2<g.x&&2>g.x&&-2<g.y&&2>g.y&&(a+=g.x,c+=g.y,q++):g.x=NaN:g.x=NaN,b.Vc[b.Ug++]=g.x,b.Vc[b.Ug++]=g.y;0<q?(a/=q,c/=q):l=0;for(d=0;d<b.Ug;d+=2)g.x=b.Vc[d],g.y=b.Vc[d+1],h=g.x-a,n=g.y-c,g.x+=h*
l,g.y+=n*l,b.Vc[d]=k.width/2+g.x*k.width/2,b.Vc[d+1]=k.height/2-g.y*k.width/2;this.oo(b,e)};g.prototype.Yj=function(b,a,d){var c=!0;switch(d){case 0:case 4:d=1/(b.z*this.Ui);a.x=-b.x*d;a.y=b.y*d;0<b.z&&(c=!1);break;case 9:1==b.z&&(c=!1);d=1/((1-b.z)*this.dj);a.x=b.x*d;a.y=-b.y*d;break;case 12:if(d=Math.sqrt(b.x*b.x+b.y*b.y),0==d)a.x=0,a.y=0;else{var e=2*this.oi*Math.acos(-b.z)/d;if(2<d)return!1;a.x=e*b.x;a.y=-e*b.y}}return c};g.prototype.oo=function(b,a){for(var d=this.g,c=[],e,f=b.ld=0;f<a;f++)for(var l=
0;l<a;l++){c[0]=f+l*(a+1);c[1]=f+1+l*(a+1);c[2]=f+(l+1)*(a+1);c[3]=f+1+(l+1)*(a+1);e=!0;for(var h=0;4>h;h++)isNaN(b.Vc[2*c[0]])&&(e=!1);if(e){for(var g=!1,k=!1,n=!1,m=!1,h=0;4>h;h++){var p=b.Vc[2*c[h]];p<d.m.width&&(k=!0);0<=p&&(g=!0);p=b.Vc[2*c[h]+1];p<d.m.height&&(n=!0);0<=p&&(m=!0)}if(e=e&&k&&g&&n&&m)b.ee[b.ld++]=c[0],b.ee[b.ld++]=c[3],b.ee[b.ld++]=c[2],b.ee[b.ld++]=c[0],b.ee[b.ld++]=c[1],b.ee[b.ld++]=c[3]}}};g.prototype.Xo=function(){var b=this.g,a=b.h,d=b.h.I;b.be&&(b.Bc(0),b.cd());if(b.H){var c=
b.H,e=this.Rk;c.useProgram(e);this.kj(e);c.enable(c.CULL_FACE);c.cullFace(c.FRONT);c.enable(c.DEPTH_TEST);m.T.Hd(this.cb);m.T.perspective(b.Jb(),b.jb.width/b.jb.height,.1,100,this.cb);c.uniformMatrix4fv(c.getUniformLocation(e,"uPMatrix"),!1,this.cb);this.g.uc=0;b.Gi();var f=b.li(),l,h=0;l=d.length-1;for(var g={},k=d[l];k.Se&&0<l;)l--,k=d[l];for(var n=l,r=n,p=0;6>p;p++)for(var u=0;u<k.ea;u++)for(var t=0;t<k.M;t++){var v=t+u*k.M+p*k.M*k.ea;g[v]=1}for(;l>=f;){var q={},k=d[l],w=null;0<l&&(w=d[l-1]);var B;
B=!0;for(var z in g)if(g.hasOwnProperty(z)){var v=Number(z),y=k.V[v],p=Number(Math.floor(v/(k.M*k.ea))),u=Math.floor((v-p*k.M*k.ea)/k.M),t=Math.floor(v-(u*k.M+p*k.M*k.ea)),C;if(6<=p)console.log("Grrr...");else if(C=this.g.hb.ab[p],C.xa=!1,y||(y=k.V[v]=new m.Gd,b.L("create "+v)),this.no(y,k,t,u,Math.max(1,this.rj>>n-l),p,-(0!=b.fc)?.3:.1),y.visible=0<y.ld||k.cache,y.dh=3,y.Pf=Date.now(),y.visible&&!y.bb&&(B=!1,this.Mg()?y.h||(y.Nd?y.Nd--:(this.gh(y,k,b.qe(p,l,t,u)),b.xa=!0)):this.g.uc++),w&&(y.visible||
w.cache)){var y=(t*a.G+1)/k.width,t=Math.min(1,(t+1)*a.G-1/k.width),D=(u*a.G+1)/k.height,u=Math.min(1,(u+1)*a.G-1/k.height),v=a.G/w.width;C=a.G/w.height;var E=D,D=Math.floor(D*w.height/a.G);do{var F=y,H=Math.floor(y*w.width/a.G);do{var I=H+D*w.M+p*w.M*w.ea;H<w.M&&D<w.ea?q[I]=1:b.L("Grrrr");H++;F+=v}while(F<t);D++;E+=C}while(E<u)}}B&&(r=l,20>b.f.c&&l<this.De&&(this.yh=!0));g=q;l--}this.Wi();c.uniform1i(c.getUniformLocation(e,"tileTexture"),0);c.activeTexture(c.TEXTURE0);l=f;for(f=-1;l<=Math.min(r,
this.De-1);){k=d[l];for(z in k.V)if(k.V.hasOwnProperty(z)){g=Number(z);y=k.V[g];p=Math.floor(g/(k.M*k.ea));u=Math.floor((g-p*k.M*k.ea)/k.M);t=Math.floor(g-(u*k.M+p*k.M*k.ea));f!=p&&(f=p,this.Hh(p,e));if(h>b.he){b.L("Excided painted tiles");this.yh=!1;break}y.bb&&(g=p=a.G,t==k.M-1&&(p=k.width-a.G*t),u==k.ea-1&&(g=k.height-a.G*u),p=(p+2*a.Ka)/a.G,g=(g+2*a.Ka)/a.G,c.bindTexture(c.TEXTURE_2D,y.bb),c.uniform2f(c.getUniformLocation(e,"uCanvasDimensions"),b.m.width,b.m.height),n=c.getUniformLocation(e,"srcScale"),
c.uniform2f(n,.5*k.width/a.G/p,.5*k.height/a.G/g),n=c.getUniformLocation(e,"srcOffset"),c.uniform2f(n,(.5*k.width+a.Ka-a.G*t)/a.G/p,-(.5*k.height+a.Ka-a.G*u)/a.G/g+1),n=c.getUniformLocation(e,"zOffset"),c.uniform1f(n,(l+1)/(d.length+5)),p=c.getAttribLocation(e,"aVertexPosition"),c.disableVertexAttribArray(0),c.disableVertexAttribArray(1),c.disableVertexAttribArray(2),c.enableVertexAttribArray(p),c.activeTexture(c.TEXTURE0),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.bindBuffer(c.ARRAY_BUFFER,this.dn),c.vertexAttribPointer(p,2,c.FLOAT,!1,0,0),c.bufferData(c.ARRAY_BUFFER,new Float32Array(y.Vc),c.DYNAMIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.cn),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(y.ee),c.DYNAMIC_DRAW),c.drawElements(c.TRIANGLES,y.ld,c.UNSIGNED_SHORT,0),h++)}l++}c.disable(c.CULL_FACE);
c.cullFace(c.FRONT_AND_BACK);b.Oc=!1}};g.prototype.Hh=function(b,a){var d=this.g,c=d.H;m.T.Hd(this.cb);m.T.Hd(this.da);m.T.rotate(this.da,d.N.c*Math.PI/180,[0,0,1]);m.T.rotate(this.da,d.j.c*Math.PI/180,[1,0,0]);m.T.rotate(this.da,-d.pan.c*Math.PI/180,[0,1,0]);d.Ca&&(m.T.rotate(this.da,-d.Ca.pitch*Math.PI/180,[1,0,0]),m.T.rotate(this.da,d.Ca.N*Math.PI/180,[0,0,1]));4>b?m.T.rotate(this.da,-Math.PI/2*b,[0,1,0]):m.T.rotate(this.da,Math.PI/2*(5==b?1:-1),[1,0,0]);c.uniformMatrix4fv(c.getUniformLocation(a,
"matRotate"),!1,this.da)};g.prototype.An=function(){var b=this.g;if(b.H){var a=b.H,d,c=this.Sk;a.useProgram(c);this.Hh(0,c);a.uniform2f(a.getUniformLocation(c,"uCanvasDimensions"),b.m.width,b.m.height);1==b.o.format&&(d=a.getUniformLocation(c,"srcScale"),a.uniform2f(d,-.5/Math.PI,(b.o.ri?-1:1)/Math.PI));14==b.o.format&&(d=a.getUniformLocation(c,"srcScale"),a.uniform2f(d,1-2*b.o.xe/(b.o.width/3),1-2*b.o.xe/(b.o.height/2)));d=a.getUniformLocation(c,"srcOffset");a.uniform2f(d,.5,.5);this.kj(c);d=a.getUniformLocation(c,
"cubeTexture");a.uniform1i(d,0);d=a.getAttribLocation(c,"aVertexPosition");a.disableVertexAttribArray(0);a.disableVertexAttribArray(1);a.disableVertexAttribArray(2);a.enableVertexAttribArray(d);a.bindBuffer(a.ARRAY_BUFFER,this.qh);a.vertexAttribPointer(d,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,b.o.hc);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,
a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Mc);a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)}};g.prototype.kj=function(b){var a=this.g,d=a.H,c=this.g.m,e=c.width/c.height;switch(a.f.mode){case 1:e=1;break;case 2:e=c.width/Math.sqrt(c.width*c.width+c.height*c.height);break;case 3:4*c.height/3<c.width&&(e=4/3)}c=d.getUniformLocation(b,"rectDstDistance");this.Ui=Math.tan(Math.min(a.f.c,179)/2*Math.PI/180)*e;d.uniform1f(c,this.Ui);
c=d.getUniformLocation(b,"fisheyeDistance");this.oi=180/(a.f.c*Math.PI*e);d.uniform1f(c,this.oi);c=d.getUniformLocation(b,"stereoDistance");this.dj=Math.tan(Math.min(a.f.c,359)/4*Math.PI/180)*e;d.uniform1f(c,this.dj);c=d.getUniformLocation(b,"directionBlend");d.uniform1f(c,a.Wf)};g.prototype.zn=function(){var b=this.g,a=b.H,d=this.Qk;a.useProgram(d);a.enable(a.DEPTH_TEST);this.Hh(0,d);a.uniform2f(a.getUniformLocation(d,"uCanvasDimensions"),b.m.width,b.m.height);b=a.getUniformLocation(d,"srcScale");
a.uniform2f(b,1,1);b=a.getUniformLocation(d,"srcOffset");a.uniform2f(b,0,0);b=a.getUniformLocation(d,"zOffset");a.uniform1f(b,.9999);this.kj(d);this.Hh(0,d);b=a.getUniformLocation(d,"cubeTexture");a.uniform1i(b,0);d=a.getAttribLocation(d,"aVertexPosition");a.disableVertexAttribArray(0);a.disableVertexAttribArray(1);a.disableVertexAttribArray(2);a.enableVertexAttribArray(d);a.bindBuffer(a.ARRAY_BUFFER,this.qh);a.vertexAttribPointer(d,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_CUBE_MAP,
this.rc);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Mc);a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)};g.prototype.lm=function(){for(var b=this.g,a=b.H,d=[1,3,5,4,0,2],c=!0,e=!0,f=!1,l=0;6>l;l++)this.Ua[l].ge.complete?this.Gg[l]||
(f=!0):c=!1,this.Ua[l].Re.complete||(e=!1);if(e||c)if(!e||c||!this.rc||f){l=Math.round(b.ic/b.af);e=(b.ic-l)/2;b.L("paint cube single - isMain: "+c+" overlap: "+e);this.De=0;this.rc||(this.rc=a.createTexture());b.Uc++;a.bindTexture(a.TEXTURE_CUBE_MAP,this.rc);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,1);f=document.createElement("canvas");f.width=l;f.height=l;for(var h=
f.getContext("2d"),l=0;6>l;l++){var g=d[l];this.Ua[g].ge.complete?this.Gg[g]||(h.drawImage(this.Ua[g].ge,-e,-e),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,f),this.Gg[g]=!0):(h.drawImage(this.Ua[g].Re,-e,-e,b.ic,b.ic),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,f))}this.Kf=!c}};g.prototype.km=function(){var b=this.g,a=this.g.h,d=b.h.I,c=b.H,e,f;e=d.length-1;if(!(0>e)){d[e].Se&&e--;var l=512;b.Jf&&(l=256);!b.We&&2<=b.devicePixelRatio&&
(l=512);for((f=c.getParameter(c.MAX_CUBE_MAP_TEXTURE_SIZE))&&f<l&&(l=f);0<e&&d[e-1].width<=l;)e--;var h,l=d[e];if(0!=l.M&&(f=e,h=this.hm(e),this.Kf&&h&&(this.Kf=!1),h||(e=d.length-1,l=d[e],h||(l.Se?(h=l.loaded,this.Ei(e-1)&&(--e,h=!0)):h=this.Ei(e)),this.Kf=!0),this.Ei(f),h&&this.De>e)){l=d[e];b.L("paint cube level "+e);this.De=e;d=b.h.Ka;e=0<d||1<l.M||1<l.ea;var g;if(e){var k=document.createElement("canvas");k.width=l.width;k.height=l.height;2048>l.width&&(1500<l.width?(k.width=2048,k.height=2048):
700<l.width?(k.width=1024,k.height=1024):(k.width=512,k.height=512));g=k.getContext("2d")}this.rc=c.createTexture();b.Uc++;c.bindTexture(c.TEXTURE_CUBE_MAP,this.rc);c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,1);f=[1,3,5,4,0,2];h=k.width/l.width;for(var a=a.G,n=0;6>n;n++){for(var m=0;m<l.ea;m++)for(var p=0;p<l.M;p++){var u=p+m*l.M+f[n]*l.M*l.ea,t=l.V[u],v=t.h;t.K&&(v=t.K);
v?e?g.drawImage(v,h*(p*a-d),h*(m*a-d),h*v.width,h*v.height):c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,v):(b.L("WTF?!"),b.L(u),b.L(t))}e&&c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,k)}}}};g.prototype.Ei=function(b){var a=this.g,d=a.h.I[b];if(0==d.M)return!1;var c=!0;d.cache=!0;for(var e=0;6>e;e++)for(var f=0;f<d.ea;f++)for(var l=0;l<d.M;l++){var h=l+f*d.M+e*d.M*d.ea,g=d.V[h];g||(g=d.V[h]=new m.Gd);this.Mg()?g.h||(g.Nd?g.Nd--:(this.gh(g,
d,a.qe(e,b,l,f)),a.xa=!0)):this.g.uc++;g.bb||(c=!1,a.xa=!0)}c&&(d.loaded=!0);return c};g.prototype.hm=function(b){b=this.g.h.I[b];if(0==b.M)return!1;for(var a=0;6>a;a++)for(var d=0;d<b.ea;d++)for(var c=0;c<b.M;c++){var e=b.V[c+d*b.M+a*b.M*b.ea];if(!e||!e.bb)return!1}return b.loaded=!0};g.prototype.ready=function(){return null!=this.rc};g.prototype.Wi=function(){for(var b=this.g,a=b.h.I,d=b.H,c=Date.now(),e=a.length-1;0<=e;e--){var f=a[e];if(!f.cache)for(var l in f.V)if(f.V.hasOwnProperty(l)){var h=
f.V[l];0<h.dh&&h.dh--;h.visible||0<h.dh?(h.visible&&(h.Pf=c),h=this.Dd.indexOf(h),-1!==h&&this.Dd.splice(h,1)):-1===this.Dd.indexOf(h)&&(h.level=f,this.Dd.push(h))}}if(this.Dd.length>1.1*b.ml)for(this.Dd.sort(function(a,c){return c.Pf-a.Pf});this.Dd.length>b.ml;)h=this.Dd.pop(),h.bb&&(d.deleteTexture(h.bb),b.Uc--,h.bb=0),h.h=null,h.Je&&(d.deleteBuffer(h.Je),h.Je=0),l=h.level.V.indexOf(h),b.L("delete "+l+" "+(c-h.Pf)),delete h.level.V[l]};g.prototype.Qo=function(){var b=this.g;if(b.H){var a=this.g.H;
a.disable(a.DEPTH_TEST);var d;for(d=0;d<b.J.length;d++){var c=b.J[d];if(!c.Zc){m.T.Hd(this.da);m.T.rotate(this.da,-b.N.c*Math.PI/180,[0,0,1]);m.T.rotate(this.da,-b.j.c*Math.PI/180,[1,0,0]);m.T.rotate(this.da,(180-b.pan.c)*Math.PI/180,[0,1,0]);m.T.rotate(this.da,c.pan*Math.PI/180,[0,1,0]);m.T.rotate(this.da,-c.j*Math.PI/180,[1,0,0]);m.T.translate(this.da,[0,0,1]);m.T.rotate(this.da,c.mb*Math.PI/180,[0,0,1]);m.T.rotate(this.da,-c.Da*Math.PI/180,[0,1,0]);m.T.rotate(this.da,c.va*Math.PI/180,[1,0,0]);
var e=Math.tan(c.f/2*Math.PI/180),f=c.Sd;f||(f=16/9);m.T.scale(this.da,[e,e/f,1]);m.T.translate(this.da,[0,0,-1]);a.bindBuffer(a.ARRAY_BUFFER,this.ci);a.vertexAttribPointer(this.F.$,3,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.Xd);a.vertexAttribPointer(this.F.wa,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,c.hc);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,
a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Mc);a.uniform1i(this.F.Xe,0);a.uniformMatrix4fv(this.F.Vf,!1,this.da);a.uniformMatrix4fv(this.F.Ld,!1,this.cb);a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)}}a.enable(a.DEPTH_TEST)}};g.prototype.Po=function(){var b=this.g,a;if(b.m.width!=b.C.offsetWidth||b.m.height!=b.C.offsetHeight)b.m.width=b.C.offsetWidth,b.m.height=b.C.offsetHeight;b.be&&(b.Bc(0),b.cd());if(b.H){var d=b.H;
d.useProgram(this.F);m.T.Hd(this.cb);m.T.perspective(b.Jb(),b.jb.width/b.jb.height,.1,100,this.cb);d.uniformMatrix4fv(this.F.Ld,!1,this.cb);this.hg(0);d.uniform1i(this.F.Xe,0);d.uniformMatrix4fv(this.F.Ld,!1,this.cb);d.uniformMatrix4fv(this.F.Vf,!1,this.da);d.enableVertexAttribArray(this.F.$);d.enableVertexAttribArray(this.F.wa);d.bindBuffer(d.ARRAY_BUFFER,this.Xd);d.vertexAttribPointer(this.F.wa,2,d.FLOAT,!1,0,0);d.activeTexture(d.TEXTURE0);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.Mc);d.uniform1f(this.F.Oh,
1E-4);d.vertexAttribPointer(this.F.$,3,d.FLOAT,!1,0,0);d.bindTexture(d.TEXTURE_2D,b.o.hc);for(a=0;1>a;a++)this.hg(0),d.bindBuffer(d.ARRAY_BUFFER,b.o.pj),d.vertexAttribPointer(this.F.$,3,d.FLOAT,!1,0,0),d.bindBuffer(d.ARRAY_BUFFER,b.o.Ah),d.vertexAttribPointer(this.F.wa,2,d.FLOAT,!1,0,0),d.activeTexture(d.TEXTURE0),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.o.Ai),d.uniform1i(this.F.Xe,0),d.uniformMatrix4fv(this.F.Vf,!1,this.da),d.uniformMatrix4fv(this.F.Ld,!1,this.cb),d.drawElements(d.TRIANGLES,36,d.UNSIGNED_SHORT,
0)}};g.prototype.Oo=function(){var b=this.g,a=b.H,d=b.o;if(0<b.J.length)for(var c=0;c<b.J.length;c++){var e=b.J[c];if(!e.Zc&&e.qk&&e.Tg!=e.a.currentTime&&(e.Tg=e.a.currentTime,!e.Sd&&0<e.a.videoHeight&&(e.Sd=e.a.videoWidth/e.a.videoHeight),b.tg))try{e.hc&&(a.bindTexture(a.TEXTURE_2D,e.hc),a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,e.a),b.update())}catch(l){b.L(l)}}if(d.a&&(c=Number(d.a.currentTime),d.Tg!=c)){d.Tg=c;try{var f=0<d.a.readyState;b.If&&d.Wc&&(f=f&&0<d.a.currentTime);d.hc&&
d.$g&&f&&(d.Wc=!0,d.width=d.a.videoWidth,d.height=d.a.videoHeight,a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.o.ri),a.bindTexture(a.TEXTURE_2D,d.hc),a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,d.a),d.ll=!0,b.update())}catch(l){b.L(l)}}};g.prototype.Ik=function(){var b,a,d=this.g,c=this.g.H;d.sa.style.visibility="hidden";d.w.Nf!=d.w.mode&&(d.w.Nf=d.w.mode);if((0<=d.w.mode||0<d.w.fb.length)&&!d.B.og){var e=1;0>=d.w.mode&&(e=0);3==d.w.mode&&(e=d.w.na);for(b=0;b<d.P.length;b++){var f=d.P[b];if("poly"==
f.type){var l=f.Md,h=e;2==d.w.mode&&(h=f.na);var g=d.w.fb.indexOf(f.id);-1!=g&&(h=d.w.Eb[g]);if(0<l.length){g=[];for(a=0;a<l.length;a++)g.push(l[a].gc),g.push(l[a].Cb),g.push(0);c.useProgram(this.rd);c.enable(c.BLEND);c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.SRC_ALPHA,c.ONE);c.disable(c.DEPTH_TEST);l=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,l);c.bufferData(c.ARRAY_BUFFER,new Float32Array(g),c.STATIC_DRAW);c.uniform2f(c.getUniformLocation(this.rd,"uCanvasDimensions"),d.m.width,d.m.height);
l=c.getUniformLocation(this.rd,"uColor");a=f.Sb;c.uniform3f(l,(a>>16&255)/255,(a>>8&255)/255,(a&255)/255);var k=c.getUniformLocation(this.rd,"uAlpha");c.uniform1f(k,f.Rb*h);c.vertexAttribPointer(this.rd.$,3,c.FLOAT,!1,0,0);c.drawArrays(c.LINE_LOOP,0,g.length/3);a=f.Pb;c.uniform3f(l,(a>>16&255)/255,(a>>8&255)/255,(a&255)/255);c.uniform1f(k,f.Ob*h);c.enable(c.STENCIL_TEST);c.clearStencil(0);c.clear(c.STENCIL_BUFFER_BIT);c.colorMask(!1,!1,!1,!1);c.stencilFunc(c.ALWAYS,1,1);c.stencilOp(c.INCR,c.INCR,
c.INCR);c.drawArrays(c.TRIANGLE_FAN,0,g.length/3);c.colorMask(!0,!0,!0,!0);c.stencilFunc(c.EQUAL,1,1);c.stencilOp(c.ZERO,c.ZERO,c.ZERO);c.drawArrays(c.TRIANGLE_FAN,0,g.length/3);c.disable(c.BLEND);c.enable(c.DEPTH_TEST);c.disable(c.STENCIL_TEST);c.useProgram(this.F)}}}}};g.prototype.jj=function(){var b=this.g,a=b.h;if(b.m.width!=b.C.offsetWidth||b.m.height!=b.C.offsetHeight)b.m.width=b.C.offsetWidth,b.m.height=b.C.offsetHeight;b.be&&(b.Bc(0),b.cd());if(b.H){var d=b.H;this.Gh();d.clear(d.COLOR_BUFFER_BIT|
d.DEPTH_BUFFER_BIT);d.disable(d.DEPTH_TEST);d.disable(d.CULL_FACE);d.useProgram(this.uf);var c=d.getUniformLocation(this.uf,"uRect");d.uniform2f(d.getUniformLocation(this.uf,"uCanvasDimensions"),b.m.width,b.m.height);d.activeTexture(d.TEXTURE0);var e;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.Mc);e=d.getAttribLocation(this.uf,"aVertexPosition");d.disableVertexAttribArray(0);d.disableVertexAttribArray(1);d.disableVertexAttribArray(2);d.enableVertexAttribArray(e);d.bindBuffer(d.ARRAY_BUFFER,this.Xd);
d.vertexAttribPointer(e,2,d.FLOAT,!1,0,0);b.uc=0;var f,l;l=100/b.f.c;f=a.width/a.height;e=b.m.height*l*f;l*=b.m.height;f=(b.pan.c/100/f-.5)*e+b.m.width/2;for(var h=(b.j.c/100-.5)*l+b.m.height/2,g,k,n,r=0;a.I.length>=r+2&&a.I[r+1].width>e;)r++;var p,u;u=[];for(p=a.I.length-1;p>=r;){var t=a.I[p],v;t.cache?(v={Wa:0,rb:0},v.tb=t.M-1,v.ub=t.ea-1):(v={},g=-h/l*(t.height/b.h.G),k=(-f+b.m.width)/e*(t.width/b.h.G),n=(-h+b.m.height)/l*(t.height/b.h.G),v.Wa=Math.min(Math.max(0,Math.floor(-f/e*(t.width/b.h.G))),
t.M-1),v.rb=Math.min(Math.max(0,Math.floor(g)),t.ea-1),v.tb=Math.min(Math.max(0,Math.floor(k)),t.M-1),v.ub=Math.min(Math.max(0,Math.floor(n)),t.ea-1));u[p]=v;var q=!0;for(k=v.rb;k<=v.ub;k++)for(g=v.Wa;g<=v.tb;g++){n=g+k*t.M;var w=t.V[n];w||(w=new m.Gd,t.V[n]=w);this.Mg()?w.h||(this.gh(w,t,b.qe(0,p,g,k)),b.xa=!0):this.g.uc++;w.h&&w.h.complete||(q=!1);w.visible=!0}v.Di=q;p--}for(p=a.I.length-1;p>=r;){t=a.I[p];if(u[p]&&0<=u[p].Wa)for(v=u[p],k=v.rb;k<=v.ub;k++)for(g=v.Wa;g<=v.tb;g++)n=g+k*t.M,(w=t.V[n])&&
w.h&&w.h.complete&&(d.uniform4f(c,f+(-a.Ka+a.G*g)*e/t.width,h+(-a.Ka+a.G*k)*l/t.height,w.h.width*e/t.width,w.h.height*l/t.height),w&&w.bb&&(d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.Mc),d.bindTexture(d.TEXTURE_2D,w.bb),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,
0)));p--}this.Wi()}};g.prototype.rh=function(){var b=this.g.H;if(b&&this.Ua)for(;0<this.Ua.length;){var a=this.Ua.pop();a.un=!0;b.deleteTexture(a)}this.rc&&(b.deleteTexture(this.rc),this.rc=null);this.De=1E6;this.Gg=[!1,!1,!1,!1,!1,!1]};return g}();m.Ql=k})(ggP2VR||(ggP2VR={}));
(function(m){var k=function(){return function(){this.Pe={vf:1,wf:1,Rf:0,Sf:0,ff:0,vg:0,scale:1};this.qc=!0;this.ze=[]}}(),g=function(){function b(){var a;this.ab=Array(6);for(a=0;6>a;a++)this.ab[a]=new k}b.prototype.im=function(a,d,c,b){for(var f=0;6>f;f++){var l;if(l=this.ab[f]){var h;h=[];h.push(new m.ra(-1,-1,-1,0,0));h.push(new m.ra(1,-1,-1,1,0));h.push(new m.ra(1,1,-1,1,1));h.push(new m.ra(-1,1,-1,0,1));for(var g=0;g<h.length;g++)4>f?h[g].Da(-Math.PI/2*f):h[g].va(Math.PI/2*(4===f?-1:1)),b&&(h[g].mb(b.N*
Math.PI/180),h[g].va(-b.pitch*Math.PI/180)),h[g].Da(-a*Math.PI/180),h[g].va(d*Math.PI/180),h[g].mb(c*Math.PI/180);l.qc=0<h.length}}};return b}();m.Ml=g})(ggP2VR||(ggP2VR={}));
(function(m){m.Ll=function(){return function(){this.I=[];this.Te="0x000000";this.Mk=!1;this.zk=this.yk=.4;this.G=512;this.Ka=1;this.Ci=0;this.Ak="";this.Uk=this.height=this.width=0}}();m.Hk=function(){return function(){this.height=this.width=0;this.Se=this.cache=!1;this.ea=this.M=0;this.loaded=!1;this.V=[]}}();m.Gd=function(){return function(){this.loaded=this.visible=!1;this.Nd=this.Vi=0;this.Vc=[];this.Ug=0;this.ee=[];this.dh=this.Pf=this.ld=0}}()})(ggP2VR||(ggP2VR={}));
(function(m){m.Gl=function(){return function(k,g){this.g=k;this.za=g;var b,a,d=this.__div=document.createElement("div");b=document.createElement("img");b.setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA5xJREFUeNqclmlIVFEUx997TjrplFQW2WKBBSYtRFlpWUILSSsRZRQIBdGHCFqIoKIvQRsUFRJC9LEgaSFbMMpcWi1pLzOLsjItKms0U5t5/c/wH7nc5o2jF374xrv87z33nHOPaRsRtbFgDpgJxoD+wATfwDNQDK6CyrCr5OcbhgiGIRsUAZt4QTWoIFXgp9JfAhY7rgdBl8NeBoLDYBloA+dBOagFTcDHcVEgDgwBGWA+OAcugvXgvb5wKMGJoAAMp9BpUA96EBf/Btsf8BI8AWfAErAcpHHDZeriliY2AVwDg8AucAQ0Ag+I4XhTm2Oxz8PT46KMbTx5EZjuJDgAnAVusJUm9DhYwalFcc59sIXXIaceFkowDySBPTRPL20xm+b7zYXa+N3CPrWJ6GuwGySA40HLBHc/GywFhbS5R1lEBrZy7FQwiSaX9pmnqeAYt+KUcew7BVZw/QKTq0ocpYPVvDOXItZCk2xgDIZqL8BR8Ab0VDbr4yZOgLeIwzQx6WiQxcCt1+6sld66L4yYtFSwF4yg2dU7/cEwGW9YVkAwmycp1dzdpvgm0DcCh4kHmxWzBls0uBX4qqmZJ4KzePm1IeJLgjmlC16aDKZpp5Q168B3o6wsSwTHgU+MIUs74RSj6y1d+212HKimJlUE+tFRfJpYtOKNXWmJTASqWf2Bu/R6+4TKHOrOzG4IhptjWgHbGkZvepQ6SQK7oRuCXzjX1DJavBEX1ygfT8FgBqpfm1zRDcEKbR2bsZlkJCdXieB1ZhZ5YtqVgXIPN+m9kbY6hpdb+d9fPncJRmZmqQheZkemJmgxyxykl3XWJEkcAl7N21s7PDcl5ZJ0PAa3wVwmWtVbZafPwQ7wLozYB7ATPNJO56d/LAikP9u+66KNJS1d4IOZp7wU0hfLukUyzgwm70T2N/DOxIy/eFdqawa5DL2NEGwP5k15Ja4woz9glvcomd9NzyvkFcQo5gomaLfm5c0svnKZ2k7q7+FauvR2MJKZR3+sY5WgtvkdG6JyELGhNHMTXyGfLviRJ5Tcd4Dlhle7086Sgp8CqVxDkn4OqHaqacr5ekjy3Q/W0FRNNGmoMtamdzdxsytZC0lqXKhEgWPVVgImg2NgFT1MHOoOk3yLEtgWN5TEOYvoIFI1rGM19//2wpAD7imF7lfwENwAxaASNCj90pcLLKdC2Iyw1M9gnEplMEp5kOU1f8WwKGJm8oUr9f8JMAAVMDM6HSDa9QAAAABJRU5ErkJggg%3D%3D");
b.setAttribute("style","position: absolute;width: 28px; height: 28px;top: -14px;left: -14px; "+k.Ja+"user-select: none;");b.ondragstart=function(){return!1};d.appendChild(b);b="position:absolute;"+(k.Ja+"user-select: none;");b+=k.Ja+"touch-callout: none;";b+=k.Ja+"tap-highlight-color: rgba(0,0,0,0);";k.Jd&&!k.Z&&(b+=k.Ja+"transform: translateZ(9999999px);");d.setAttribute("style",b);d.onclick=function(){k.Ye(g);k.Ni(g.url,g.target)};var c=k.w.hj;c.enabled&&(a=document.createElement("div"),b="position:absolute;top:\t 20px;",
b=c.Nh?b+"white-space: pre-wrap;":b+"white-space: nowrap;",b+=k.Ja+"transform-origin: 50% 50%;",a.setAttribute("style",b+"visibility: hidden;overflow: hidden;padding: 0px 1px 0px 1px;font-size: 13px;"),a.style.color=this.g.fa(c.ij,c.gj),c.background?a.style.backgroundColor=this.g.fa(c.Pb,c.Ob):a.style.backgroundColor="transparent",a.style.border="solid "+this.g.fa(c.Sb,c.Rb)+" "+c.Vh+"px",a.style.borderRadius=c.Uh+"px",a.style.textAlign="center",0<c.width?(a.style.left=-c.width/2+"px",a.style.width=
c.width+"px"):a.style.width="auto",a.style.height=0<c.height?c.height+"px":"auto",a.style.overflow="hidden",a.innerHTML=g.title,d.onmouseover=function(){0==c.width&&(a.style.left=-a.offsetWidth/2+"px");a.style.visibility="inherit"},d.onmouseout=function(){a.style.visibility="hidden"},d.appendChild(a))}}()})(ggP2VR||(ggP2VR={}));
(function(m){m.yc=function(){return function(){this.Wd=this.Vd=this.Ic=this.Ud=this.vb=this.type=this.nb=this.value=this.time=0}}();m.Bk=function(){return function(){this.Io=this.Tl=this.length=0}}();m.rk=function(){return function(){}}()})(ggP2VR||(ggP2VR={}));
(function(m){var k=function(){function g(b){this.g=b;this.enabled=!1;this.Ag=1;this.ye=0;this.type="crossdissolve";this.Nb=this.Na=this.tc=0;this.gf=5;this.Rd=1;this.hf=!1;this.pe=this.oe=this.cj=0;this.xd=70;this.Fl=0;this.ob=this.El=1;this.yg=this.xg=.5;this.Td=this.Mh=this.hh=this.bh=!1;this.fi=1}g.prototype.Hf=function(){var b=this.g.H,a=b.createShader(b.VERTEX_SHADER);b.shaderSource(a,"attribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nvarying vec2 vTextureCoord;\nuniform bool uZoomIn;\nuniform float uZoomFactor;\nuniform vec2 uZoomCenter;\nvoid main(void) {\n\t gl_Position = vec4(aVertexPosition, 1.0);\n\t if(!uZoomIn) {\n\t \n\t   vTextureCoord = aTextureCoord;\n\t }\n\t else {\n\t   vTextureCoord = (aTextureCoord - vec2(0.5, 0.5)) * (1.0/uZoomFactor) + uZoomCenter;\n\t }\n}\n");
b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(a)),a=null);var d=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uAlpha;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uAlpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.ma=b.createProgram();b.attachShader(this.ma,a);b.attachShader(this.ma,d);b.linkProgram(this.ma);b.getProgramParameter(this.ma,b.LINK_STATUS)||alert("Could not initialise shaders");this.ma.$=b.getAttribLocation(this.ma,"aVertexPosition");b.enableVertexAttribArray(this.ma.$);this.ma.wa=b.getAttribLocation(this.ma,"aTextureCoord");b.enableVertexAttribArray(this.ma.wa);d=b.createShader(b.FRAGMENT_SHADER);
b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uColorPercent;\nuniform float uAlpha;\nuniform vec3 uDipColor;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x * (1.0 - uColorPercent) + uDipColor.x * uColorPercent, textureColor.y * (1.0 - uColorPercent) + uDipColor.y * uColorPercent, textureColor.z * (1.0 - uColorPercent) + uDipColor.z * uColorPercent, uAlpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Ra=b.createProgram();b.attachShader(this.Ra,a);b.attachShader(this.Ra,d);b.linkProgram(this.Ra);b.getProgramParameter(this.Ra,b.LINK_STATUS)||alert("Could not initialise shaders");this.Ra.$=b.getAttribLocation(this.Ra,"aVertexPosition");b.enableVertexAttribArray(this.Ra.$);this.Ra.wa=b.getAttribLocation(this.Ra,"aTextureCoord");b.enableVertexAttribArray(this.Ra.wa);d=b.createShader(b.FRAGMENT_SHADER);
b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform bool uRound;\nuniform float uRadius;\nuniform vec2 uRectDim;\nuniform vec2 uIrisCenter;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n float alpha = 0.0;\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n if (uRound) {\n\t  vec2 diff = uIrisCenter - gl_FragCoord.xy;\n\t   float distFromCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n\t   if (distFromCenter > uRadius) {\n      alpha = 1.0;\n    } else {\n      alpha = 1.0 - ((uRadius - distFromCenter) / uSoftEdge);\n    };\n }\n else {\n    float alphaFromLeft = 1.0 - ((gl_FragCoord.x -(uIrisCenter.x - uRectDim.x)) / uSoftEdge);\n    float alphaFromRight = 1.0 - (((uIrisCenter.x + uRectDim.x) - gl_FragCoord.x) / uSoftEdge);\n    float alphaFromTop = 1.0 - ((gl_FragCoord.y -(uIrisCenter.y - uRectDim.y)) / uSoftEdge);\n    float alphaFromBottom = 1.0 - (((uIrisCenter.y + uRectDim.y) - gl_FragCoord.y) / uSoftEdge);\n    alpha = max(max(alphaFromLeft, alphaFromRight), max(alphaFromTop, alphaFromBottom));\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Ga=b.createProgram();b.attachShader(this.Ga,a);b.attachShader(this.Ga,d);b.linkProgram(this.Ga);b.getProgramParameter(this.Ga,b.LINK_STATUS)||alert("Could not initialise shaders");this.Ga.$=b.getAttribLocation(this.Ga,"aVertexPosition");b.enableVertexAttribArray(this.Ga.$);this.Ga.wa=b.getAttribLocation(this.Ga,"aTextureCoord");b.enableVertexAttribArray(this.Ga.wa);d=b.createShader(b.FRAGMENT_SHADER);
b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uPercent;\nuniform int uDirection;\nuniform vec2 uCanvasDimensions;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n float alpha = 0.0;\n if (uDirection == 1) {\n\t if (gl_FragCoord.x > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.x) / uSoftEdge);\n  }\n }\n if (uDirection == 2) {\n\t if (gl_FragCoord.x < uCanvasDimensions.x - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.x - (uCanvasDimensions.x - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 3) {\n\t if (gl_FragCoord.y < uCanvasDimensions.y - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.y - (uCanvasDimensions.y - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 4) {\n\t if (gl_FragCoord.y > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.y) / uSoftEdge);\n  }\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Ma=b.createProgram();b.attachShader(this.Ma,a);b.attachShader(this.Ma,d);b.linkProgram(this.Ma);b.getProgramParameter(this.Ma,b.LINK_STATUS)||alert("Could not initialise shaders");this.Ma.$=b.getAttribLocation(this.Ma,"aVertexPosition");b.enableVertexAttribArray(this.Ma.$);this.Ma.wa=b.getAttribLocation(this.Ma,"aTextureCoord");b.enableVertexAttribArray(this.Ma.wa)};g.prototype.Bc=function(){var b=
this.g.H;if(!b)return!1;if(this.Mb=b.createFramebuffer()){b.bindFramebuffer(b.FRAMEBUFFER,this.Mb);this.Mb.width=1024;this.Mb.height=1024;this.te=b.createTexture();b.bindTexture(b.TEXTURE_2D,this.te);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,this.Mb.width,this.Mb.height,0,b.RGBA,b.UNSIGNED_BYTE,null);var a=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,a);b.renderbufferStorage(b.RENDERBUFFER,
b.DEPTH_COMPONENT16,this.Mb.width,this.Mb.height);b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,this.te,0);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,a);b.bindTexture(b.TEXTURE_2D,null);b.bindRenderbuffer(b.RENDERBUFFER,null);b.bindFramebuffer(b.FRAMEBUFFER,null);this.eb=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.eb);b.bufferData(b.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0]),b.STATIC_DRAW);this.eb.Dc=3;this.eb.Kd=4;this.Ue=
b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.Ue);b.bufferData(b.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),b.STATIC_DRAW);return!0}return!1};g.prototype.Jk=function(b){var a=this.g.H,d=this.g.jb;if(this.yd){a.useProgram(this.ma);a.bindBuffer(a.ARRAY_BUFFER,this.eb);a.vertexAttribPointer(this.ma.$,this.eb.Dc,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.Ue);a.vertexAttribPointer(this.ma.wa,2,a.FLOAT,!1,0,0);a.enableVertexAttribArray(this.ma.$);a.enableVertexAttribArray(this.ma.wa);a.activeTexture(a.TEXTURE0);
a.bindTexture(a.TEXTURE_2D,this.te);var d=1+(this.ob-1)*b,c=a.getUniformLocation(this.ma,"uAlpha");a.uniform1f(c,1);c=a.getUniformLocation(this.ma,"uZoomIn");a.uniform1i(c,1);var c=a.getUniformLocation(this.ma,"uZoomCenter"),e=.5+(this.xg-.5)*Math.sqrt(b),f=.5+(this.yg-.5)*Math.sqrt(b);0>e-.5/d&&(e=.5/d);0>f-.5/d&&(f=.5/d);1<e+.5/d&&(e=1-.5/d);1<f+.5/d&&(f=1-.5/d);a.uniform2f(c,e,f);e=a.getUniformLocation(this.ma,"uZoomFactor");a.uniform1f(e,d);a.uniform1i(a.getUniformLocation(this.ma,"uSampler"),
0);a.drawArrays(a.TRIANGLE_STRIP,0,this.eb.Kd);a.useProgram(this.g.la.F)}else{this.g.rg();a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.SRC_ALPHA,a.ONE);a.enable(a.BLEND);a.disable(a.DEPTH_TEST);e=.5+(this.xg-.5);f=.5+(this.yg-.5);0>e-.5/this.ob&&(e=.5/this.ob);0>f-.5/this.ob&&(f=.5/this.ob);1<e+.5/this.ob&&(e=1-.5/this.ob);1<f+.5/this.ob&&(f=1-.5/this.ob);if("crossdissolve"==this.type)a.useProgram(this.ma),a.bindBuffer(a.ARRAY_BUFFER,this.eb),a.vertexAttribPointer(this.ma.$,this.eb.Dc,
a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.Ue),a.vertexAttribPointer(this.ma.wa,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.te),c=a.getUniformLocation(this.ma,"uAlpha"),a.uniform1f(c,1-b),c=a.getUniformLocation(this.ma,"uZoomIn"),a.uniform1i(c,1==this.Na||2==this.Na?1:0),c=a.getUniformLocation(this.ma,"uZoomCenter"),a.uniform2f(c,e,f),e=a.getUniformLocation(this.ma,"uZoomFactor"),a.uniform1f(e,this.ob),a.uniform1i(a.getUniformLocation(this.ma,"uSampler"),0);
else if("diptocolor"==this.type)a.useProgram(this.Ra),a.bindBuffer(a.ARRAY_BUFFER,this.eb),a.vertexAttribPointer(this.Ra.$,this.eb.Dc,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.Ue),a.vertexAttribPointer(this.Ra.wa,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.te),a.uniform1f(a.getUniformLocation(this.Ra,"uColorPercent"),Math.min(2*b,1)),c=a.getUniformLocation(this.Ra,"uAlpha"),a.uniform1f(c,1-Math.max(2*(b-.5),0)),a.uniform3f(a.getUniformLocation(this.Ra,"uDipColor"),
(this.ye>>16&255)/255,(this.ye>>8&255)/255,(this.ye&255)/255),c=a.getUniformLocation(this.Ra,"uZoomIn"),a.uniform1i(c,1==this.Na||2==this.Na?1:0),c=a.getUniformLocation(this.Ra,"uZoomCenter"),a.uniform2f(c,e,f),e=a.getUniformLocation(this.Ra,"uZoomFactor"),a.uniform1f(e,this.ob),a.uniform1i(a.getUniformLocation(this.Ra,"uSampler"),0);else if("irisround"==this.type||"irisrectangular"==this.type){a.useProgram(this.Ga);a.bindBuffer(a.ARRAY_BUFFER,this.eb);a.vertexAttribPointer(this.Ga.$,this.eb.Dc,a.FLOAT,
!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.Ue);a.vertexAttribPointer(this.Ga.wa,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,this.te);var l;1==this.Na||2==this.Na?l=c=.5:(c=this.xg,l=this.yg);var h=c*d.width,g=l*d.height,h=Math.max(h,d.width-h),g=Math.max(g,d.height-g);"irisround"==this.type?a.uniform1f(a.getUniformLocation(this.Ga,"uRadius"),(Math.sqrt(h*h+g*g)+this.tc)*b):(h>g?(g=d.height/d.width*h+this.tc,h+=this.tc):(h=d.width/d.height*g+this.tc,g+=this.tc),a.uniform2f(a.getUniformLocation(this.Ga,
"uRectDim"),h*b,g*b));b=a.getUniformLocation(this.Ga,"uSoftEdge");a.uniform1f(b,this.tc);a.uniform1i(a.getUniformLocation(this.Ga,"uRound"),"irisround"==this.type?1:0);a.uniform2f(a.getUniformLocation(this.Ga,"uIrisCenter"),c*d.width,l*d.height);c=a.getUniformLocation(this.Ga,"uZoomIn");a.uniform1i(c,1==this.Na||2==this.Na?1:0);c=a.getUniformLocation(this.Ga,"uZoomCenter");a.uniform2f(c,e,f);e=a.getUniformLocation(this.Ga,"uZoomFactor");a.uniform1f(e,this.ob);a.uniform1i(a.getUniformLocation(this.Ga,
"uSampler"),0)}else if("wipeleftright"==this.type||"wiperightleft"==this.type||"wipetopbottom"==this.type||"wipebottomtop"==this.type||"wiperandom"==this.type)a.useProgram(this.Ma),a.bindBuffer(a.ARRAY_BUFFER,this.eb),a.vertexAttribPointer(this.Ma.$,this.eb.Dc,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.Ue),a.vertexAttribPointer(this.Ma.wa,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.te),a.uniform1f(a.getUniformLocation(this.Ma,"uPercent"),3>this.fi?b*(d.width+
this.tc):b*(d.height+this.tc)),b=a.getUniformLocation(this.Ma,"uSoftEdge"),a.uniform1f(b,this.tc),a.uniform1i(a.getUniformLocation(this.Ma,"uDirection"),this.fi),a.uniform2f(a.getUniformLocation(this.Ma,"uCanvasDimensions"),d.width,d.height),c=a.getUniformLocation(this.Ma,"uZoomIn"),a.uniform1i(c,1==this.Na||2==this.Na?1:0),c=a.getUniformLocation(this.Ma,"uZoomCenter"),a.uniform2f(c,e,f),e=a.getUniformLocation(this.Ma,"uZoomFactor"),a.uniform1f(e,this.ob),a.uniform1i(a.getUniformLocation(this.Ma,
"uSampler"),0);a.drawArrays(a.TRIANGLE_STRIP,0,this.eb.Kd);a.useProgram(this.g.la.F);a.disable(a.BLEND);a.enable(a.DEPTH_TEST)}};return g}();m.Jl=k})(ggP2VR||(ggP2VR={}));
(function(m){var k=function(){function g(b){this.pg=[];this.g=b;this.enabled=!1;this.nb=2;this.Dj=!1}g.prototype.ki=function(b){if(2==b.mode||3==b.mode||5==b.mode){var a=this.g.Ha.currentTime,d=b.pc.gain.value,c=b.nc.gain.value,e=b.oc.gain.value;b.mc.gain.linearRampToValueAtTime(b.mc.gain.value,a);b.mc.gain.linearRampToValueAtTime(0,a+this.nb);b.pc.gain.linearRampToValueAtTime(d,a);b.pc.gain.linearRampToValueAtTime(0,a+this.nb);b.nc.gain.linearRampToValueAtTime(c,a);b.nc.gain.linearRampToValueAtTime(0,
a+this.nb);b.oc.gain.linearRampToValueAtTime(e,a);b.oc.gain.linearRampToValueAtTime(0,a+this.nb)}else a=this.g.Ha.currentTime,b.Rc.gain.linearRampToValueAtTime(b.Rc.gain.value,a),b.Rc.gain.linearRampToValueAtTime(0,a+this.nb);b.Og=!0;setTimeout(function(){b.td()},1E3*this.nb+5)};g.prototype.xo=function(){for(var b=0;b<this.g.S.length;b++){var a=this.g.S[b];this.g.Cc(a.id)||4==a.mode||6==a.mode||(a.ia?a.Kc():(a.a.play(),a.a.currentTime=0))}};g.prototype.sm=function(){for(var b=(this.g.Ha.currentTime-
this.uo)/this.nb,b=Math.min(1,b),a=0;a<this.g.S.length;a++){var d=this.g.S[a];this.g.Cc(d.id)&&1>d.ka&&(d.ka=b)}1==b&&clearInterval(this.to)};return g}();m.Kl=k})(ggP2VR||(ggP2VR={}));
(function(m){var k=function(){function g(b){this.Qf=[];this.Lc=null;this.Kb=[];this.Hb=[];this.Lb=[];this.aj=!0;this.g=b;this.jm()}g.prototype.Hf=function(){var b=this.g.H,a=b.createShader(b.VERTEX_SHADER);b.shaderSource(a,"attribute vec3 aVertexPosition;\nvoid main(void) {\n gl_Position = vec4(aVertexPosition, 1.0);\n}\n");b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(a)),a=null);var d=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCanvasDimensions;\nuniform vec2 uFlareCenterPosition;\nuniform float uBlindingValue;\nuniform float uAspectRatio;\nvoid main(void) {\n float canvasDiag = sqrt( (uCanvasDimensions.x * uCanvasDimensions.x) + (uCanvasDimensions.y * uCanvasDimensions.y) );\n vec2 diff = uFlareCenterPosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromFlarePoint = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = (distFromFlarePoint / canvasDiag) / 10.0;\n gl_FragColor = vec4(1.0, 1.0, 1.0, pow(((1.0 - factor) * 0.8) * uBlindingValue, 2.0));\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Qb=b.createProgram();b.attachShader(this.Qb,a);b.attachShader(this.Qb,d);b.linkProgram(this.Qb);b.getProgramParameter(this.Qb,b.LINK_STATUS)||alert("Could not initialise shaders");this.Qb.$=b.getAttribLocation(this.Qb,"aVertexPosition");b.enableVertexAttribArray(this.Qb.$);d=b.createShader(b.VERTEX_SHADER);a=b.createShader(b.VERTEX_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);b.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(a)),d=null);var c=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(c,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCircleTexturePosition;\nuniform vec3 uCircleColor;\nuniform float uCircleRadius;\nuniform float uCircleAlpha;\nuniform float uCircleSoftness;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 diff = uCircleTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromCircleCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float softnessDistance = uCircleRadius * (1.0 - uCircleSoftness);\n if (distFromCircleCenter > uCircleRadius)\n {\n\t  gl_FragColor = vec4(uCircleColor, 0.0);\n }\n else if (distFromCircleCenter <= (softnessDistance))\n {\n\t  float factor = distFromCircleCenter / softnessDistance;\n\t  gl_FragColor = vec4(uCircleColor, pow((1.0 - (0.2 * factor)) * uCircleAlpha, 1.8));\n }\n else\n {\n\t  float factor = (distFromCircleCenter - softnessDistance) / (uCircleRadius - softnessDistance);\n\t  gl_FragColor = vec4(uCircleColor, pow((0.8 - (0.8 * factor)) * uCircleAlpha, 1.8));\n }\n}\n");
b.compileShader(c);b.getShaderParameter(c,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(c)),c=null);this.oa=b.createProgram();b.attachShader(this.oa,d);b.attachShader(this.oa,c);b.linkProgram(this.oa);b.getProgramParameter(this.oa,b.LINK_STATUS)||alert("Could not initialise shaders");this.oa.$=b.getAttribLocation(this.oa,"aVertexPosition");b.enableVertexAttribArray(this.oa.$);d=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uRingTexturePosition;\nuniform float uRingRadius;\nuniform float uRingAlpha;\nuniform float uAspectRatio;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec2 diff = uRingTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromRingCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = distFromRingCenter / uRingRadius;\n if (distFromRingCenter > uRingRadius)\n {\n\t gl_FragColor = vec4(1.0, 1.0, 1.0, 0.0);\n }\n else\n {\n vec4 textureColor = texture2D(uSampler, vec2(factor / uAspectRatio, 0.5));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uRingAlpha);\n }\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.lb=b.createProgram();b.attachShader(this.lb,a);b.attachShader(this.lb,d);b.linkProgram(this.lb);b.getProgramParameter(this.lb,b.LINK_STATUS)||alert("Could not initialise shaders");this.lb.$=b.getAttribLocation(this.lb,"aVertexPosition")};g.prototype.Bc=function(){var b=this.g.H;this.jd=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.jd);b.bufferData(b.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,
-1,0,1,1,0,-1,1,0]),b.STATIC_DRAW);this.jd.Dc=3;this.jd.Kd=4;this.He=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.He);for(var a=[0,0,0],d=2*Math.PI/6,c=Math.PI/180*35,e=1,f=c;f<=c+2*Math.PI;f+=d)a.push(Math.sin(f)),a.push(-Math.cos(f)),a.push(0),e++;b.bufferData(b.ARRAY_BUFFER,new Float32Array(a),b.STATIC_DRAW);this.He.Dc=3;this.He.Kd=e;this.Vk=b.createTexture();b.bindTexture(b.TEXTURE_2D,this.Vk);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,
b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);a=document.createElement("canvas");a.width=100;a.height=1;d=a.getContext("2d");d.width=100;d.height=1;c=d.createLinearGradient(0,0,100,0);c.addColorStop(0,this.g.fa(16777215,0));c.addColorStop(.88,this.g.fa(0,0));c.addColorStop(.9,this.g.fa(16654848,1));c.addColorStop(.92,this.g.fa(16776448,1));c.addColorStop(.94,this.g.fa(4849466,1));c.addColorStop(.96,this.g.fa(131071,
1));c.addColorStop(.98,this.g.fa(8190,1));c.addColorStop(1,this.g.fa(0,0));d.fillStyle=c;d.fillRect(0,0,100,1);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a)};g.prototype.Mn=function(){for(;0<this.Qf.length;)this.Qf.pop()};g.prototype.jm=function(){var b=[],a=[],d=[],c={l:14,alpha:.2,color:11390415,i:.27};b.push(c);c={l:20,alpha:.25,color:11390415,i:.4};b.push(c);c={l:10,alpha:.2,color:12442332,i:.6};b.push(c);c={l:15,alpha:.2,color:11390415,i:.8};b.push(c);c={l:10,alpha:.2,color:12442332,
i:1.5};b.push(c);c={l:15,alpha:.2,color:11390415,i:1.8};b.push(c);c={l:8,alpha:.2,color:12575203,u:.8,i:.7};a.push(c);c={l:7,alpha:.4,color:12575203,u:.5,i:1.6};a.push(c);c={l:5,alpha:.4,color:12575203,u:.6,i:.9};a.push(c);c={l:8,alpha:.3,color:12575203,u:.4,i:1.1};a.push(c);this.Kb.push(b);this.Hb.push(a);this.Lb.push(d);b=[];a=[];d=[];c={l:30,alpha:.3,color:11390415,i:.5};b.push(c);c={l:10,alpha:.3,color:11390415,i:1};b.push(c);c={l:20,alpha:.3,color:11390415,i:1.3};b.push(c);c={l:10,alpha:.3,color:11390415,
i:1.5};b.push(c);c={l:15,alpha:.3,color:11390415,i:1.8};b.push(c);c={l:10,alpha:.3,color:15506856,u:.8,i:.7};a.push(c);c={l:20,alpha:.5,color:15506856,u:.5,i:1.6};a.push(c);c={l:5,alpha:.5,color:15506856,u:.6,i:.9};a.push(c);c={l:60,alpha:.4,color:15506856,u:.2,i:1.1};a.push(c);d.push({l:220,alpha:.035,i:2});this.Kb.push(b);this.Hb.push(a);this.Lb.push(d);b=[];a=[];d=[];c={l:30,alpha:.5,color:15465727,i:.5};b.push(c);c={l:40,alpha:.28,color:15726842,i:.8};b.push(c);c={l:25,alpha:.32,color:15726842,
i:1.1};b.push(c);c={l:15,alpha:.25,color:15726842,i:1.35};b.push(c);c={l:10,alpha:.28,color:15465727,i:1.65};b.push(c);c={l:10,alpha:.45,color:15465727,u:.8,i:.7};a.push(c);c={l:7,alpha:.5,color:15465727,u:.4,i:.9};a.push(c);c={l:40,alpha:.4,color:15465727,u:.3,i:.38};a.push(c);c={l:50,alpha:.4,color:15465727,u:.5,i:1.25};a.push(c);c={l:18,alpha:.2,color:15465727,u:.5,i:1.25};a.push(c);c={l:10,alpha:.34,color:15726842,u:.8,i:1.5};a.push(c);c={l:38,alpha:.37,color:15465727,u:.3,i:-.5};a.push(c);this.Kb.push(b);
this.Hb.push(a);this.Lb.push(d);b=[];a=[];d=[];c={l:16,alpha:.5,color:16363159,i:.1};b.push(c);c={l:26,alpha:.3,color:16091819,i:.32};b.push(c);c={l:29,alpha:.2,color:16091819,i:1.32};b.push(c);c={l:20,alpha:.18,color:16363159,i:1.53};b.push(c);c={l:27,alpha:.13,color:16425092,i:1.6};b.push(c);c={l:20,alpha:.1,color:16091819,i:1.75};b.push(c);c={l:12,alpha:.45,color:16312238,u:.45,i:.2};a.push(c);c={l:8,alpha:.25,color:16434209,u:.7,i:.33};a.push(c);c={l:9,alpha:.25,color:16091819,u:.4,i:.7};a.push(c);
c={l:7,alpha:.2,color:16091819,u:.4,i:.85};a.push(c);c={l:60,alpha:.23,color:16091819,u:.55,i:1.05};a.push(c);c={l:37,alpha:.1,color:16091819,u:.55,i:1.22};a.push(c);c={l:10,alpha:.25,color:16363159,u:.65,i:1.38};a.push(c);c={l:7,alpha:.2,color:16434209,u:.5,i:1.45};a.push(c);c={l:3,alpha:.2,color:16416033,u:.5,i:1.78};a.push(c);c={l:6,alpha:.18,color:16434209,u:.45,i:1.9};a.push(c);c={l:4,alpha:.14,color:16766514,u:.45,i:2.04};a.push(c);c={l:30,alpha:.14,color:16766514,u:.8,i:.04};a.push(c);this.Kb.push(b);
this.Hb.push(a);this.Lb.push(d);b=[];a=[];d=[];c={l:9,alpha:.3,color:14346999,u:.3,i:.3};a.push(c);c={l:5,alpha:.5,color:14148072,u:.8,i:.6};a.push(c);c={l:3,alpha:.37,color:14346999,u:.66,i:.8};a.push(c);c={l:45,alpha:.2,color:14346999,u:.36,i:1.2};a.push(c);c={l:13,alpha:.2,color:14346999,u:.36,i:1.23};a.push(c);c={l:11,alpha:.2,color:14148072,u:.36,i:1.28};a.push(c);c={l:27,alpha:.16,color:14346999,u:.36,i:1.55};a.push(c);c={l:6,alpha:.36,color:14148072,u:.8,i:1.7};a.push(c);this.Kb.push(b);this.Hb.push(a);
this.Lb.push(d);b=[];a=[];d=[];c={l:24,alpha:.2,color:15186464,i:.2};b.push(c);c={l:7,alpha:.26,color:15186464,i:.35};b.push(c);c={l:23,alpha:.18,color:15186464,i:.65};b.push(c);c={l:13,alpha:.2,color:15186464,i:.8};b.push(c);c={l:11,alpha:.15,color:15186464,i:1.4};b.push(c);c={l:15,alpha:.11,color:15451904,i:1.6};b.push(c);c={l:6,alpha:.45,color:15579138,u:.45,i:.22};a.push(c);c={l:3,alpha:.3,color:15451904,u:.25,i:.4};a.push(c);c={l:4,alpha:.2,color:15451904,u:.25,i:.45};a.push(c);c={l:65,alpha:.17,
color:15186464,u:.25,i:.5};a.push(c);c={l:5,alpha:.45,color:15579138,u:.45,i:.88};a.push(c);c={l:140,alpha:.18,color:15579138,u:.32,i:.95};a.push(c);c={l:12,alpha:.22,color:15579138,u:.32,i:1.1};a.push(c);c={l:8,alpha:.32,color:15451904,u:.72,i:1.2};a.push(c);c={l:55,alpha:.2,color:15451904,u:.45,i:1.33};a.push(c);c={l:4,alpha:.3,color:15451904,u:.25,i:1.42};a.push(c);this.Kb.push(b);this.Hb.push(a);this.Lb.push(d);b=[];a=[];d=[];c={l:16,alpha:.4,color:10933495,i:.32};b.push(c);c={l:14,alpha:.3,color:11007484,
i:.36};b.push(c);c={l:10,alpha:.3,color:4037331,i:.58};b.push(c);c={l:14,alpha:.22,color:8835068,i:.68};b.push(c);c={l:10,alpha:.27,color:11007484,i:.82};b.push(c);c={l:11,alpha:.27,color:10867450,i:1};b.push(c);c={l:9,alpha:.2,color:6158332,i:1.05};b.push(c);c={l:10,alpha:.17,color:10867450,i:1.78};b.push(c);c={l:10,alpha:.3,color:4037331,i:-.23};b.push(c);c={l:8,alpha:.45,color:8835068,u:.45,i:.175};a.push(c);c={l:7,alpha:.4,color:12574715,u:.55,i:.46};a.push(c);c={l:3,alpha:.3,color:10867450,u:.35,
i:.5};a.push(c);c={l:60,alpha:.37,color:4031699,u:.75,i:.75};a.push(c);c={l:3,alpha:.25,color:4031699,u:.25,i:.75};a.push(c);c={l:3,alpha:.2,color:6158332,u:.25,i:.9};a.push(c);c={l:7,alpha:.45,color:8835068,u:.45,i:1.3};a.push(c);c={l:32,alpha:.22,color:8835068,u:.75,i:1.62};a.push(c);c={l:9,alpha:.45,color:4031699,u:.65,i:1.6};a.push(c);c={l:8,alpha:.25,color:4031699,u:.65,i:1.83};a.push(c);c={l:7,alpha:.4,color:12574715,u:.55,i:-.18};a.push(c);this.Kb.push(b);this.Hb.push(a);this.Lb.push(d);b=
[];a=[];d=[];c={l:16,alpha:.4,color:16389120,i:.32};b.push(c);c={l:26,alpha:.22,color:16389120,i:.4};b.push(c);c={l:26,alpha:.25,color:16389120,i:.65};b.push(c);c={l:18,alpha:.3,color:16389120,i:1.23};b.push(c);c={l:14,alpha:.26,color:16389120,i:1.33};b.push(c);c={l:17,alpha:.18,color:16389120,i:1.7};b.push(c);c={l:30,alpha:.16,color:16389120,i:2.15};b.push(c);c={l:100,alpha:.25,color:16389120,u:.22,i:1.45};a.push(c);c={l:7,alpha:.5,color:15628151,u:.3,i:1.5};a.push(c);c={l:3,alpha:.5,color:15628151,
u:.3,i:1.52};a.push(c);c={l:4,alpha:.5,color:16389120,u:.3,i:1.745};a.push(c);c={l:9,alpha:.22,color:16389120,u:.3,i:1.8};a.push(c);this.Kb.push(b);this.Hb.push(a);this.Lb.push(d);b=[];a=[];d=[];c={l:16,alpha:.4,color:10933495,i:.32};b.push(c);c={l:14,alpha:.3,color:11007484,i:.36};b.push(c);c={l:10,alpha:.3,color:4037331,i:.58};b.push(c);c={l:14,alpha:.22,color:8835068,i:.68};b.push(c);c={l:10,alpha:.27,color:11007484,i:.82};b.push(c);c={l:11,alpha:.27,color:10867450,i:1};b.push(c);c={l:9,alpha:.2,
color:6158332,i:1.05};b.push(c);c={l:10,alpha:.17,color:10867450,i:1.78};b.push(c);c={l:10,alpha:.3,color:4037331,i:-.23};b.push(c);c={l:8,alpha:.45,color:8835068,u:.45,i:.175};a.push(c);c={l:7,alpha:.4,color:12574715,u:.55,i:.46};a.push(c);c={l:3,alpha:.3,color:10867450,u:.35,i:.5};a.push(c);c={l:60,alpha:.37,color:4031699,u:.75,i:.75};a.push(c);c={l:3,alpha:.25,color:4031699,u:.25,i:.75};a.push(c);c={l:3,alpha:.2,color:6158332,u:.25,i:.9};a.push(c);c={l:7,alpha:.45,color:8835068,u:.45,i:1.3};a.push(c);
c={l:32,alpha:.22,color:8835068,u:.75,i:1.62};a.push(c);c={l:9,alpha:.45,color:4031699,u:.65,i:1.6};a.push(c);c={l:8,alpha:.25,color:4031699,u:.65,i:1.83};a.push(c);c={l:7,alpha:.4,color:12574715,u:.55,i:-.18};a.push(c);this.Kb.push(b);this.Hb.push(a);this.Lb.push(d);b=[];a=[];d=[];c={l:16,alpha:.4,color:16389120,i:.32};b.push(c);c={l:26,alpha:.22,color:16389120,i:.4};b.push(c);c={l:26,alpha:.25,color:16389120,i:.65};b.push(c);c={l:18,alpha:.3,color:16389120,i:1.23};b.push(c);c={l:14,alpha:.26,color:16389120,
i:1.33};b.push(c);c={l:17,alpha:.18,color:16389120,i:1.7};b.push(c);c={l:30,alpha:.16,color:16389120,i:2.15};b.push(c);c={l:100,alpha:.25,color:16389120,u:.22,i:1.45};a.push(c);c={l:7,alpha:.5,color:15628151,u:.3,i:1.5};a.push(c);c={l:3,alpha:.5,color:15628151,u:.3,i:1.52};a.push(c);c={l:4,alpha:.5,color:16389120,u:.3,i:1.745};a.push(c);c={l:9,alpha:.22,color:16389120,u:.3,i:1.8};a.push(c);this.Kb.push(b);this.Hb.push(a);this.Lb.push(d);b=[];a=[];d=[];c={l:24,alpha:.2,color:15186464,i:.2};b.push(c);
c={l:7,alpha:.26,color:15186464,i:.35};b.push(c);c={l:23,alpha:.18,color:15186464,i:.65};b.push(c);c={l:13,alpha:.2,color:15186464,i:.8};b.push(c);c={l:11,alpha:.15,color:15186464,i:1.4};b.push(c);c={l:15,alpha:.11,color:15451904,i:1.6};b.push(c);c={l:6,alpha:.45,color:15579138,u:.45,i:.22};a.push(c);c={l:3,alpha:.3,color:15451904,u:.25,i:.4};a.push(c);c={l:4,alpha:.2,color:15451904,u:.25,i:.45};a.push(c);c={l:65,alpha:.17,color:15186464,u:.25,i:.5};a.push(c);c={l:5,alpha:.45,color:15579138,u:.45,
i:.88};a.push(c);c={l:140,alpha:.18,color:15579138,u:.32,i:.95};a.push(c);c={l:12,alpha:.22,color:15579138,u:.32,i:1.1};a.push(c);c={l:8,alpha:.32,color:15451904,u:.72,i:1.2};a.push(c);c={l:55,alpha:.2,color:15451904,u:.45,i:1.33};a.push(c);c={l:4,alpha:.3,color:15451904,u:.25,i:1.42};a.push(c);this.Kb.push(b);this.Hb.push(a);this.Lb.push(d)};g.prototype.xn=function(){if(this.aj){var b=this.g.H,a,d,c,e=new m.ra(0,0,-100),f=this.g.gd(),l,h;if(this.g.Z)l=this.g.jb.width,h=this.g.jb.height,this.g.B.og&&
(l=this.g.B.Mb.width,h=this.g.B.Mb.height);else{this.R||(this.R=this.Lc.getContext("2d"));if(this.R.width!==this.g.m.width||this.R.height!==this.g.m.height)this.R.width=this.g.m.width,this.R.height=this.g.m.height;this.R.clear?this.R.clear():this.R.clearRect(0,0,this.Lc.width,this.Lc.height);l=this.R.width;h=this.R.height}var g=Math.sqrt(l*l+h*h),k=g/800;for(d=0;d<this.Qf.length;d++){var n=this.Qf[d];e.Ya(0,0,-100);e.va(-n.j*Math.PI/180);e.Da(n.pan*Math.PI/180);e.Da(-this.g.pan.c*Math.PI/180);e.va(this.g.j.c*
Math.PI/180);e.mb(this.g.N.c*Math.PI/180);var r=!1;if(-.01>e.z){var p,u;u=-f/e.z;p=e.x*u;u*=e.y;Math.abs(p)<l/2+100&&Math.abs(u)<h/2+100&&(r=!0,p+=l/2,u+=h/2)}if(r){this.g.Z&&(b.blendFunc(b.SRC_ALPHA,b.DST_ALPHA),b.enable(b.BLEND),b.disable(b.DEPTH_TEST));var r=l/2,t=h/2;c=Math.sqrt((r-p)*(r-p)+(t-u)*(t-u));var v=g/2,t=l>h?l:h,r=n.xj/100*((v-c)/v);0>r&&(r=0);if(this.g.Z){b.useProgram(this.Qb);b.bindBuffer(b.ARRAY_BUFFER,this.g.B.eb);b.vertexAttribPointer(this.Qb.$,this.g.B.eb.Dc,b.FLOAT,!1,0,0);var q=
b.getUniformLocation(this.Qb,"uCanvasDimensions");b.uniform2f(q,b.drawingBufferWidth,b.drawingBufferHeight);b.uniform2f(b.getUniformLocation(this.Qb,"uFlareCenterPosition"),b.drawingBufferWidth/l*p,h-b.drawingBufferHeight/h*u);b.uniform1f(b.getUniformLocation(this.Qb,"uBlindingValue"),r);q=b.getUniformLocation(this.Qb,"uAspectRatio");b.uniform1f(q,this.g.B.og?b.drawingBufferWidth/b.drawingBufferHeight:b.drawingBufferWidth/b.drawingBufferHeight/(l/h));b.drawArrays(b.TRIANGLE_STRIP,0,this.g.B.eb.Kd)}else q=
this.R.createRadialGradient(p,u,1,p,u,t),q.addColorStop(0,"rgba(255, 255, 255, "+r+")"),q.addColorStop(.5,"rgba(255, 255, 255, "+.8*r+")"),q.addColorStop(1,"rgba(255, 255, 255, "+.6*r+")"),this.R.fillStyle=q,this.R.fillRect(0,0,this.R.width,this.R.height);if(0!=Number(n.type)&&!this.g.B.og){var r=l/2-p,t=h/2-u,w=1,B=Number(n.type)-1;c<.35*v&&(w=c/(.35*v),w*=w);c>.7*v&&(w=(v-c)/(.3*v));w*=n.alpha/100;if(0<this.Kb[B].length)for(c=0;c<this.Kb[B].length;c++){var z=this.Kb[B][c],v=z.l*k;a=z.alpha*w;0>
a&&(a=0);var y=z.color;if(8==B||9==B||10==B)y=n.color;if(this.g.Z)b.useProgram(this.oa),b.bindBuffer(b.ARRAY_BUFFER,this.He),b.vertexAttribPointer(this.oa.$,this.He.Dc,b.FLOAT,!1,0,0),q=b.getUniformLocation(this.oa,"uCanvasDimensions2"),b.uniform2f(q,b.drawingBufferWidth,b.drawingBufferHeight),b.uniform2f(b.getUniformLocation(this.oa,"uCirclePosition"),b.drawingBufferWidth/l*(p+r*z.i),b.drawingBufferWidth/l*(h-(u+t*z.i))),b.uniform2f(b.getUniformLocation(this.oa,"uCircleTexturePosition"),b.drawingBufferWidth/
l*(p+r*z.i),h-(u+t*z.i)),b.uniform1f(b.getUniformLocation(this.oa,"uCircleRadius"),v),b.uniform3f(b.getUniformLocation(this.oa,"uCircleColor"),(y>>16&255)/255,(y>>8&255)/255,(y&255)/255),b.uniform1f(b.getUniformLocation(this.oa,"uCircleAlpha"),a),b.uniform1f(b.getUniformLocation(this.oa,"uCircleSoftness"),.1),q=b.getUniformLocation(this.oa,"uAspectRatio"),b.uniform1f(q,b.drawingBufferWidth/b.drawingBufferHeight/(l/h)),b.drawArrays(b.TRIANGLE_FAN,0,this.He.Kd);else{this.R.save();this.R.translate(p+
r*z.i,u+t*z.i);q=this.R.createRadialGradient(0,0,1,0,0,1.1*v);q.addColorStop(0,this.g.fa(y,a));q.addColorStop(.65,this.g.fa(y,.9*a));q.addColorStop(.8,this.g.fa(y,.7*a));q.addColorStop(1,this.g.fa(y,.2*a));this.R.beginPath();var y=2*Math.PI/6,z=Math.PI/180*35,C=!0;for(a=z;a<=z+2*Math.PI;a+=y)C?(this.R.moveTo(v*Math.sin(a),v*Math.cos(a)),C=!1):this.R.lineTo(v*Math.sin(a),v*Math.cos(a));this.R.closePath();this.R.fillStyle=q;this.R.fill();this.R.restore()}}if(0<this.Hb[B].length)for(c=0;c<this.Hb[B].length;c++){z=
this.Hb[B][c];v=z.l*k;a=z.alpha*w;0>a&&(a=0);y=z.color;if(8==B||9==B||10==B)y=n.color;this.g.Z?(b.useProgram(this.oa),b.bindBuffer(b.ARRAY_BUFFER,this.jd),b.vertexAttribPointer(this.oa.$,this.jd.Dc,b.FLOAT,!1,0,0),q=b.getUniformLocation(this.oa,"uCanvasDimensions2"),b.uniform2f(q,b.drawingBufferWidth,b.drawingBufferHeight),q=b.getUniformLocation(this.oa,"uCirclePosition"),b.uniform2f(q,b.drawingBufferWidth/l*(p+r*z.i),b.drawingBufferWidth/l*(h-(u+t*z.i))),q=b.getUniformLocation(this.oa,"uCircleTexturePosition"),
b.uniform2f(q,b.drawingBufferWidth/l*(p+r*z.i),h-(u+t*z.i)),q=b.getUniformLocation(this.oa,"uCircleRadius"),b.uniform1f(q,v),b.uniform3f(b.getUniformLocation(this.oa,"uCircleColor"),(y>>16&255)/255,(y>>8&255)/255,(y&255)/255),b.uniform1f(b.getUniformLocation(this.oa,"uCircleAlpha"),a),b.uniform1f(b.getUniformLocation(this.oa,"uCircleSoftness"),z.u),q=b.getUniformLocation(this.oa,"uAspectRatio"),b.uniform1f(q,b.drawingBufferWidth/b.drawingBufferHeight/(l/h)),b.drawArrays(b.TRIANGLE_FAN,0,this.jd.Kd)):
(this.R.save(),this.R.translate(p+r*z.i,u+t*z.i),q=this.R.createRadialGradient(0,0,1,0,0,v),q.addColorStop(0,this.g.fa(y,a)),q.addColorStop(1-z.u,this.g.fa(y,.8*a)),q.addColorStop(1,this.g.fa(y,0)),this.R.beginPath(),this.R.arc(0,0,v,0,2*Math.PI,!1),this.R.closePath(),this.R.fillStyle=q,this.R.fill(),this.R.restore())}if(0<this.Lb[B].length)for(c=0;c<this.Lb[B].length;c++)n=this.Lb[B][c],v=n.l*k,a=n.alpha*w,0>a&&(a=0),this.g.Z?(b.useProgram(this.lb),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,
this.Vk),b.bindBuffer(b.ARRAY_BUFFER,this.jd),b.vertexAttribPointer(this.lb.$,this.jd.Dc,b.FLOAT,!1,0,0),q=b.getUniformLocation(this.lb,"uCanvasDimensions2"),b.uniform2f(q,l,h),q=b.getUniformLocation(this.lb,"uCirclePosition"),b.uniform2f(q,p+r*n.i,h-(u+t*n.i)),q=b.getUniformLocation(this.lb,"uRingTexturePosition"),b.uniform2f(q,b.drawingBufferWidth/l*(p+r*n.i),h-(u+t*n.i)),q=b.getUniformLocation(this.lb,"uCircleRadius"),b.uniform1f(q,v),b.uniform2f(b.getUniformLocation(this.lb,"uRingPosition"),p+
r*n.i,h-(u+t*n.i)),b.uniform1f(b.getUniformLocation(this.lb,"uRingRadius"),v),b.uniform1f(b.getUniformLocation(this.lb,"uRingAlpha"),a),q=b.getUniformLocation(this.lb,"uAspectRatio"),b.uniform1f(q,b.drawingBufferWidth/b.drawingBufferHeight/(l/h)),b.uniform1i(b.getUniformLocation(this.lb,"uSampler"),0),b.drawArrays(b.TRIANGLE_FAN,0,this.jd.Kd)):(this.R.save(),this.R.translate(p+r*n.i,u+t*n.i),q=this.R.createRadialGradient(0,0,0,0,0,v),q.addColorStop(0,this.g.fa(16777215,0)),q.addColorStop(.88,this.g.fa(0,
0)),q.addColorStop(.9,this.g.fa(16654848,a)),q.addColorStop(.92,this.g.fa(16776448,a)),q.addColorStop(.94,this.g.fa(4849466,a)),q.addColorStop(.96,this.g.fa(131071,a)),q.addColorStop(.98,this.g.fa(8190,a)),q.addColorStop(1,this.g.fa(0,0)),this.R.beginPath(),this.R.arc(0,0,v,0,2*Math.PI,!1),this.R.closePath(),this.R.fillStyle=q,this.R.fill(),this.R.restore())}this.g.Z&&(b.useProgram(this.g.la.F),b.disable(b.BLEND),b.enable(b.DEPTH_TEST))}}}};return g}();m.Hl=k})(ggP2VR||(ggP2VR={}));var O=!1;
(function(m){var k=function(){return function(){this.f=this.j=this.pan=0}}(),g=function(){function b(a,d){this.pan={c:0,Pa:0,min:0,max:360,d:0,Mi:0,fd:0};this.j={c:0,Pa:0,min:-90,max:90,d:0,fd:0};this.N={c:0,Pa:0,min:-180,max:180,d:0};this.lc={pan:0,j:-90,N:0,f:170,Bb:9};this.f={c:70,Pa:70,min:1,Uf:0,max:170,Hi:360,Ii:270,Qe:0,d:0,mode:0,il:0,Fj:0};this.Ca={N:0,pitch:0};this.m={width:10,height:10};this.kb=0;this.di=new m.ra;this.crossOrigin="anonymous";this.Za=this.mh=4;this.Uc=this.wg=this.Wf=this.fc=
0;this.Y={start:{x:0,y:0},ca:{x:0,y:0},qd:{x:0,y:0},c:{x:0,y:0},ba:{x:0,y:0}};this.X={ib:!1,Kj:0,startTime:0,start:{x:0,y:0},ca:{x:0,y:0},qd:{x:0,y:0},c:{x:0,y:0},ba:{x:0,y:0}};this.ni=!0;this.ua={enabled:!0,ca:{x:0,y:0},ba:{x:0,y:0},Xi:0,f:{active:!1,Vb:0}};this.o={src:[],xe:4,width:640,height:480,Wc:!1,$g:!1,jl:!1,$d:"loop",a:HTMLVideoElement=null,ll:!1,hc:WebGLTexture=null,pj:WebGLBuffer=null,Ah:WebGLBuffer=null,Ai:WebGLBuffer=null,format:1,Tg:0,ri:1};this.fe=0;this.ha=this.sa=this.Aa=this.U=this.Tb=
this.$a=this.C=null;this.ce="pano";this.pi="flashcontainer";this.ei="";this.control=null;this.Gb=[];this.xa=!1;this.Lg=1;this.O=null;this.zd=this.lf=this.Ff=!1;this.jf=0;this.ed=.02;this.Rh=0;this.Sh=!1;this.Qh=this.zg=this.kf=this.we=this.vj=0;this.zb="";this.Ve=this.sc=!1;this.nh=0;this.Hg=[];this.Ee=[];this.af=this.ic=1;this.nf=1024;this.We=!1;this.he=200;this.Fa=0;this.ng=5;this.uc=0;this.ml=50;this.zi=this.nl=0;this.s={enabled:!1,timeout:5,active:!1,mg:!1,speed:.4,Ch:0,kh:0,Li:!0,nj:!1,dd:!1,
wj:!1,Ji:!1,fj:!1,startTime:0,pd:0,Pg:!1,Ig:!1,fh:0};this.v={active:!1,ve:!1,speed:.1,pan:0,j:0,N:0,f:70,xd:70,vk:0,xk:0,wk:0,uk:0,Bb:0,Zf:0,Bi:0,mj:!1,Ki:!1,uj:0,tj:0};this.Qa=null;this.ef={};this.oj={};this.Jg=[];this.w={mode:1,Nf:-1,na:0,gb:0,Jc:.05,Sb:255,Rb:1,Pb:255,Ob:.3,Ke:!0,hj:{enabled:!0,width:180,height:20,ij:0,gj:1,background:!0,Pb:16777215,Ob:1,Sb:0,Rb:1,Uh:3,Vh:1,Nh:!0},fb:[],Eb:[],Ec:[],xh:[]};this.ta=null;this.P=[];this.S=[];this.J=[];this.Xa=[];this.re=[];this.La=[];this.Ia=[];this.W=
1;this.la=this.Bd=this.Cd=null;this.tf={};this.addListener=function(a,d){(this.tf[a]=this.tf[a]||[]).push(d)};this.pl=function(a,d){var b=this.tf[a],l,h;if(b)for(h=0,l=b.length;h<l;h++)b[h].apply(null,d)};this.removeEventListener=function(a,d){var b=this.tf[a];if(b){var l,h;h=0;for(l=b.length;h<l;h++)if(b[h]===d){1===l?delete this.tf[a]:b.splice(h,1);break}}};this.h=new m.Ll;this.wn={target:0,current:0,Jc:.01,pm:2,ii:0,Kg:!1,Xl:!1};this.margin={left:0,top:0,right:0,bottom:0};this.A={Oe:!1,Fi:!1,sb:!1,
Xc:!1,nd:!0,kk:!1,gl:1,Xk:!1,gi:!0,sf:!0,Fg:!1,Gf:!1,Zk:!0,sensitivity:8};this.Tf=[];this.Oc=!0;this.qa={x:0,y:0};this.tg=this.wb=this.sg=this.Fc=this.Z=!1;this.Jh=this.yl=!0;this.yi=!1;this.be=!0;this.xi=!1;this.Ja=this.Ad="";this.Qc="transition";this.Va="transform";this.hd="perspective";this.Ij="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYBgeACDAAADIAAE3iTbkAAAAAElFTkSuQmCC";this.jb={width:0,height:0};this.Oj=
new m.ra;this.Nj=new m.ra;this.Pj=new m.ra;this.Qj=new m.ra;this.Mj=new m.ra;this.Lf=!1;this.tk=this.Ub="";this.qj=[];this.Fh=[];this.Jf=this.nk=this.Xg=this.pk=this.Id=this.lk=this.Yi=this.Jd=this.If=this.mk=!1;this.Kh=!0;this.sh=this.Yg=!1;this.gk=[];this.devicePixelRatio=1;this.ga=this.B=null;this.Dg=!1;this.Ea=null;this.qb={enabled:!1,speed:1,ud:!1,mi:!0};this.Gk=!1;this.hb=new m.Ml;this.lj=!1;this.rf=function(a,d){if(0==a.length)return a;var b,l,h,g,k,n,r,p;p=[];b=d.oh(a[0])-0;for(g=0;g<a.length;g++){n=
g;r=g+1;r==a.length&&(r=0);l=d.oh(a[r])-0;if(0<=b&&0<=l)p.push(a[n]);else if(0<=b||0<=l)h=l/(l-b),0>h&&(h=0),1<h&&(h=1),k=new m.ra,k.md(a[n],a[r],h),0>b||p.push(a[n]),p.push(k);b=l}return p};this.bj=0;this.eh=-1;this.Af=function(a){return a?a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:a.clientX||a.clientY?{x:a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:a.clientY+document.body.scrollTop+document.documentElement.scrollTop}:a.touches&&a.touches[0]?{x:a.touches[0].pageX,y:a.touches[0].pageY}:
{x:0,y:0}:{x:0,y:0}};this.jh=1;this.tm=this.Qg=this.sk=this.ji=this.Ti=this.ph=0;this.ae=!0;this.pb=new m.ah(this);this.pb.Ke=!1;this.Hj();this.Ye(this.pb);this.checkLoaded=this.Gb;this.isLoaded=!1;d&&d.hasOwnProperty("useFlash")&&d.useFlash&&(this.wb=!0,this.Z=this.Fc=!1,d.hasOwnProperty("flashPlayerId")?this.ce=d.flashPlayerId:this.ce="pano",d.hasOwnProperty("flashContainerId")?this.pi=d.flashContainerId:this.pi=a+"flash");this.pa();this.wb||(this.Ba=new m.Hl(this));this.Cj(a);this.Wl();this.userdata=
this.ef=this.Ng();this.emptyHotspot=this.pb;this.mouse=this.qa;this.B=new m.Jl(this);this.Ea=new m.Kl(this);this.la=new m.Ql(this)}b.prototype.bi=function(){this.B.enabled=this.ga.enabled;this.B.type=this.ga.type;this.B.Na=this.ga.zoomin;this.B.Nb=this.ga.zoomout;this.B.Ag=this.ga.blendtime;this.B.hf=this.ga.zoomoutpause;this.B.gf=this.ga.zoomfov;this.B.Rd=this.ga.zoomspeed;this.B.ye=this.ga.blendcolor;this.B.tc=this.ga.softedge;this.ga=null};b.prototype.jo=function(a){this.ga={};this.ga.enabled=
!0;this.ga.type=this.B.type;this.ga.zoomin=this.B.Na;this.ga.zoomout=this.B.Nb;this.ga.blendtime=this.B.Ag;this.ga.zoomoutpause=this.B.hf;this.ga.zoomfov=this.B.gf;this.ga.zoomspeed=this.B.Rd;this.ga.blendcolor=this.B.ye;this.ga.softedge=this.B.tc;if(a.hasOwnProperty("type")){var d=a.type;if("cut"==d||"crossdissolve"==d||"diptocolor"==d||"irisround"==d||"irisrectangular"==d||"wipeleftright"==d||"wiperightleft"==d||"wipetopbottom"==d||"wipebottomtop"==d||"wiperandom"==d)this.ga.type=d}a.hasOwnProperty("before")&&
(d=Number(a.before),0==d||2==d)&&(this.ga.zoomin=d);a.hasOwnProperty("after")&&(d=Number(a.after),0==d||2==d||3==d||4==d)&&(this.ga.zoomout=d);a.hasOwnProperty("transitiontime")&&(d=Number(a.transitiontime),0<=d&&50>=d&&(this.ga.blendtime=d));a.hasOwnProperty("waitfortransition")&&(this.ga.zoomoutpause=1==a.waitfortransition);a.hasOwnProperty("zoomedfov")&&(d=Number(a.zoomedfov),.01<=d&&50>=d&&(this.ga.zoomfov=d));a.hasOwnProperty("zoomspeed")&&(d=Number(a.zoomspeed),.01<=d&&99>=d&&(this.ga.zoomspeed=
d));a.hasOwnProperty("dipcolor")&&(this.ga.blendcolor=a.dipcolor);a.hasOwnProperty("softedge")&&(a=Number(a.softedge),0<=a&&1E3>=a&&(this.ga.softedge=a));this.Dg||this.bi()};b.prototype.$c=function(a,d,c){var b=d?Number(d):0;if(0!=a&&4!=a&&12!=a&&9!=a)this.Yc("Unsupported projection type: "+a);else if(d&&0!==b&&4!==b&&12!==b&&9!==b)this.Yc("Unsupported projection2 type: "+b);else if(a==b&&(b=0),this.Wf=c?Number(c):1,this.Za!=a||this.fc!=b)this.Za=a,this.fc=b,this.la.Wg()};b.prototype.ya=function(){return 0==
this.Za?4:this.Za};b.prototype.Yh=function(a,d){if(0!=a&&4!=a&&12!=a&&9!=a)this.Yc("Unsupported projection type: "+a);else if(this.Z||0==a||4==a||this.Yc("Projection changes require WebGL!"),this.ya()!=a){var c={};c.pan=this.pan.c;c.tilt=this.j.c;c.fov=this.f.c;c.projection=a;c.timingFunction=3;c.speed=d;var b=this.zf(a);c.fov=Math.min(b,c.fov);this.ih(c)}};b.prototype.Hj=function(){var a;this.devicePixelRatio=window.devicePixelRatio||1;this.mk=navigator.userAgent.match(/(MSIE)/g)?!0:!1;this.If=navigator.userAgent.match(/(Firefox)/g)?
!0:!1;if(this.Jd=navigator.userAgent.match(/(Safari)/g)?!0:!1)a=navigator.userAgent.indexOf("Safari"),this.vd=navigator.userAgent.substring(a+7),a=navigator.userAgent.indexOf("Version"),-1!=a&&(this.vd=navigator.userAgent.substring(a+8)),this.vd=this.vd.substring(0,this.vd.indexOf(" ")),this.vd=this.vd.substring(0,this.vd.indexOf(".")),this.Yi=!0;if(this.lk=navigator.userAgent.match(/(Chrome)/g)?!0:!1)this.Jd=!1;this.Id=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1;this.pk=navigator.userAgent.match(/(iPhone|iPod)/g)?
!0:!1;this.Xg=navigator.userAgent.match(/(android)/i)?!0:!1;this.nk=navigator.userAgent.match(/(IEMobile)/i)?!0:!1;this.Jf=this.Id||this.Xg||this.nk;/iP(hone|od|ad)/.test(navigator.platform)&&(a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),this.gk=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||"0",10)]);this.Yg=!window.requestAnimationFrame;a=["Webkit","Moz","O","ms","Ms"];var d;this.Ja="";this.Qc="transition";this.Va="transform";this.hd="perspective";for(d=0;d<a.length;d++)"undefined"!==
typeof document.documentElement.style[a[d]+"Transform"]&&(this.Ja="-"+a[d].toLowerCase()+"-",this.Qc=a[d]+"Transition",this.Va=a[d]+"Transform",this.hd=a[d]+"Perspective");this.yi=G();this.Z=N();this.Fc=this.yi;this.Z&&(this.Fc=!1);this.sc=!0;this.Ve=!1;if(this.Id||this.Xg)this.$k(80),this.ng=2;this.Yc("Pano2VR player - Prefix:"+this.Ja+", "+(this.yi?"CSS 3D available":"CSS 3D not available")+", "+(this.Z?"WebGL available":"WebGL not available"));O&&this.L("Pano2VR Debug version!");try{window.AudioContext=
window.AudioContext||window.webkitAudioContext,this.Ha=new AudioContext}catch(c){this.Ha=null}this.Jd&&(!this.Yi||9>Number(this.vd))&&(this.Ha=null);this.Kh=this.pk?this.Jd&&this.Yi&&10<=Number(this.vd)?!0:!1:!0};b.prototype.L=function(a){if(O){var d=document.getElementById("debug");d&&(d.innerHTML=a.toString()+"<br />");window.console&&window.console.log(a)}};b.prototype.Yc=function(a){var d=document.getElementById("debug");d&&(d.innerHTML=a+"<br />");window.console&&window.console.log(a)};b.prototype.$k=
function(a){this.he=a};b.prototype.Rn=function(a){this.crossOrigin=a};b.prototype.Tn=function(a){this.Le=a};b.prototype.Pm=function(){return this.nh};b.prototype.Qn=function(a){this.Ad=a};b.prototype.xm=function(){return this.Ad};b.prototype.Em=function(){return this.Jf};b.prototype.Cm=function(){return this.s.active};b.prototype.Vn=function(a){this.Jf=!!a};b.prototype.Rg=function(){return this.isLoaded};b.prototype.gd=function(){return 1*this.m.height/(2*Math.tan(Math.PI/180*(this.Jb()/2)))};b.prototype.bl=
function(a,d){this.isFullscreen&&(a=window.innerWidth,d=window.innerHeight);var c=a-this.margin.left-this.margin.right,b=d-this.margin.top-this.margin.bottom;if(!(10>c||10>b)){var f=window.devicePixelRatio||1;this.We&&(f=1);this.C.style.width=c+"px";this.C.style.height=b+"px";this.C.style.left=this.margin.left+"px";this.C.style.top=this.margin.top+"px";if(this.Z)try{this.$a&&(this.$a.style.position="absolute",this.$a.style.display="inline",this.$a.style.width=c+"px",this.$a.style.height=b+"px",this.$a.width=
c*f,this.$a.height=b*f),this.H&&(this.jb.width=c*f,this.jb.height=b*f,this.H.viewport(0,0,this.H.drawingBufferWidth,this.H.drawingBufferHeight))}catch(l){alert(l)}this.Tb&&(this.Tb.style.width=a+"px",this.Tb.style.height=d+"px",this.Tb.width=a,this.Tb.height=d);this.Aa&&(this.Aa.style.width=a+"px",this.Aa.style.height=d+"px",this.sa.style.width=a+"px",this.sa.style.height=d+"px",this.sa.width=a,this.sa.height=d,this.sa.style.left=this.margin.left+"px",this.sa.style.top=this.margin.top+"px",this.O&&
this.O!=this.Aa&&(this.O.style.width=a+"px",this.O.style.height=d+"px"));this.Ba&&(c=this.Ba.Lc,c.style.width=a+"px",c.style.height=d+"px",c.width=a,c.height=d,c.style.left=this.margin.left+"px",c.style.top=this.margin.top+"px");this.Ff&&(this.xa=!0);c=this.C.offsetWidth;b=this.C.offsetHeight;if(this.m.width!=c||this.m.height!=b)this.m.width=c,this.m.height=b;this.Ro();this.O&&this.O.ggUpdateSize&&this.O.ggUpdateSize(a,d)}};b.prototype.ue=function(){this.lj=!0};b.prototype.cd=function(){this.bl(this.Cd.offsetWidth,
this.Cd.offsetHeight)};b.prototype.an=function(){var a={width:0,height:0};a.width=this.m.width;a.height=this.m.height;return a};b.prototype.de=function(){var a={x:0,y:0},d=this.C;if(d.offsetParent){do a.x+=d.offsetLeft,a.y+=d.offsetTop,d=d.offsetParent;while(d)}return a};b.prototype.io=function(a){this.Qa=a};b.prototype.Xn=function(a,d,c,b){this.margin.left=a;this.margin.top=d;this.margin.right=c;this.margin.bottom=b;this.Qa=this.skinObj;this.ue()};b.prototype.em=function(a){0==a&&(this.A.nd=!1);
1==a&&(this.A.nd=!0);2==a&&(this.A.nd=this.A.nd?!1:!0)};b.prototype.Zm=function(){return 1==this.A.nd?1:0};b.prototype.zj=function(a,d){this.w.mode=1==d&&0<this.w.mode?0:Math.round(a);this.update();this.ha&&(this.ha.changePolygonMode(a,d),this.ha.update())};b.prototype.dl=function(a){var d=this.w.fb.indexOf(a);-1==d?(this.w.fb.push(a),this.w.Eb.push(0),this.w.Ec.push(1)):this.w.Ec[d]=1;this.update()};b.prototype.ek=function(a){var d=this.w.fb.indexOf(a);-1!=d&&(this.w.Ec[d]=0,this.w.xh.push(a),this.update())};
b.prototype.Do=function(a){var d=this.w.fb.indexOf(a);-1==d||-1!=d&&0==this.w.Ec[d]?this.dl(a):this.ek(a);this.update()};b.prototype.cm=function(a,d,c,b,f){for(var l=0;l<this.P.length;l++){var h=this.P[l];"poly"!=h.type||h.id!=a&&""!=a||(h.Pb=d,h.Ob=c,h.Sb=b,h.Rb=f)}""==a&&(this.w.Pb=d,this.w.Ob=c,this.w.Sb=b,this.w.Rb=f);this.update()};b.prototype.am=function(a){this.Ba&&(this.Ba.aj=0==a?!0:1==a?!1:!this.Ba.aj,this.update())};b.prototype.Rm=function(){return this.w.mode};b.prototype.fm=function(){};
b.prototype.$m=function(){return 0};b.prototype.hk=function(a,d,c){a=Math.atan2(a+1,c);var b=Math.atan2(d+1,c);d=Math.sin(a);c=Math.sin(b);a=Math.cos(a);b=Math.cos(b);this.Oj.Ya(0,0,-1);this.Nj.Ya(a,0,-d);this.Pj.Ya(-a,0,-d);this.Qj.Ya(0,b,-c);this.Mj.Ya(0,-b,-c)};b.prototype.ai=function(a){a=this.rf(a,this.Oj);a=this.rf(a,this.Nj);a=this.rf(a,this.Pj);a=this.rf(a,this.Qj);return a=this.rf(a,this.Mj)};b.prototype.rl=function(a){if(!this.sc&&this.kn!=a){this.kn=a;var d;d=this.margin.left+this.m.width/
2+"px ";d+=this.margin.top+this.m.height/2+"px ";this.Aa.style[this.hd]=a+"px";this.Aa.style[this.hd+"Origin"]=d;this.C.style[this.hd]=a+"px";this.C.style[this.hd+"Origin"]=d}};b.prototype.qo=function(){return this.B.se||this.B.yd||this.Z&&(4!=this.Za||0!=this.fc)?!1:!0};b.prototype.qg=function(){var a,d=new m.ra(0,0,-100),c=this.gd(),b,f,l;f=100/this.f.c;l=this.h.width/this.h.height;b=this.m.height*f*l;f*=this.m.height;for(var h=this.qo(),g=0;g<this.P.length;g++){var k=this.P[g],n,r;"point"==k.type&&
(r=!1,2==this.kb?(a=(this.pan.c-k.pan)/100/l*b,n=(this.j.c-k.j)/100*f,Math.abs(a)<this.m.width/2+500&&Math.abs(n)<this.m.height/2+500&&(r=!0)):(d.Ya(0,0,-100),d.va(-k.j*Math.PI/180),d.Da(k.pan*Math.PI/180),d.Da(-this.pan.c*Math.PI/180),d.va(this.j.c*Math.PI/180),d.mb(this.N.c*Math.PI/180),.01>d.z?(n=-c/d.z,a=d.x*n,n*=d.y,Math.abs(a)<this.m.width/2+500&&Math.abs(n)<this.m.height/2+500&&(r=!0)):n=a=0),k.gc=a+this.m.width/2,k.Cb=n+this.m.height/2,k.a&&k.a.__div&&("none"!=k.a.__div.style[this.Qc]&&(k.a.__div.style[this.Qc]=
"none"),k.a.ggUse3d?(this.sc||this.rl(c),k.a.__div.style.width="1px",k.a.__div.style.height="1px",a="",this.sc&&(a+="perspective("+c+"px) "),a+="translate3d(0px,0px,"+c+"px) ",a+="rotateZ("+this.N.c.toFixed(10)+"deg) ",a+="rotateX("+this.j.c.toFixed(10)+"deg) ",a+="rotateY("+(-this.pan.c).toFixed(10)+"deg) ",a+="rotateY("+k.pan.toFixed(10)+"deg) ",a+="rotateX("+(-k.j).toFixed(10)+"deg) ",a+="translate3d(0px,0px,"+(-1*k.a.gg3dDistance).toFixed(10)+"px) ",k.a.__div.style[this.Va+"Origin"]="0% 0%",k.a.__div.style[this.Va]=
a,k.a.__div.style.left=this.margin.left+this.m.width/2+"px",k.a.__div.style.top=this.margin.top+this.m.height/2+"px"):r&&h?(k.a.__div.style.left=this.margin.left+a+this.m.width/2+"px",k.a.__div.style.top=this.margin.top+n+this.m.height/2+"px"):(k.a.__div.style.left="-1000px",k.a.__div.style.top="-1000px")));if("poly"==k.type){var p=[];if(2==this.kb)for(k.Md=[],r=0;r<k.ug.length;r++)n=k.ug[r],a=(this.pan.c-n.pan)/100/l*b,n=(this.j.c-n.j)/100*f,a+=this.margin.left+this.m.width/2,n+=this.margin.top+
this.m.height/2,k.Md.push({gc:a,Cb:n});else{for(r=0;r<k.ug.length;r++)n=k.ug[r],d.Ya(0,0,-100),d.va(-n.j*Math.PI/180),d.Da(n.pan*Math.PI/180),d.Da(-this.pan.c*Math.PI/180),d.va(this.j.c*Math.PI/180),d.mb(this.N.c*Math.PI/180),p.push(d.clone());p=this.ai(p);if(0<p.length)for(r=0;r<p.length;r++)d=p[r],.1>d.z?(n=-c/d.z,a=this.m.width/2+d.x*n,n=this.m.height/2+d.y*n):n=a=0,d.gc=a,d.Cb=n;k.Md=p}}}};b.prototype.ym=function(){for(var a=[],d=0;d<this.P.length;d++){var c=this.P[d];"point"==c.type&&c.a&&c.a.__div&&
a.push(c.a.__div)}return a};b.prototype.fa=function(a,d){a=Number(a);isNaN(d)&&(d=0);0>d&&(d=0);1<d&&(d=1);return"rgba("+(a>>16&255)+","+(a>>8&255)+","+(a&255)+","+d+")"};b.prototype.yn=function(){var a,d;if(this.sa&&(this.w.Nf!=this.w.mode&&(this.w.Nf=this.w.mode,this.sa.style.visibility=0<this.w.mode?"inherit":"hidden"),0<=this.w.mode||0<this.w.fb.length)){this.aa||(this.aa=this.sa.getContext("2d"));if(this.aa.width!=this.m.width||this.aa.height!=this.m.height)this.aa.width=this.m.width,this.aa.height=
this.m.height;this.aa.clear?this.aa.clear():this.aa.clearRect(0,0,this.sa.width,this.sa.height);var c=1;0>=this.w.mode&&(c=0);3==this.w.mode&&(c=this.w.na);for(a=0;a<this.P.length;a++){d=this.P[a];var b=c;if("poly"==d.type){var f=d.Md;2==this.w.mode&&(b=d.na);var l=this.w.fb.indexOf(d.id);-1!=l&&(b=this.w.Eb[l]);this.aa.fillStyle=this.fa(d.Pb,d.Ob*b);this.aa.strokeStyle=this.fa(d.Sb,d.Rb*b);if(0<f.length){this.aa.beginPath();for(d=0;d<f.length;d++)b=f[d],0==d?this.aa.moveTo(b.gc,b.Cb):this.aa.lineTo(b.gc,
b.Cb);this.aa.closePath();this.aa.stroke();this.aa.fill()}}}}};b.prototype.fk=function(a,d,c){var b,f,l=!1;b=0;for(f=a.length-1;b<a.length;f=b++){var h=a[b];f=a[f];h.Cb>c!=f.Cb>c&&d<(f.gc-h.gc)*(c-h.Cb)/(f.Cb-h.Cb)+h.gc&&(l=!l)}return l};b.prototype.$h=function(a,d){var c=-1;if((0<=this.w.mode||0<this.w.fb.length)&&this.fn())for(var b=0;b<this.P.length;b++){var f=this.P[b];"poly"==f.type&&f.Md&&0<f.Md.length&&(-1!=this.w.mode||-1!=this.w.fb.indexOf(f.id))&&this.fk(f.Md,a,d)&&(c=b,f.gc=a,f.Cb=d)}return 0<=
c?this.P[c]:!1};b.prototype.fn=function(){return 4==this.ya()&&0==this.fc};b.prototype.Jb=function(){var a=0,d=this.ya(),c=this.m;switch(this.f.mode){case 0:a=this.f.c/2;break;case 1:a=4==d?180*Math.atan(c.height/c.width*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:c.height/c.width*this.f.c/2;break;case 2:a=Math.sqrt(c.width*c.width+c.height*c.height);a=4==d?180*Math.atan(c.height/a*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:c.height/a*this.f.c/2;break;case 3:a=4*c.height/3>c.width?this.f.c/2:4==d?180*
Math.atan(4*c.height/(3*c.width)*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:4*c.height/(3*c.width)*(this.f.c/2)}return 2*a};b.prototype.Am=function(a,d){a||(a=this.Jb());d||(d=this.ya());return 4==d?180*Math.atan(this.Sd()*Math.tan(a/2*Math.PI/180))/Math.PI:a*this.Sd()};b.prototype.Sd=function(){return this.m.width/this.m.height};b.prototype.gg=function(a){a/=2;var d,c=this.ya();switch(this.f.mode){case 0:this.f.c=2*a;break;case 1:a=4==c?180*Math.atan(this.m.width/this.m.height*Math.tan(a*Math.PI/
180))/Math.PI:this.m.width/this.m.height*a;this.f.c=2*a;break;case 2:d=Math.sqrt(this.m.width*this.m.width+this.m.height*this.m.height);a=4==c?180*Math.atan(d/this.m.height*Math.tan(a*Math.PI/180))/Math.PI:d/this.m.height*a;this.f.c=2*a;break;case 3:4*this.m.height/3>this.m.width||(d=3*this.m.width/(4*this.m.height),a=4==c?180*Math.atan(d*Math.tan(a*Math.PI/180))/Math.PI:d*a),this.f.c=2*a}};b.prototype.Eg=function(){var a=new k;a.pan=this.pan.c;a.j=this.j.c;a.f=this.f.c;this.Ce(a);this.Ce(a);this.Ce(a);
this.pan.c=a.pan;this.j.c=a.j;this.f.c=a.f};b.prototype.Ce=function(a){var d,c,b=this.m.width/this.m.height;if(2==this.kb){0<this.f.Uf&&(d=this.ic,this.h.I&&0<this.h.I.length&&(d=this.h.I[0].height),this.f.min=100*this.m.height/(d*this.f.Uf));c=a.f/2;d=c*b;var f=this.h.width/this.h.height*50,b=this.A.Zk?2*Math.min(50,f/b):2*Math.max(50,f/b);a.f<this.f.min&&(a.f=this.f.min);a.f>b&&(a.f=b);50<c?a.j=0:(50<a.j+c&&(a.j=50-c),-50>a.j-c&&(a.j=-50+c));d>f?a.pan=0:(a.pan+d>f&&(a.pan=f-d,this.s.active&&(this.s.speed=
-this.s.speed,this.pan.d=0)),a.pan-d<-f&&(a.pan=-f+d,this.s.active&&(this.s.speed=-this.s.speed,this.pan.d=0)))}else{0<this.f.Uf&&(d=this.ic,this.h.I&&0<this.h.I.length&&(d=this.h.I[0].height),this.f.min=360*Math.atan2(this.m.height/2,d/2*this.f.Uf)/Math.PI);a.f<this.f.min&&(a.f=this.f.min);var f=this.f.max,l=179;c=this.Jb()/2;d=b*c;4==this.ya()?d=180*Math.atan(b*Math.tan(c*Math.PI/180))/Math.PI:9==this.ya()?(f=this.f.Ii,l=355):12==this.ya()&&(f=this.f.Hi,l=360);this.Z||(f=Math.max(160,f));a.f>f&&
(a.f=f);12==this.ya()&&(2*d>l&&(a.f=l/b),c=this.Jb()/2,2*c>l&&(a.f=l),c=this.Jb()/2,d=b*c);2*c>this.j.max-this.j.min&&180>this.j.max-this.j.min&&(c=(this.j.max-this.j.min)/2,this.gg(2*c));90>this.j.max?a.j+c>this.j.max&&(a.j=this.j.max-c):a.j>this.j.max&&(a.j=this.j.max);-90<this.j.min?a.j-c<this.j.min&&(a.j=this.j.min+c):a.j<this.j.min&&(a.j=this.j.min);b=this.pan.max-this.pan.min;if(359.99>b){var f=90,l=Math.tan(c*Math.PI/180),h=Math.tan((Math.abs(a.j)+c)*Math.PI/180),h=Math.sqrt(h*h+1)/Math.sqrt(l*
l+1);c=180*Math.atan(h*Math.tan(d*Math.PI/180))/Math.PI;2*c>b&&(h=Math.tan(b*Math.PI/360)/Math.tan(d*Math.PI/180),b=h*Math.sqrt(l*l+1),h=Math.sqrt(b*b-1),f=180/Math.PI*Math.atan(h));a.pan+c>this.pan.max&&(a.pan=this.pan.max-c,this.s.active&&(this.s.speed=-this.s.speed,this.pan.d=0));a.pan-c<this.pan.min&&(a.pan=this.pan.min+c,this.s.active&&(this.s.speed=-this.s.speed,this.pan.d=0));a.j+d>f&&(a.j=f-d);a.j-d<-f&&(a.j=-f+d)}}};b.prototype.update=function(a){void 0===a&&(a=0);this.xa=!0;a&&(this.Lg=
a)};b.prototype.Fm=function(){return this.ha?!!this.ha.isTileLoading:0<this.Fa||0<this.uc};b.prototype.rg=function(){var a=Date.now(),d;this.wb?this.ha&&(this.Ko(),2===this.kb?(this.Eg(),this.qg()):0===this.kb&&(d=this.gd(),this.hk(this.m.width/2,this.m.height/2,d),this.qg())):(this.Z&&this.la.om(),2===this.kb?(this.qg(),this.Z?(this.la.jj(),this.la.Ik()):this.jj()):0===this.kb&&(!this.Z||4==this.Za&&0==this.fc?(d=this.gd(),this.hk(this.m.width/2,this.m.height/2,d),this.qg(),this.tg?this.la.Qo():
this.yl&&this.xl(),this.sl(),this.Z?(this.o.Wc?14==this.o.format?this.la.Po():this.la.Cl():0<this.h.I.length?this.la.Wo():this.la.Yo(),this.la.Ik()):(this.Fc?0<this.h.I.length?this.No():this.Mo():this.sg&&this.Jo(),this.yn()),this.Ba&&this.Ba.xn()):(this.la.Cl(),this.qg(),this.en())));d=Date.now();50<d-a?(this.L("Time between frames: "+(d-a)),this.We||(2<this.bj?(this.We=!0,this.L("disabling HighDPI rendering"),this.cd()):this.bj++)):this.bj=0;this.Ff&&this.h.Uk++};b.prototype.Mo=function(){var a=
!1;if(this.m.width!=this.C.offsetWidth||this.m.height!=this.C.offsetHeight)this.m.width=this.C.offsetWidth,this.m.height=this.C.offsetHeight,this.C.style[this.Va+"OriginX"]=this.m.width/2+"px",this.C.style[this.Va+"OriginY"]=this.m.height/2+"px",a=!0;var d=Math.round(this.gd());this.Of==d&&!a||this.sc||(this.Of=d,this.C.style[this.hd]=d+"px");this.hb.im(this.pan.c,this.j.c,this.N.c,this.Ca);for(a=0;6>a;a++){var c,b;if(c=this.hb.ab[a])b="",this.sc?(b+="translate3d("+this.m.width/2+"px,"+this.m.height/
2+"px,0px) ",b+="perspective("+d+"px) ",b+="translate3d(0px,0px,"+d+"px) "):b+="translate3d("+this.m.width/2+"px,"+this.m.height/2+"px,"+d+"px) ",b+="rotateZ("+Number(this.N.c).toFixed(10)+"deg) ",b+="rotateX("+Number(this.j.c).toFixed(10)+"deg) ",b+="rotateY("+Number(-this.pan.c).toFixed(10)+"deg) ",c.bk&&(b+=c.bk,c.qc||(b="translate3d(-10px,-10px,0px) scale(0.001,0.001)"),c.K.style[this.Va]=b)}};b.prototype.Jo=function(){this.Eg();var a;this.Tb&&(a=this.Tb.getContext("2d"));if(this.m.width!==this.C.offsetWidth||
this.m.height!==this.C.offsetHeight)this.m.width=this.C.offsetWidth,this.m.height=this.C.offsetHeight;if(a){var d=a.canvas.width/2,c=a.canvas.height/2,b=a.createRadialGradient(d,c,5,d,c,Math.max(d,c));b.addColorStop(0,"#333");b.addColorStop(1,"#fff");a.rect(0,0,a.canvas.width,a.canvas.height);a.fillStyle=b;a.fill();a.fillStyle="#f00";a.font="20px Helvetica";a.textAlign="center";a.fillText("Pan: "+this.pan.c.toFixed(1),d,c-60);a.fillText("Tilt: "+this.j.c.toFixed(1),d,c-30);a.fillText("Fov: "+this.f.c.toFixed(1),
d,c+0);a.fillText("Node: "+this.Uj(),d,c+30);a.fillText("Title: "+this.ef.title,d,c+60)}};b.prototype.Ko=function(){this.Eg();if(this.m.width!==this.C.offsetWidth||this.m.height!==this.C.offsetHeight)this.m.width=this.C.offsetWidth,this.m.height=this.C.offsetHeight;this.ha&&this.ha.setPan&&(this.ha.setPan(this.pan.c),this.ha.setTilt(this.j.c),this.ha.setFov(this.f.c))};b.prototype.jj=function(){this.sa.style.visibility="inherit";this.aa||(this.aa=this.sa.getContext("2d"));if(this.aa.width!=this.m.width||
this.aa.height!=this.m.height)this.aa.width=this.m.width,this.aa.height=this.m.height;this.aa.clear?this.aa.clear():this.aa.clearRect(0,0,this.sa.width,this.sa.height);this.uc=0;var a,d,c;d=100/this.f.c;c=this.h.width/this.h.height;var b=this.m.height*d*c;d*=this.m.height;a=(this.pan.c/100/c-.5)*b+this.m.width/2;for(var f=(this.j.c/100-.5)*d+this.m.height/2,l,h,g,k,n=0;this.h.I.length>=n+2&&this.h.I[n+1].width>b;)n++;var r,p;p=[];for(r=this.h.I.length-1;r>=n;){c=this.h.I[r];var u;if(c.cache)u={Wa:0,
rb:0},u.tb=c.M-1,u.ub=c.ea-1;else{u={};var t=-f/d*(c.height/this.h.G);l=(-a+this.m.width)/b*(c.width/this.h.G);h=(-f+this.m.height)/d*(c.height/this.h.G);u.Wa=Math.min(Math.max(0,Math.floor(-a/b*(c.width/this.h.G))),c.M-1);u.rb=Math.min(Math.max(0,Math.floor(t)),c.ea-1);u.tb=Math.min(Math.max(0,Math.floor(l)),c.M-1);u.ub=Math.min(Math.max(0,Math.floor(h)),c.ea-1)}p[r]=u;var v=!0;for(h=u.rb;h<=u.ub;h++)for(l=u.Wa;l<=u.tb;l++)k=l+h*c.M,t=c.V[k],t||(t=new m.Gd,c.V[k]=t),this.Fa<this.ng?t.h||(this.zi++,
t.h=new Image,t.h.onload=this.Ao(),t.h.onerror=this.Bh(t),t.h.onabort=this.Bh(t),t.h.crossOrigin=this.crossOrigin,t.h.setAttribute("src",this.qe(0,r,l,h)),c.cache&&this.Gb.push(t.h),0==this.Fa&&this.O&&this.O.ggReLoadedLevels&&this.O.ggReLoadedLevels(),this.Fa++,this.xa=!0):this.uc++,t.h&&t.h.complete||(v=!1),t.visible=!0;u.Di=v;r--}for(r=this.h.I.length-1;r>=n;){c=this.h.I[r];if(p[r]&&0<=p[r].Wa)for(u=p[r],h=u.rb;h<=u.ub;h++)for(l=u.Wa;l<=u.tb;l++)k=l+h*c.M,(t=c.V[k])||(t=c.V[k]=new m.Gd),t.h&&t.h.complete&&
this.aa.drawImage(t.h,a+(-this.h.Ka+this.h.G*l)*b/c.width,f+(-this.h.Ka+this.h.G*h)*d/c.height,t.h.width*b/c.width,t.h.height*d/c.height),t.visible=!0;r--}for(b=0;b<this.h.I.length;b++)if(c=this.h.I[b],!c.cache)for(g in c.V)c.V.hasOwnProperty(g)&&(t=c.V[g],t.visible||(t.h=null,delete c.V[g]));if(0<=this.w.mode||0<this.w.fb.length)for(b=1,0>=this.w.mode&&(b=0),3==this.w.mode&&(b=this.w.na),g=0;g<this.P.length;g++)if(c=this.P[g],a=b,"poly"==c.type&&(d=c.Md,2==this.w.mode&&(a=c.na),f=this.w.fb.indexOf(c.id),
-1!=f&&(a=this.w.Eb[f]),0<d.length)){this.aa.fillStyle=this.fa(c.Pb,c.Ob*a);this.aa.strokeStyle=this.fa(c.Sb,c.Rb*a);this.aa.beginPath();for(c=0;c<d.length;c++)a=d[c],0==c?this.aa.moveTo(a.gc,a.Cb):this.aa.lineTo(a.gc,a.Cb);this.aa.closePath();this.aa.stroke();this.aa.fill()}this.Oc=!1};b.prototype.zo=function(a){var d=this;return function(){d.xa=!0;d.Oc=!0;a.loaded=!0;a.h&&!a.K&&d.C.appendChild(a.h);d.Fa&&d.Fa--;0==d.Fa&&d.O&&d.O.ggLoadedLevels&&d.O.ggLoadedLevels();a.h&&a.Oa&&(a.Oa.drawImage(a.h,
0,0),a.h=null)}};b.prototype.Ao=function(){var a=this;return function(){a.xa=!0;a.Oc=!0;a.Fa&&a.Fa--;0==a.Fa&&a.O&&a.O.ggLoadedLevels&&a.O.ggLoadedLevels()}};b.prototype.Bh=function(a){var d=this;return function(){d.xa=!0;d.Oc=!0;d.Fa&&d.Fa--;0==d.Fa&&d.O&&d.O.ggLoadedLevels&&d.O.ggLoadedLevels();a.h=null}};b.prototype.ak=function(a,d,c){c.Wa=a.width/this.h.G*d.vf;c.rb=a.height/this.h.G*d.wf;c.tb=a.width/this.h.G*d.Rf;c.ub=a.height/this.h.G*d.Sf;c.Wa=Math.min(Math.max(0,Math.floor(c.Wa)),a.M-1);c.rb=
Math.min(Math.max(0,Math.floor(c.rb)),a.ea-1);c.tb=Math.min(Math.max(0,Math.floor(c.tb)),a.M-1);c.ub=Math.min(Math.max(0,Math.floor(c.ub)),a.ea-1)};b.prototype.Zn=function(a){a=Math.round(a);this.sc=0<(a&1);this.Ve=0<(a&2);this.Jh=0<(a&4);this.We=0<(a&8);4096<=a&&(this.Fc=0<(a&4096),this.Z=0<(a&8192),this.sg=0<(a&32768))};b.prototype.Um=function(){var a=0;this.sc&&(a|=1);this.Ve&&(a|=2);this.Jh&&(a|=4);this.Fc&&(a|=4096);this.Z&&(a|=8192);this.sg&&(a|=32768);return a};b.prototype.ul=function(){if(!(6>
this.hb.ab.length))for(var a=0;6>a;a++){var d;d=this.hb.ab[a];var c;c=[];c.push(new m.ra(-1,-1,-1,0,0));c.push(new m.ra(1,-1,-1,1,0));c.push(new m.ra(1,1,-1,1,1));c.push(new m.ra(-1,1,-1,0,1));for(var b=0;4>b;b++)4>a?c[b].Da(-Math.PI/2*a):c[b].va(Math.PI/2*(4==a?-1:1)),this.Ca&&(c[b].mb(this.Ca.N*Math.PI/180),c[b].va(-this.Ca.pitch*Math.PI/180)),c[b].Da(-this.pan.c*Math.PI/180),c[b].va(this.j.c*Math.PI/180),c[b].mb(this.N.c*Math.PI/180);c=this.ai(c);d.qc=0<c.length;if(d.qc){d=d.Pe;d.vf=c[0].bd;d.Rf=
c[0].bd;d.wf=c[0].Fb;d.Sf=c[0].Fb;for(b=1;b<c.length;b++)d.vf=Math.min(d.vf,c[b].bd),d.Rf=Math.max(d.Rf,c[b].bd),d.wf=Math.min(d.wf,c[b].Fb),d.Sf=Math.max(d.Sf,c[b].Fb);d.ff=d.Rf-d.vf;d.vg=d.Sf-d.wf;d.scale=Math.max(d.ff,d.vg)}else d.Pe.ff=-1,d.Pe.vg=-1}};b.prototype.Gi=function(){for(var a=0;a<this.h.I.length;a++){var d=this.h.I[a],c;for(c in d.V)d.V.hasOwnProperty(c)&&(d.V[c].visible=!1)}};b.prototype.li=function(){for(var a=0,d=Math.tan(Math.min(this.Jb(),175)*Math.PI/360),c=this.m.height/(2*d),
c=c*(1+this.m.width/this.m.height*d/2),c=c*Math.pow(2,1<this.devicePixelRatio?this.h.zk:this.h.yk);this.h.I.length>=a+2&&!this.h.I[a+1].Se&&this.h.I[a+1].width>c;)a++;return a};b.prototype.No=function(){var a=!1,d,c,b;if(this.m.width!==this.C.offsetWidth||this.m.height!==this.C.offsetHeight)this.m.width=this.C.offsetWidth,this.m.height=this.C.offsetHeight,this.C.style[this.Va+"OriginX"]=this.m.width/2+"px",this.C.style[this.Va+"OriginY"]=this.m.height/2+"px",a=!0;var f=Math.round(this.gd());if(this.Of!=
f||a)this.Of=f,this.sc||(this.C.style[this.hd]=f+"px",this.C.style[this.hd+"Origin"]="50% 50%");this.uc=0;if(0<this.h.I.length){this.ul();this.Gi();var l;l="";for(d=0;6>d;d++){var h;h=this.hb.ab[d];h.qc&&(l=l+d+",")}l=this.li();var g;for(g=this.h.I.length-1;g>=l;){var a=this.h.I[g],k=1;g==this.h.I.length-1&&0==this.h.Ka&&(k=this.h.G/(this.h.G-2));for(d=0;6>d;d++){h=this.hb.ab[d];var n=h.Pe;if(h.qc&&0<n.ff&&0<n.vg&&0<n.scale||a.cache){h.xa=!1;var r;r={};a.cache?(r.Wa=0,r.rb=0,r.tb=a.M-1,r.ub=a.ea-
1):this.ak(a,n,r);for(b=r.rb;b<=r.ub;b++)for(c=r.Wa;c<=r.tb;c++){var p=c+b*a.M+d*a.M*a.ea;(n=a.V[p])||(n=a.V[p]=new m.Gd);if(!n.K&&this.Fa<this.ng){if(0<this.Fh.length){n.K=this.Fh.shift();for(p=this.C.firstChild;p&&p.Fd&&(-1==p.Fd||p.Fd>=g);)p=p.nextSibling;this.C.insertBefore(n.K,p);n.Oa=n.K.getContext("2d")}else if(this.nl<this.he){this.nl++;n.K=document.createElement("canvas");n.K.width=this.h.G+2*this.h.Ka;n.K.height=this.h.G+2*this.h.Ka;n.Oa=n.K.getContext("2d");n.K.style[this.Va+"Origin"]=
"0% 0%";n.K.style.overflow="hidden";n.K.style.position="absolute";for(p=this.C.firstChild;p&&p.Fd&&(-1==p.Fd||p.Fd>=g);)p=p.nextSibling;this.C.insertBefore(n.K,p)}n.K&&(this.zi++,n.h=new Image,n.h.crossOrigin=this.crossOrigin,n.h.style[this.Va+"Origin"]="0% 0%",n.h.style.position="absolute",n.h.style.overflow="hidden",n.K.Fd=g,n.h.onload=this.zo(n),n.h.onerror=this.Bh(n),n.h.onabort=this.Bh(n),n.h.setAttribute("src",this.qe(d,g,c,b)),a.cache&&this.Gb.push(n.h),0==this.Fa&&this.O&&this.O.ggReLoadedLevels&&
this.O.ggReLoadedLevels(),this.Fa++,this.xa=!0)}else this.uc++;if(n.K){p="";this.sc?(p+="translate3d("+this.m.width/2+"px,"+this.m.height/2+"px,0px) ",p+=" perspective("+f+"px) ",p+="translate3d(0px,0px,"+f+"px) "):p+="translate3d("+this.m.width/2+"px,"+this.m.height/2+"px,"+f+"px) ";p+="rotateZ("+Number(this.N.c).toFixed(10)+"deg) ";p+="rotateX("+Number(this.j.c).toFixed(10)+"deg) ";p+="rotateY("+Number(-this.pan.c).toFixed(10)+"deg) ";this.Ca&&(p+="rotateX("+Number(-this.Ca.pitch).toFixed(10)+"deg) ",
p+="rotateZ("+Number(this.Ca.N).toFixed(10)+"deg) ");var p=4>d?p+("rotateY("+-90*d+"deg) "):p+("rotateX("+(4==d?-90:90)+"deg) "),u;this.Ve?(u=this.nf/this.h.G*(this.h.G/a.width)*(2*g+1),u=this.Jd?2/Math.tan(this.f.c*Math.PI/360)*u:2*u,p+=" scale("+u*k*k+")"):u=1/(k*k);p+=" translate3d("+(1/k*c*this.h.G-this.h.Ka-a.width/2)+"px,";p+=1/k*b*this.h.G-this.h.Ka-a.width/2+"px,";p+=-a.width*u/2+"px)";h.qc&&(n.visible=!0,n.K?n.K.style[this.Va]=p:n.h&&(n.h.style[this.Va]=p))}}}}g--}for(f=0;f<this.h.I.length;f++){var a=
this.h.I[f],t;for(t in a.V)a.V.hasOwnProperty(t)&&(n=a.V[t],!n.visible&&n.K&&(a.cache?(l="translate3d(-10px,-10px,0px) scale(0.001,0.001)",n.K?n.K.style[this.Va]=l:n.h&&(n.h.style[this.Va]="")):(n.Oa&&n.Oa.clearRect(0,0,n.Oa.canvas.width,n.Oa.canvas.height),this.Fh.push(n.K),n.K?(l="translate3d(-10px,-10px,0px) scale(0.001,0.001)",n.K.style[this.Va]=l,n.K.Fd=-1):n.loaded&&this.C.removeChild(n.h),n.K=null,n.h=null,n.Oa=null,delete a.V[t])))}this.Oc=!1}};b.prototype.sl=function(){var a=Math.round(this.gd());
this.sc||this.rl(a);for(var d=0;d<this.Xa.length;d++){var c;c=this.Xa[d];c.wl(a);c.a.hidden=!1}};b.prototype.xl=function(){for(var a=Math.round(this.gd()),d=0;d<this.J.length;d++){var c;c=this.J[d];c.Zc||(c.wl(a),c.a.hidden=!1)}};b.prototype.en=function(){for(var a=0;a<this.Xa.length;a++){var d;d=this.Xa[a];d.cl()}for(a=0;a<this.J.length;a++)d=this.J[a],d.Zc||d.cl()};b.prototype.Ro=function(){for(var a=0;a<this.J.length;a++){var d;d=this.J[a];d.Zc||d.ue()}for(a=0;a<this.Xa.length;a++)d=this.Xa[a],
d.ue()};b.prototype.Bc=function(a){this.be=!1;try{a?this.$a=a:this.$a=document.createElement("canvas");var d=this.Cd.offsetWidth-this.margin.left-this.margin.right,c=this.Cd.offsetHeight-this.margin.top-this.margin.bottom;if(100>d||100>c)c=d=100;var b=window.devicePixelRatio||1;this.We&&(b=1);this.C.style.width=d+"px";this.C.style.height=c+"px";this.$a.style.width=d+"px";this.$a.style.height=c+"px";this.$a.width=d*b;this.$a.height=c*b;this.$a.style.display="none";this.$a.style.gp="none";this.C.insertBefore(this.$a,
this.C.firstChild);a={stencil:!0,depth:!0,alpha:!1};this.Id&&10<=this.gk[0]&&(a.antialias=!1);this.H=this.$a.getContext("webgl",a);this.H||(this.H=this.$a.getContext("experimental-webgl",a));if(this.H){var f=this.H;this.jb.width=d*b;this.jb.height=c*b;f.clearColor(0,0,0,0);f.enable(this.H.DEPTH_TEST);f.viewport(0,0,500,500);f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT);4096<=f.getParameter(f.MAX_TEXTURE_SIZE)&&!this.Jf&&(this.he=1<b?4*this.he:2*this.he);this.L("Max tile cnt: "+this.he);this.la.Hf();
this.la.Wg();this.la.ik(this.af);this.la.jk();this.B&&(this.B.Hf(),this.B.Bc());this.Ba&&(this.Ba.Hf(),this.Ba.Bc())}}catch(l){this.L(l)}this.H?this.Z=!0:alert("Could not initialise WebGL!")};b.prototype.Wb=function(a){return a?"{"==a.charAt(0)||"/"==a.charAt(0)||0<a.indexOf("://")||0==a.indexOf("javascript:")?a:this.Ad+a:this.Ad};b.prototype.Od=function(a,d,c){var b=(new RegExp("%0*"+d,"i")).exec(a.toString());if(b){var b=b.toString(),f=c.toString();for(b.charAt(b.length-1)!=d&&(f=(1+c).toString());f.length<
b.length-1;)f="0"+f;a=a.replace(b,f)}return a};b.prototype.qe=function(a,d,c,b){var f=this.h.Ci-1-d,l=this.h.Ak,h="x";switch(a){case 0:h="f";break;case 1:h="r";break;case 2:h="b";break;case 3:h="l";break;case 4:h="u";break;case 5:h="d"}for(var g=0;3>g;g++)l=this.Od(l,"c",a),l=this.Od(l,"s",h),l=this.Od(l,"r",d),l=this.Od(l,"l",f),l=this.Od(l,"x",c),l=this.Od(l,"y",b),l=this.Od(l,"v",b),l=this.Od(l,"h",c);return this.Wb(l)};b.prototype.ti=function(){return this.pan.c};b.prototype.Nm=function(){return this.v.pan};
b.prototype.Om=function(){for(var a=this.pan.c;-180>a;)a+=360;for(;180<a;)a-=360;return a};b.prototype.Sg=function(){for(var a=this.pan.c-this.pan.Mi;-180>a;)a+=360;for(;180<a;)a-=360;return a};b.prototype.vh=function(a){this.pa();isNaN(a)||(this.pan.c=Number(a));this.update()};b.prototype.Zi=function(a){this.pa();isNaN(a)||(this.pan.c=Number(a)+this.pan.Mi);this.update()};b.prototype.Bg=function(a,d){isNaN(a)||(this.vh(this.ti()+a),d&&(this.pan.d=a))};b.prototype.bm=function(a,d){this.Bg(a*this.Ed(),
d)};b.prototype.vi=function(){return this.j.c};b.prototype.Wm=function(){return this.v.j};b.prototype.wh=function(a){this.pa();isNaN(a)||(this.j.c=Number(a));this.update()};b.prototype.Cg=function(a,d){this.wh(this.vi()+a);d&&(this.j.d=a)};b.prototype.dm=function(a,d){this.Cg(a*this.Ed(),d)};b.prototype.$n=function(a){this.pa();isNaN(a)||(this.N.c=Number(a));this.update()};b.prototype.Vm=function(){return this.N.c};b.prototype.yf=function(){return this.f.c};b.prototype.zm=function(){return this.v.xd};
b.prototype.ag=function(a){this.pa();var d;switch(this.ya()){case 4:d=170;break;case 12:d=360;break;case 9:d=355;break;default:d=170}2==this.kb&&(d=9999999999);!isNaN(a)&&0<a&&a<d&&(d=this.f.c,this.f.c=Number(a),d!=this.f.c&&this.update())};b.prototype.yj=function(a,d){this.ag(this.yf()+a);d&&(this.f.d=a)};b.prototype.pf=function(a,d){if(!isNaN(a)){var c;c=a/90*Math.cos(Math.min(this.f.c,90)*Math.PI/360);c=this.f.c*Math.exp(c);this.ag(c);d&&(this.f.d=a)}};b.prototype.Yn=function(a,d){this.pa();isNaN(a)||
(this.pan.c=a);isNaN(d)||(this.j.c=d);this.update()};b.prototype.eg=function(a,d,c){this.pa();isNaN(a)||(this.pan.c=a);isNaN(d)||(this.j.c=d);isNaN(c)||this.ag(c);this.update()};b.prototype.Sn=function(){this.eg(this.pan.Pa,this.j.Pa,this.f.Pa)};b.prototype.Wn=function(a){this.cg(a);this.dg(a);this.bg(a)};b.prototype.cg=function(a){this.A.sb=a};b.prototype.bg=function(a){this.A.Oe=a};b.prototype.dg=function(a){this.A.Xc=a};b.prototype.moveTo=function(a,d,c,b,f,l){this.pa();if("_blank"!==a&&""!==a){this.v.active=
!0;this.v.ve=!1;this.v.mj=!1;var h=a.toString().split("/");1<h.length&&(a=Number(h[0]),b=Number(d),d=Number(h[1]),2<h.length&&(c=Number(h[2])));isNaN(a)?this.v.pan=this.pan.c:this.v.pan=Number(a);isNaN(d)?this.v.j=this.j.c:this.v.j=Number(d);!isNaN(c)&&0<c&&180>c?this.v.f=Number(c):this.v.f=this.f.c;this.v.speed=!isNaN(b)&&0<b?Number(b):1;isNaN(f)?this.v.N=this.N.c:this.v.N=Number(f);void 0!==l?!a||4!=l&&12!=l&&9!=l||(this.v.Bb=l):this.v.Bb=this.Za}};b.prototype.ih=function(a){this.pa();var d=0,c=
0,b=70,f=4,l=0,h=1;a.hasOwnProperty("pan")&&(d=Number(a.pan),this.v.pan=d);a.hasOwnProperty("tilt")&&(c=Number(a.tilt),this.v.j=c);a.hasOwnProperty("fov")&&(b=Number(a.fov),this.v.f=b);a.hasOwnProperty("projection")&&(f=Number(a.projection),this.v.Bb=f);a.hasOwnProperty("timingFunction")&&(l=Number(a.timingFunction));a.hasOwnProperty("speed")&&(h=Number(a.speed));0>=h?(this.eg(d,c,b),this.$c(f)):(a=new m.rk,a.Ta="__AutoMove",a.ig=this.pan.c,a.kg=this.j.c,a.wd=this.f.c,a.jg=this.Za,a.Pd=d,a.Qd=c,a.$e=
b,a.ad=f,a.Fe=!1,a.Yd=!1,a.Zd=!1,0==l&&(a.Yd=!0),1==l&&(a.Fe=!0,a.Yd=!0),2==l&&(a.Zd=!0),a.speed=h,this.v.tj=this.D,this.D=this.Rj(a),this.v.uj=(new Date).getTime(),this.v.mj=!0,this.v.active=!0,this.v.ve=!1,this.v.pan=d,this.v.j=c,this.v.f=b,this.zd=!1)};b.prototype.on=function(a){this.moveTo(this.pan.Pa,this.j.Pa,this.f.Pa,a)};b.prototype.pn=function(a,d){var c={};c.pan=this.pan.Pa;c.tilt=this.j.Pa;c.fov=this.f.Pa;c.projection=this.mh;c.timingFunction=d;c.speed=a;this.ih(c)};b.prototype.Sl=function(a,
d,c,b){var f=new m.ah(this);f.type="point";f.pan=d;f.j=c;f.id=a;f.a={};f.a.player=this;f.Ge();f.a.hotspot=f;f.a.__div=document.createElement("div");f.a.__div.appendChild(b);this.P.push(f);f.a.__div.style.position="absolute";f.a.__div.style.left="-1000px";f.a.__div.style.top="-1000px";this.Aa.insertBefore(f.a.__div,this.Aa.firstChild);this.xa=!0};b.prototype.Lo=function(a,d,c){for(var b=0;b<this.P.length;b++){var f=this.P[b];f.id==a&&(f.pan=d,f.j=c,f.Ge())}this.xa=!0};b.prototype.Ln=function(a){for(var d=
-1,c,b=0;b<this.P.length;b++)c=this.P[b],c.id==a&&(d=b);-1<d&&(c=this.P.splice(d,1).pop(),c.a&&c.a.__div&&this.Aa.removeChild(c.a.__div))};b.prototype.Qm=function(){for(var a=[],d=0;d<this.P.length;d++){var c=this.P[d];"point"==c.type&&a.push(String(c.id))}return a};b.prototype.Bm=function(a){for(var d=0;d<this.P.length;d++){var c=this.P[d];if(c.id==a)return d={},d.id=a,d.pan=c.pan,d.tilt=c.j,c.a&&c.a.__div&&(d.div=c.a.__div),d}};b.prototype.Bl=function(a,d){this.Y.start.x=a;this.Y.start.y=d;this.Y.ca.x=
a;this.Y.ca.y=d;this.ua.ca.x=a;this.ua.ca.y=d;this.Ti++;this.pan.fd=this.pan.c;this.j.fd=this.j.c};b.prototype.zl=function(a,d){var c=this.Jb();this.pan.fd+=a*c/this.m.height;this.j.fd+=d*c/this.m.height;this.pan.c=this.pan.fd;this.j.c=this.j.fd};b.prototype.Al=function(a,d){this.Y.c.x=a;this.Y.c.y=d;this.Y.ba.x=this.Y.c.x-this.Y.ca.x;this.Y.ba.y=this.Y.c.y-this.Y.ca.y;this.A.nd&&(this.Y.ca.x=this.Y.c.x,this.Y.ca.y=this.Y.c.y,this.update())};b.prototype.pa=function(){this.s.active&&(this.s.active=
!1,this.pan.d=0,this.j.d=0,this.f.d=0);this.v.active&&(this.v.active=!1,this.pan.d=0,this.j.d=0,this.f.d=0);this.lf=this.v.ve=!1;this.s.Ji=!1;this.ed=.02;this.jf=0;this.s.dd&&(this.s.dd=!1,this.s.enabled=this.s.wj);this.Me=(new Date).getTime()};b.prototype.Gm=function(){return this.Me};b.prototype.Xj=function(a,d){a||(a=this.qa.x,d=this.qa.y);var c=this.m.height/(2*Math.tan(this.f.c*Math.PI/360)),b=a-this.m.width/2,f=d-this.m.height/2,l={};l.pan=180*Math.atan(b/c)/Math.PI;l.tilt=180*Math.atan(-f/
Math.sqrt(b*b+c*c))/Math.PI;return l};b.prototype.Sm=function(a,b){var c,e;a||(a=this.qa.x,b=this.qa.y);if(2===this.kb)e=this.f.c/this.m.height,c=-(a-this.m.width/2)*e+this.pan.c,e=-(b-this.m.height/2)*e+this.j.c;else{e=new m.ra(0,0,1);c=this.Xj(a,b);e.ne(-c.tilt);e.$f(c.pan);e.ne(-this.j.c);e.$f(-this.pan.c);e.ne(-this.Ca.pitch);e.th(this.Ca.N);for(c=e.Ul()-180;-180>c;)c+=360;e=e.Vl()}var f={};f.pan=c;f.tilt=e;return f};b.prototype.od=function(a){return a==this.control?!0:a&&void 0!==a.ggPermeable&&
0==a.ggPermeable?!1:a&&a.ggType&&("container"==a.ggType||"cloner"==a.ggType||"timer"==a.ggType)?!0:!1};b.prototype.Zh=function(a,b){var c=this.gd(),e,f,l;for(e=0;e<this.J.length+this.Xa.length;e++){var h;h=e<this.J.length?this.J[e]:this.Xa[e-this.J.length];if(h.yb)return h}for(e=0;e<this.J.length+this.Xa.length;e++)if(h=e<this.J.length?this.J[e]:this.Xa[e-this.J.length],!h.Zc){var g=[],k=new m.ra,n,r,p;0<h.f&&(r=Math.tan(h.f/2*Math.PI/180),p=0<h.Ac?r*h.Sc/h.Ac:r,h.kd&&1!=h.kd&&(p*=h.kd));for(n=0;4>
n;n++){switch(n){case 0:k.Ya(-r,-p,-1);break;case 1:k.Ya(r,-p,-1);break;case 2:k.Ya(r,p,-1);break;case 3:k.Ya(-r,p,-1)}k.va(-h.j*Math.PI/180);k.Da(h.pan*Math.PI/180);k.Da(-this.pan.c*Math.PI/180);k.va(this.j.c*Math.PI/180);k.mb(this.N.c*Math.PI/180);g.push(k.clone())}g=this.ai(g);if(0<g.length){for(n=0;n<g.length;n++)k=g[n],.1>k.z?(l=-c/k.z,f=this.m.width/2+k.x*l,l=this.m.height/2+k.y*l):l=f=0,k.gc=f,k.Cb=l;if(this.fk(g,a,b))return h}}return null};b.prototype.Zg=function(){return document.webkitIsFullScreen||
document.mozFullScreen||document.msFullscreenElement&&null!=document.msFullscreenElement||document.fullScreen};b.prototype.nn=function(a){this.tl(a);if(this.Pc)this.Pc.onclick();this.Bd=null;if(!this.A.sb){a=a?a:window.event;if((a.which||0==a.which||1==a.which)&&this.od(a.target)){var b;(b=this.Zh(this.qa.x,this.qa.y))&&b.Tc&&(this.Bd=b);this.Bl(a.pageX,a.pageY);this.X.ib=!0;this.X.startTime=(new Date).getTime();a.preventDefault();this.pa()}this.Y.ba.x=0;this.Y.ba.y=0}};b.prototype.df=function(a,
b){var c=this.w.hj;c.enabled&&(this.za!=this.pb&&0<=a&&0<=b&&""!=this.za.title?(this.ta.innerHTML=this.za.title,this.ta.style.color=this.fa(c.ij,c.gj),c.background?this.ta.style.backgroundColor=this.fa(c.Pb,c.Ob):this.ta.style.backgroundColor="transparent",this.ta.style.border="solid "+this.fa(c.Sb,c.Rb)+" "+c.Vh+"px",this.ta.style.borderRadius=c.Uh+"px",this.ta.style.textAlign="center",0<c.width?(this.ta.style.left=a-c.width/2+this.margin.left+"px",this.ta.style.width=c.width+"px"):(this.ta.style.width=
"auto",this.ta.style.left=a-this.ta.offsetWidth/2+this.margin.left+"px"),this.ta.style.height=0<c.height?c.height+"px":"auto",this.ta.style.top=b+25+ +this.margin.top+"px",this.ta.style.visibility="inherit",this.ta.style.overflow="hidden"):(this.ta.style.visibility="hidden",this.ta.innerHTML=""))};b.prototype.tl=function(a){var b=this.de();this.Zg()?(this.qa.x=a.pageX-this.margin.left,this.qa.y=a.pageY-this.margin.top):(this.qa.x=a.pageX-b.x,this.qa.y=a.pageY-b.y);return b};b.prototype.Ye=function(a){a&&
null!==a&&"object"==typeof a?this.za=a:this.za=this.pb;this.za.Ge&&this.za.Ge();this.hotspot=this.za};b.prototype.mn=function(a){a=a?a:window.event;var b=this.tl(a);if(!this.A.sb){this.s.active&&(this.s.fh=(new Date).getTime());this.X.ib&&(a.preventDefault(),(a.which||0==a.which||1==a.which)&&this.Al(a.pageX,a.pageY),this.pa());var c=!1;if(this.za==this.pb||"poly"==this.za.type){var e=this.pb;0<this.P.length&&this.od(a.target)&&(e=this.$h(this.qa.x,this.qa.y));this.uh(e);this.df(a.pageX-b.x,a.pageY-
b.y);0!=e&&(c=!0)}a=null;c||(a=this.Zh(this.qa.x,this.qa.y));this.s.Ig&&(this.s.Ig=!1);this.Aa.style.cursor=this.za!=this.pb&&this.za.Ke&&c||a&&a.Ef?"pointer":"default"}};b.prototype.uh=function(a){!1===a&&(a=this.pb);this.za!=a&&(this.za!=this.pb&&(0<this.w.mode&&(this.za.gb=0),this.Qa&&this.Qa.hotspotProxyOut&&this.Qa.hotspotProxyOut(this.za.id)),a!=this.pb?(this.Ye(a),this.Qa&&this.Qa.hotspotProxyOver&&this.Qa.hotspotProxyOver(this.za.id),0<this.w.mode&&(this.w.gb=1,this.za.gb=1)):(this.Ye(this.pb),
0<this.w.mode&&(this.w.gb=0)),this.ha&&this.ha.changeCurrentHotspot(this.za.id))};b.prototype.ln=function(a){a=a?a:window.event;this.eh=-1;if(!this.A.sb&&this.X.ib){this.pa();a.preventDefault();this.X.ib=!1;a=(new Date).getTime();var b;b=Math.abs(this.Y.start.x-this.Y.ca.x)+Math.abs(this.Y.start.y-this.Y.ca.y);400>a-this.X.startTime&&0<=b&&20>b&&(this.Bd&&this.Bd.Tc(),(b=this.$h(this.qa.x,this.qa.y))&&this.ql(b),b=Math.abs(this.Y.qd.x-this.Y.ca.x)+Math.abs(this.Y.qd.y-this.Y.ca.y),700>a-this.Mf&&
0<=b&&20>b?(this.A.gi&&this.Eh(),this.Mf=0):this.Mf=a,this.Y.qd.x=this.Y.ca.x,this.Y.qd.y=this.Y.ca.y)}};b.prototype.Ck=function(a){if(!this.A.Xc&&(a=a?a:window.event,this.od(a.target))){var b=a.detail?-1*a.detail:a.wheelDelta/40;this.A.kk&&(b=-b);a.axis&&(-1==this.eh?this.eh=a.axis:this.eh!=a.axis&&(b=0));var c=0<b?1:-1;a.wheelDeltaX&&a.wheelDeltaY&&Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)&&(b=0);0!=b&&(this.pf(c*this.A.gl,!0),this.update());a.preventDefault();this.pa()}};b.prototype.Ho=function(a){a||
(a=window.event);var b=a.touches,c=this.de();this.qa.x=b[0].pageX-c.x;this.qa.y=b[0].pageY-c.y;this.bf=this.Bd=null;this.ni&&(this.ni=!1,this.um());if(!this.A.sb){if(!this.X.ib&&b[0]){this.X.startTime=(new Date).getTime();this.X.start.x=b[0].pageX;this.X.start.y=b[0].pageY;this.X.ca.x=b[0].pageX;this.X.ca.y=b[0].pageY;this.jc=b[0].target;if(this.od(a.target)){var e;(e=this.Zh(this.qa.x,this.qa.y))&&e.Tc&&(this.Bd=e);if(e=this.$h(this.qa.x,this.qa.y))this.L(e),this.bf=e,this.uh(e),e=this.Af(a),this.df(e.x-
c.x,e.y-c.y);this.Bl(b[0].pageX,b[0].pageY);this.X.Kj=b[0].identifier;this.X.ib=!0;a.preventDefault();this.pa()}if(this.jc){c=this.jc;for(e=!1;c&&c!=this.control;){if(c.onmouseover)c.onmouseover();c.onmousedown&&!e&&(c.onmousedown(),e=!0);c=c.parentNode}e&&a.preventDefault()}}1<b.length&&(this.X.ib=!1);!this.xi&&2==b.length&&b[0]&&b[1]&&(a=b[0].pageX-b[1].pageX,b=b[0].pageY-b[1].pageY,this.f.il=Math.sqrt(a*a+b*b),this.f.Qe=this.f.c);this.Y.ba.x=0;this.Y.ba.y=0}};b.prototype.um=function(){this.Kh&&
this.o.a&&(this.o.Wc||this.o.a.play(),this.o.a.muted=!1);if(this.Id){var a=this.Ha.createOscillator(),b=this.Ha.createGain();a.frequency.value=30;a.type="sine";a.connect(b);b.connect(this.Ha.destination);b.gain.value=.01;a.start(0);setTimeout(function(){a.stop()},1E4)}for(b=0;b<this.S.length;b++){var c=this.S[b];(!this.Cc(c.id)||c.ia)&&0<=c.loop&&c.autoplay&&(c.ia&&c.Ae(),this.le(c.id,c.loop))}for(b=0;b<this.J.length;b++)c=this.J[b],!this.Cc(c.id)&&c.autoplay&&this.Kh&&this.le(c.id,c.loop)};b.prototype.Go=
function(a){a||(a=window.event);var b=a.touches,c=this.de();this.qa.x=b[0].pageX-c.x;this.qa.y=b[0].pageY-c.y;if(!this.A.sb){b[0]&&(this.X.ca.x=b[0].pageX,this.X.ca.y=b[0].pageY);if(this.X.ib){a.preventDefault();for(var e=0;e<b.length;e++)if(b[e].identifier==this.X.Kj){this.Al(b[e].pageX,b[e].pageY);break}this.bf&&(e=this.Af(a),this.df(e.x-c.x,e.y-c.y));this.pa()}2==b.length&&b[0]&&b[1]&&(this.X.ib=!1,this.xi||(this.A.Xc||(c=b[0].pageX-b[1].pageX,b=b[0].pageY-b[1].pageY,this.f.Fj=Math.sqrt(c*c+b*
b),this.ua.f.active=!0,this.ua.f.Vb=this.f.Qe*Math.sqrt(this.f.il/this.f.Fj),4==this.ya()&&this.ua.f.Vb>this.f.max&&(this.ua.f.Vb=this.f.max),this.ua.f.Vb<this.f.min&&(this.ua.f.Vb=this.f.min)),this.pa(),a.preventDefault()))}};b.prototype.Fo=function(a){var b,c=this.de(),e=!1;if(!this.A.sb){this.X.ib&&this.pa();var f=(new Date).getTime(),l;b=Math.abs(this.X.start.x-this.X.ca.x)+Math.abs(this.X.start.y-this.X.ca.y);if(0<=b&&20>b){a.preventDefault();e=!0;this.od(this.jc)&&this.Bd&&this.Bd.Tc();if(this.jc)for(b=
this.jc,l=!1;b&&b!=this.control;)b.onclick&&!l&&(b.onclick(),l=!0,e=!1),b=b.parentNode;b=Math.abs(this.X.qd.x-this.X.ca.x)+Math.abs(this.X.qd.y-this.X.ca.y);if(700>f-this.Mf&&0<=b&&20>b){a.preventDefault();if(this.od(this.jc)&&this.A.gi){var h=this;setTimeout(function(){h.Eh()},1)}if(this.jc)for(b=this.jc,l=!1;b&&b!=this.control;)b.ondblclick&&!l&&(b.ondblclick(),l=!0,e=!1),b=b.parentNode;this.Mf=0}else this.Mf=f;this.X.qd.x=this.X.ca.x;this.X.qd.y=this.X.ca.y}if(this.jc)for(a.preventDefault(),b=
this.jc,l=!1;b&&b!=this.control;){if(b.onmouseout)b.onmouseout();b.onmouseup&&!l&&(b.onmouseup(),l=!0);b=b.parentNode}a=this.Af(a);this.df(a.x-c.x,a.y-c.y);this.bf&&e&&this.ql(this.bf);this.jc=null;this.X.ib=!1;this.uh(this.pb);this.bf=null}};b.prototype.Eo=function(a){var b=this.de();this.A.sb||(this.X.ib=!1);this.bf=null;this.uh(this.pb);a=this.Af(a);this.df(a.x-b.x,a.y-b.y)};b.prototype.gn=function(){return null!=this.jc||this.X.ib};b.prototype.Dk=function(a){!this.ie&&window.MSGesture&&(this.L("setup gesture"),
this.ie=new MSGesture,this.ie.target=this.control);this.ie&&this.ie.addPointer(a.pointerId)};b.prototype.Tj=function(a){this.xi=!0;this.jh=1;this.A.sb||this.A.Xc||(a.touches?(this.jc=a.touches.target,this.od(a.target)&&(a.preventDefault(),this.f.Qe=this.f.c,this.pa())):(a.preventDefault(),this.f.Qe=this.f.c,this.pa()))};b.prototype.wm=function(a){this.A.sb||this.A.Xc||!this.od(a.target)||(a.preventDefault(),this.ua.f.active=!0,this.ua.f.Vb=this.f.Qe/Math.sqrt(a.scale),4==this.ya()&&this.ua.f.Vb>this.f.max&&
(this.ua.f.Vb=this.f.max),this.update(),this.pa())};b.prototype.qn=function(a){this.A.sb||this.A.Xc||(a.preventDefault(),1!=a.scale&&(this.ua.f.active=!0,this.jh*=a.scale,this.ua.f.Vb=this.f.Qe/Math.sqrt(this.jh),4==this.ya()&&this.ua.f.Vb>this.f.max&&(this.ua.f.Vb=this.f.max),this.update(),this.pa()))};b.prototype.Sj=function(a){this.A.sb||this.A.Xc||(this.ua.f.active=!1,a.preventDefault(),this.pa(),this.ie&&this.ie.reset&&this.ie.reset())};b.prototype.hn=function(a){this.A.Oe||(this.isFullscreen&&
a.preventDefault(),this.fe=a.keyCode,this.pa())};b.prototype.jn=function(a){this.fe&&(this.fe=0,a.preventDefault(),this.pa())};b.prototype.vn=function(){this.fe=0};b.prototype.lh=function(){this.isFullscreen&&(this.Zg()||this.exitFullscreen(),this.Zg()&&(this.U.style.left="0px",this.U.style.top="0px"))};b.prototype.ql=function(a){this.Qa&&this.Qa.hotspotProxyClick&&this.Qa.hotspotProxyClick(a.id);""!=a.url&&(this.Ni(a.url,a.target),this.df(-1,-1))};b.prototype.Ed=function(){return Math.min(1,2*Math.tan(Math.PI*
Math.min(this.f.c,90)/360))};b.prototype.Kk=function(){var a=this;setTimeout(function(){a.Kk()},100);9!=a.ph||a.Yg||window.requestAnimationFrame(function(){a.Xf();a.Yc("restart recover timer")});10<a.ph&&1<a.Ti&&(a.Yc("recover timer - disabling requestAnimationFrame"),a.Yg=!0,a.Xf());a.ph++};b.prototype.al=function(a){var b={ap:{value:0,name:"pan"},bp:{value:1,name:"tilt"},Zo:{value:2,name:"fov"}},c=0,e=0,f=0,l;for(l in b){var h=b[l],g;for(g=Math.floor(a);!this.Ie(g,h.value)&&0<g;)g--;var k=this.Ie(g,
h.value),n=this.Jm(k);if(n){g=new m.kc(k.time,k.value);var r=new m.kc(n.time,n.value),p=(a-k.time)/(n.time-k.time);if(0!=k.type||0!=n.type&&3!=n.type)if(3==k.type)g=k.value;else{var p=new m.kc,u=new m.kc,t=n.time-k.time;0==k.type?u.Ya(k.time+.3*t,k.value):u.Ya(k.Vd,k.Wd);0==n.type||3==n.type?p.Ya(n.time-.3*t,n.value):p.Ya(n.Ud,n.Ic);k=new m.kc;k.Th(g,r,u,p,a);g=k.y}else k=new m.kc,k.md(g,r,p),g=k.y}else g=k.value;switch(h.value){case 0:h=this.pan.c;if(this.zd){if(2!=this.kb){for(;360<g;)g-=360;for(;-360>
g;)g+=360}c=g-h;2!=this.kb&&(180<c&&(c-=360),-180>c&&(c+=360));this.pan.c=this.pan.c+c*this.ed}else this.pan.c=g;break;case 1:h=this.j.c;this.zd?(e=g-h,this.j.c=this.j.c+e*this.ed):this.j.c=g;break;case 2:h=this.f.c,this.zd?(f=g-h,this.f.c=this.f.c+f*this.ed):this.f.c=g}}b=this.ya();for(l=Math.floor(a);!this.Ie(l,3)&&0<l;)l--;l=this.Ie(l,3);h=a-l.time;this.zd&&-1!=this.kf&&this.zg+this.Qh>a?(b=this.zf(this.kf),this.f.c>b?this.zg=a:(a=(a-this.zg)/this.Qh,a=Math.min(1,a),this.$c(this.Za,this.kf,1-a))):
0==l.nb||h>l.nb-.3?this.$c(l.value):(a=h/l.nb,this.$c(b,l.value,1-a));this.zd&&(c=Math.sqrt(c*c+e*e+f*f),.3>c&&(this.zd=!1,this.ed=.02,this.jf=0),0<this.jf&&c>this.jf&&(this.ed+=.01,this.ed=Math.min(this.ed,1)),this.jf=c);this.update()};b.prototype.Bn=function(a){var b,c=this.v.speed;this.v.Bi&&(c=c*(a.getTime()-this.v.Bi)/60,5<c&&(c=5),.2>c&&(c=.2));this.v.Bi=a.getTime();this.s.Pg&&(this.la.ready()||4==this.Za)&&this.Rg()&&(this.s.Pg=!1,this.s.active=!0,this.qb.ud=!0,this.qb.mi=!1);if(this.v.active||
0!=this.v.Bb&&this.la.ready()){if(this.v.mj&&"__AutoMove"==this.D.Ta)if(b=a.getTime()-this.v.uj,c=b/100,c>=this.D.length){if(this.Ia.splice(this.Ia.indexOf(this.D),1),this.v.active=!1,this.D=this.v.tj,this.v.Bb=0,b=this.s.dd,this.eg(this.v.pan,this.v.j,this.v.f),this.v.Ki&&(this.v.Ki=!1,this.s.Ji=!0,this.s.active=!0,this.s.dd=b),this.onMoveComplete)this.onMoveComplete()}else this.al(c);else{this.pan.d=this.v.pan-this.pan.c;if(360==this.pan.max-this.pan.min){for(;-180>this.pan.d;)this.pan.d+=360;for(;180<
this.pan.d;)this.pan.d-=360}this.j.d=this.v.j-this.j.c;this.N.d=this.v.N-this.N.c;this.f.d=this.v.f-this.f.c;b=c*this.Ed();var e=Math.sqrt(this.pan.d*this.pan.d+this.j.d*this.j.d+this.N.d*this.N.d+this.f.d*this.f.d),f=this.pan.c-this.v.vk,g=this.j.c-this.v.xk,h=this.N.c-this.v.wk,k=this.f.c-this.v.uk;100*Math.sqrt(f*f+g*g+h*h+k*k)<b&&0==this.v.Bb&&(this.v.ve=!0);this.v.vk=this.pan.c;this.v.xk=this.j.c;this.v.wk=this.N.c;this.v.uk=this.f.c;if(100*e<b||this.v.ve){if(this.pan.d=0,this.j.d=0,this.N.d=
0,this.f.d=0,this.v.active&&(this.v.active=!1,this.pan.c=this.v.pan,this.j.c=this.v.j,this.N.c=this.v.N,this.f.c=this.v.f,this.onMoveComplete))this.onMoveComplete()}else e=e>5*b?b/e:.2,this.pan.d*=e,this.j.d*=e,this.f.d*=e;this.pan.c+=this.pan.d;this.j.c+=this.j.d;this.N.c+=this.N.d;this.f.c+=this.f.d;0!=this.v.Bb&&(this.v.Bb!=this.Za?(c=this.zf(this.v.Bb),this.yf()>c?(this.f.c+=-Math.max((2.5-1.7*Math.min(Math.sqrt(this.pan.d*this.pan.d+this.j.d*this.j.d+this.N.d*this.N.d)/b,1))*b,this.f.d)-this.f.d,
this.v.f=this.f.c):(this.fc=this.Za,this.Za=this.v.Bb,this.L("New projection from Target:"+this.Za),this.Wf=this.v.Zf=0,this.la.Wg())):1>this.v.Zf?(this.v.Zf=Math.min(1,this.v.Zf+.05*c),this.Wf=this.v.Zf):(this.fc=0,this.v.Bb=0,this.la.Wg()))}this.Me=a.getTime();this.update()}else if(this.s.active){b=a.getTime()-this.s.startTime;this.s.fh<this.s.startTime&&(this.s.fh=this.s.startTime);if((this.s.nj||this.s.dd||this.qb.ud)&&0<this.Ia.length){c=b/100;e=!1;if(this.zb!=this.D.Ta){for(b=0;b<this.Ia.length;b++)if(""==
this.zb||""!=this.zb&&this.Ia[b].Ta==this.zb){e=!0;this.D=this.Ia[b];this.zb=this.D.Ta;break}!e&&0<this.Ia.length&&(e=!0,this.D=this.Ia[0],this.zb=this.D.Ta)}else e=!0;if(e)if(b=(f=this.o.a&&this.o.Wc)&&this.s.fj&&!this.qb.ud,this.lf){e=c;if(b)for(this.o.a.currentTime<this.vj&&this.Sh&&(this.Rh++,this.Sh=!1),e=10*(this.Rh*this.o.a.duration+this.o.a.currentTime),this.vj=this.o.a.currentTime,.05>this.o.a.duration-this.o.a.currentTime&&(this.Sh=!0);e>=10*this.we;)e-=10*this.we;if(!f&&c>=this.D.length||
f&&!b&&c>=this.D.length||f&&b&&this.D.Ta!=this.D.Fk&&c>=this.D.length){this.lf=!1;if(this.qb.ud){this.qb.ud=!1;this.qb.mi=!0;this.s.active=this.B.Td;this.Ia.splice(this.Ia.indexOf(this.D),1);0<this.Ia.length&&(this.D=this.Ia[0]);this.zb="";this.cg(this.B.hh);this.dg(this.B.Mh);this.bg(this.B.bh);this.B.Td=!1;this.Me=a.getTime();return}this.zb=this.D.Fk;if(this.zb==this.D.Ta){if(1<this.La.length&&0<this.s.kh){if(this.s.Li){b=1E3;do c=this.La[Math.floor(Math.random()*this.La.length)];while(b--&&c==
this.Ub)}else c=this.Wj();this.je("{"+c+"}");this.s.startTime=a.getTime();this.lf=!1;this.s.active=!0;this.B.Td=!0}}else this.Lf&&this.D.Ek!=this.Ub&&(this.je("{"+this.D.Ek+"}"),this.B.enabled?(this.s.active=!1,this.B.Td=!0):this.s.active=!0),this.s.startTime=a.getTime()}else this.al(e)}else if(c=this.D.ja[0],e=this.D.ja[1],f=this.D.ja[2],g=this.D.ja[3],3!=g.vb&&(g=0),this.s.Ji||this.v.ve||this.qb.ud||b){if(this.lf=!0,this.s.startTime=a.getTime(),this.zd=b){for(this.we=this.Rh=0;this.we<this.D.length/
10;)this.we+=this.o.a.duration;e=10*this.o.a.currentTime;for(b=Math.floor(e);!this.Ie(b,3)&&0<b;)b--;b=this.Ie(b,3);b.value==this.Za?this.kf=-1:(this.kf=b.value,this.zg=e,this.Qh=Math.max(5,b.time+b.nb-e))}}else{b=this.s.dd;h={};for(h.pan=c.value;360<h.pan;)h.pan-=360;for(;-360>h.pan;)h.pan+=360;h.tilt=e.value;h.fov=f.value;h.projection=g?g.value:4;h.timingFunction=3;h.speed=1;this.v.Ki=!0;this.ih(h);this.s.active=!0;this.s.dd=b}}else if(0<this.s.kh&&this.Lf&&b>=1E3*this.s.kh){if(1<this.La.length){if(this.s.Li){b=
1E3;do c=this.La[Math.floor(Math.random()*this.La.length)];while(b--&&c==this.Ub)}else b=this.La.indexOf(this.Ub),b++,b>=this.La.length&&(b=0),c=this.La[b];this.s.startTime=a.getTime();this.s.pd=a.getTime();this.s.timeout=0;this.je("{"+c+"}");this.s.active=!0;this.B.Td=!0}}else b=a.getTime(),e=c=1E3/60,0!=this.s.pd&&(e=b-this.s.pd),this.j.d=this.s.Ch*(0-this.j.c)/100,this.f.d=this.s.Ch*(this.f.Pa-this.f.c)/100,this.pan.d=.95*this.pan.d+-this.s.speed*this.Ed()*.05,c=e/c,this.pan.c+=this.pan.d*c,this.j.c+=
this.j.d*c,this.f.c+=this.f.d*c,this.s.pd=b,this.update();3E3<a.getTime()-this.s.fh&&!this.s.Ig&&(this.Aa.style.cursor="none",this.s.Ig=!0)}else!this.qb.mi&&1E3<a.getTime()-this.Me&&(this.Ia.splice(this.Ia.indexOf(this.D),1),this.D=this.xf(!1),this.zb=this.D.Ta,this.s.active=!1,this.s.Pg=!0),this.s.enabled&&!this.X.ib&&a.getTime()-this.Me>1E3*this.s.timeout&&(this.s.mg&&this.Rg()||!this.s.mg)&&(this.s.active=!0,this.s.startTime=a.getTime(),this.s.pd=0,this.pan.d=0,this.j.d=0,this.f.d=0),!this.ua.enabled||
0!=this.fe||this.X.ib||0==this.pan.d&&0==this.j.d&&0==this.f.d||(this.pan.d*=.9,this.j.d*=.9,this.f.d*=.9,this.pan.c+=this.pan.d,this.j.c+=this.j.d,this.pf(this.f.d),1E-4>this.pan.d*this.pan.d+this.j.d*this.j.d+this.f.d*this.f.d&&(this.pan.d=0,this.j.d=0,this.f.d=0),this.update())};b.prototype.Dn=function(a){var b=this.B;if(b.yd){var c=a.getTime()-b.Fl,c=c/(1E3*b.El);if(1<=c){b.yd=!1;for(c=0;c<this.Ea.pg.length;c++)this.Ea.ki(this.Ea.pg[c]);b.cj=a.getTime();this.kl();b.se=!0;0==b.Nb||b.hf||(4==b.Nb?
(this.D=this.xf(!0,b.oe,b.pe,b.xd),this.zb=this.D.Ta,this.s.active=!0,this.qb.ud=!0):this.moveTo(b.oe,b.pe,b.xd,b.Rd,0,b.ad))}else b.Jk(c)}else b.se&&(c=a.getTime()-b.cj,c/=1E3*b.Ag,1<=c?(b.se=!1,this.Me=a.getTime(),this.update(),0!=b.Nb&&b.hf&&(4==b.Nb?(this.D=this.xf(!0,b.oe,b.pe,b.xd),this.zb=this.D.Ta,this.s.active=!0,this.qb.ud=!0):this.moveTo(b.oe,b.pe,b.xd,b.Rd,0,b.ad)),4!=b.Nb&&(this.cg(b.hh),this.dg(b.Mh),this.bg(b.bh),this.s.active=b.Td,b.Td=!1),this.s.pd=0,this.ga&&this.bi(),this.Dg=!1):
b.Jk(c));b=this.wn;b.Xl&&(b.Kg?a.getTime()-b.ii>=1E3*b.pm&&(b.Kg=!1):(b.current+=b.Jc,0>b.current&&(b.current=0,b.Jc=-b.Jc,b.Kg=!0,b.ii=a.getTime()),1<b.current&&(b.current=1,b.Jc=-b.Jc,b.Kg=!0,b.ii=a.getTime())))};b.prototype.Hn=function(){var a,b=this.w;if(0<b.fb.length){for(a=0;a<b.fb.length;a++)b.Ec[a]!=b.Eb[a]&&(b.Ec[a]>b.Eb[a]?(b.Eb[a]+=.05,b.Ec[a]<b.Eb[a]&&(b.Eb[a]=b.Ec[a])):(b.Eb[a]-=.05,b.Ec[a]>b.Eb[a]&&(b.Eb[a]=b.Ec[a],-1!=b.xh.indexOf(b.fb[a])&&(b.xh.splice(b.xh.indexOf(b.fb[a]),1),b.fb.splice(a,
1),b.Ec.splice(a,1),b.Eb.splice(a,1)))));this.update()}if(2==b.mode)for(a=0;a<this.P.length;a++){var c=this.P[a];"poly"==c.type&&c.gb!=c.na&&(c.gb>c.na?(c.na+=b.Jc,c.gb<c.na&&(c.na=c.gb)):(c.na-=b.Jc,c.gb>c.na&&(c.na=c.gb)),this.update())}3==b.mode&&b.gb!=b.na&&(b.gb>b.na?(b.na+=b.Jc,b.gb<b.na&&(b.na=b.gb)):(b.na-=b.Jc,b.gb>b.na&&(b.na=b.gb)),this.update())};b.prototype.Gn=function(){var a=this.ua;this.X.ib&&(this.A.nd?(a.ba.x=.4*(this.Y.ca.x-a.ca.x),a.ba.y=.4*(this.Y.ca.y-a.ca.y),a.ca.x+=a.ba.x,
a.ca.y+=a.ba.y):(a.ba.x=.1*-this.Y.ba.x*this.A.sensitivity/8,a.ba.y=.1*-this.Y.ba.y*this.A.sensitivity/8),this.zl(a.ba.x,a.ba.y),this.update());a.f.active&&(this.yj(.4*(a.f.Vb-this.f.c)),.001>Math.abs(a.f.Vb-this.f.c)/this.f.c&&(a.f.active=!1),this.update());if(a.enabled&&(0!=a.ba.x||0!=a.ba.y)&&!this.X.ib){var b=.9*(1-a.Xi);a.ba.x=b*a.ba.x;a.ba.y=b*a.ba.y;.01>a.ba.x*a.ba.x+a.ba.y*a.ba.y?(a.ba.x=0,a.ba.y=0):(this.zl(a.ba.x,a.ba.y),this.update())}};b.prototype.Cn=function(){if(this.A.Xk&&this.A.nd){var a=
new k;a.pan=this.pan.c;a.j=this.j.c;a.f=this.f.c;this.Ce(a);this.Ce(a);this.Ce(a);var b=a.pan-this.pan.c,c=a.j-this.j.c,a=a.f-this.f.c;if(0!=b||0!=c||0!=a){var e;e=.2+.9*Math.min((Math.abs(b)+Math.abs(c)+Math.abs(a))/Math.abs(Math.min(this.f.c,100))*.3,1);this.pan.c+=b*e;this.j.c+=c*e;this.f.c+=a*e;this.ua.Xi=.3;this.update()}else this.ua.Xi=0}else this.Eg();if(2!=this.kb){for(;360<this.pan.c;)this.pan.c-=360;for(;-360>this.pan.c;)this.pan.c+=360}};b.prototype.En=function(){if(0!=this.fe){var a=this.A.sensitivity/
8;switch(this.fe){case 37:case 65:this.Bg(a*this.Ed(),!0);break;case 38:case 87:this.Cg(a*this.Ed(),!0);break;case 39:case 68:this.Bg(-a*this.Ed(),!0);break;case 40:case 83:this.Cg(-a*this.Ed(),!0);break;case 43:case 107:case 16:case 81:this.A.Fi||this.pf(-a,!0);break;case 17:case 18:case 109:case 45:case 91:case 69:this.A.Fi||this.pf(a,!0)}this.update()}};b.prototype.Fn=function(){if(!this.Rg()&&this.Ff&&5<this.h.Uk){var a,b=0,c=this.Gb.length;if(this.sg)c=50,this.ji<c&&this.ji++,b=this.ji;else for(a=
0;a<c;a++)(this.Gb[a].complete&&this.Gb[a].src!=this.Ij||""==this.Gb[a].src)&&b++;b==c?(this.nh=1,this.isLoaded=!0,this.O&&this.O.ggLoaded&&this.O.ggLoaded(),this.s.mg&&this.s.enabled&&!this.v.active&&!this.B.yd&&(this.s.active=!0,this.s.startTime=(new Date).getTime(),this.s.pd=0)):this.nh=b/(1*c)}};b.prototype.Xf=function(){var a=this;a.sh||(a.Yg?setTimeout(function(){a.sh=!1;a.Xf()},1E3/60):window.requestAnimationFrame(function(){a.sh=!1;a.Xf()}));a.sh=!0;this.Ti=this.ph=0;var b=new Date;this.Qg++;
120<=this.Qg&&(this.L("F/s: "+Math.round(1E3*this.Qg/(b.getTime()-this.sk))),this.sk=b.getTime(),this.Qg=0);this.wb&&""!==this.ce&&!this.ha&&document.hasOwnProperty(this.ce)&&document[this.ce].setPan&&0==this.tm--&&(this.ha=document[this.ce],this.Fc=this.Z=!1,this.sa&&(this.sa.style.visibility="hidden"),this.ha.setLocked(!0),this.ha.setSlaveMode(!0),this.ha.readConfigString(this.ei),this.Yc("Flash player '"+this.ce+"' connected."));this.lj&&(this.cd(),this.lj=!1);this.Gn();this.En();this.Fn();this.Bn(b);
this.Cn();this.Dn(b);this.la.Oo();(0<=this.w.mode||0<this.w.fb.length)&&this.Hn();this.Ih();this.xa&&(0<this.Lg?this.Lg--:(this.xa=!1,this.Lg=0),this.B.se||this.B.yd||this.rg())};b.prototype.zf=function(a){switch(a){case 4:a=Math.min(110,this.f.max);break;case 12:a=Math.min(270,this.f.Hi);a=Math.min(360*this.Sd(),a);a=Math.min(360/this.Sd(),a);break;case 9:a=Math.min(270,this.f.Ii);break;default:a=90}return a};b.prototype.vl=function(){var a=this;setTimeout(function(){a.Ze(!1)},10);setTimeout(function(){a.Ze(!1)},
100)};b.prototype.Ih=function(){this.di.Lj(this.pan.c,this.j.c);for(var a=0;a<this.S.length+this.J.length;a++){var b;if(a<this.S.length)b=this.S[a];else if(b=this.J[a-this.S.length],b.Zc)continue;b.Ih()}};b.prototype.Gj=function(a){var b="",c,e,f,g,h,k=0;a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),
h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),c=c<<2|e>>4,e=(e&15)<<4|g>>2,f=(g&3)<<6|h,b+=String.fromCharCode(c),64!=g&&(b+=String.fromCharCode(e)),64!=h&&(b+=String.fromCharCode(f));while(k<a.length);return b};b.prototype.po=function(a,b){var c,e,f=this;if(0!=f.Tf.length||!f.A.Gf||f.A.sf||f.A.Fg)if(f.Pc)f.Pc=null,f.U.removeChild(f.Pc);else{f.Pc=document.createElement("div");var g=f.Pc;c="left: "+a+"px;"+("top:\t "+b+"px;")+"z-index: 32000;";c+="position:relative;";
c+="display: table;";c+="background-color: white;";c+="border: 1px solid lightgray;";c+="box-shadow: 1px 1px 3px #333;";c+="font-family: Verdana, Arial, Helvetica, sans-serif;";c+="font-size: 9pt;";c+="opacity : 0.95;";g.setAttribute("style",c);g.setAttribute("class","gg_contextmenu");c=document.createElement("style");e=document.createTextNode(".gg_context_row:hover { background-color: #3399FF }");c.type="text/css";c.styleSheet?c.styleSheet.cssText=e.nodeValue:c.appendChild(e);g.appendChild(c);for(e=
0;e<f.Tf.length;e++){var h=f.Tf[e],k=document.createElement("div");c="text-align: left;";c+="margin: 0;";c+="padding: 5px 20px;";c+="vertical-align: left;";k.setAttribute("style",c);k.setAttribute("class","gg_context_row");c=document.createElement("a");c.href=h.url;c.target="_blank";c.innerHTML=h.text;c.setAttribute("style","color: black; text-decoration: none;");k.appendChild(c);g.appendChild(k)}0<f.Tf.length&&(!f.A.Gf||f.A.sf||f.A.Fg)&&g.appendChild(document.createElement("hr"));if(f.A.Fg&&f.Z){h=
[];h.push({text:"Rectilinear Projection",Yf:4});h.push({text:"Stereographic Projection",Yf:9});h.push({text:"Fisheye Projection",Yf:12});for(e=0;e<h.length;e++){var k=h[e],m=document.createElement("div");m.setAttribute("class","gg_context_row");c="text-align: left;";c+="margin: 0;";c=f.Za==k.Yf?c+"padding: 5px 20px 5px 7px;":c+"padding: 5px 20px;";c+="vertical-align: left;";c+="cursor: pointer;";m.setAttribute("style",c);m.onclick=function(a){return function(){f.Yh(a,1);f.update()}}(k.Yf);f.Za==k.Yf?
m.innerHTML="&#10687; "+k.text:m.innerHTML=k.text;g.appendChild(m)}f.A.Gf&&!f.A.sf||g.appendChild(document.createElement("hr"))}f.A.sf&&(e=document.createElement("div"),e.setAttribute("class","gg_context_row"),c="text-align: left;margin: 0;padding: 5px 20px;",c+="vertical-align: left;",c+="cursor: pointer;",e.setAttribute("style",c),e.onclick=function(){f.Eh()},e.innerHTML=f.Zg()?"Exit Fullscreen":"Enter Fullscreen",g.appendChild(e));c="<<L>>"+String(f.Ja);c=c.toUpperCase();f.A.Gf&&"U"==c.charAt(2)||
(e=document.createElement("div"),c="text-align: left;margin: 0;padding: 5px 20px;",c+="vertical-align: left;",e.setAttribute("style",c),e.setAttribute("class","gg_context_row"),c=document.createElement("a"),c.href=f.Gj("aHR0cDovL3Bhbm8ydnIuY29tLw=="),c.target="_blank",c.innerHTML=f.Gj("Q3JlYXRlZCB3aXRoIFBhbm8yVlI="),c.setAttribute("style","color: black; text-decoration: none;"),e.appendChild(c),g.appendChild(e));f.U.insertBefore(f.Pc,f.U.firstChild);g.onclick=function(){f.Pc&&(f.U.removeChild(f.Pc),
f.Pc=null)};g.oncontextmenu=g.onclick}};b.prototype.Wl=function(){var a=this,b;b=a.Aa;a.control=b;a.control=b;a.vl();setTimeout(function(){a.Xf()},10);setTimeout(function(){a.Kk()},200);setTimeout(function(){a.ue();a.rg()},10);b.addEventListener&&(b.addEventListener("touchstart",function(b){a.Ho(b)},!1),b.addEventListener("touchmove",function(b){a.Go(b)},!1),b.addEventListener("touchend",function(b){a.Fo(b)},!1),b.addEventListener("touchcancel",function(b){a.Eo(b)},!1),b.addEventListener("pointerdown",
function(b){a.Dk(b)},!1),b.addEventListener("MSPointerDown",function(b){a.Dk(b)},!1),b.addEventListener("MSGestureStart",function(b){a.Tj(b)},!1),b.addEventListener("MSGestureEnd",function(b){a.Sj(b)},!1),b.addEventListener("MSGestureChange",function(b){a.qn(b)},!1),b.addEventListener("gesturestart",function(b){a.Tj(b)},!1),b.addEventListener("gesturechange",function(b){a.wm(b)},!1),b.addEventListener("gestureend",function(b){a.Sj(b)},!1),b.addEventListener("mousedown",function(b){a.nn(b)},!1),b.addEventListener("mousemove",
function(b){a.mn(b)},!1),document.addEventListener("mouseup",function(b){a.ln(b)},!1),b.addEventListener("mousewheel",function(b){a.Ck(b)},!1),b.addEventListener("DOMMouseScroll",function(b){a.Ck(b)},!1),document.addEventListener("keydown",function(b){a.hn(b)},!1),document.addEventListener("keyup",function(b){a.jn(b)},!1),window.addEventListener("orientationchange",function(){a.vl()},!1),window.addEventListener("resize",function(){a.ue()},!1),window.addEventListener("blur",function(){a.vn()},!1),
a.U.addEventListener("webkitfullscreenchange",function(){a.lh()},!1),document.addEventListener("mozfullscreenchange",function(){a.lh()},!1),window.addEventListener("webkitfullscreenchange",function(){a.lh()},!1),document.addEventListener("MSFullscreenChange",function(){a.lh()},!1));b.oncontextmenu=function(b){void 0===b&&(b=window.event);if(b.target&&!a.od(b.target))return!0;if(!b.ctrlKey){b=a.Af(b);var d=a.de();a.po(b.x-d.x,b.y-d.y);return!1}return!0}};b.prototype.sj=function(){for(var a=0;a<this.P.length;a++)if("point"==
this.P[a].type&&(this.Qa&&this.Qa.addSkinHotspot?(this.P[a].Ge(),this.P[a].a=new this.Qa.addSkinHotspot(this.P[a])):this.P[a].a=new m.Gl(this,this.P[a]),this.P[a].a.__div.style.left="-1000px",this.P[a].a.__div.style.top="-1000px",this.P[a].a&&this.P[a].a.__div)){var b=this.Aa.firstChild;b?this.Aa.insertBefore(this.P[a].a.__div,b):this.Aa.appendChild(this.P[a].a.__div)}};b.prototype.Dl=function(){var a,b=document.createElement("fakeelement"),c={OTransition:"oTransitionEnd",MSTransition:"msTransitionEnd",
MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",transition:"transitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a]};b.prototype.Ib=function(a){var b=[];a=new RegExp(a,"");for(var c=0;c<this.S.length;c++)a.test(this.S[c].id)&&b.push(this.S[c]);for(c=0;c<this.J.length;c++)a.test(this.J[c].id)&&b.push(this.J[c]);for(c=0;c<this.Xa.length;c++)a.test(this.Xa[c].id)&&b.push(this.Xa[c]);return b};b.prototype.Im=function(a){if("_videopanorama"==a)return this.o.a;a=this.Ib(a);return 0<
a.length?a[0].a:null};b.prototype.Pk=function(a,b){for(var c=0;c<this.J.length;c++)if(this.J[c].id==a)return this.J[c].a=b,this.J[c];c=new m.Yk(this);c.registerElement(a,b);return c};b.prototype.Cc=function(a){if(this.wb){var b=this.ha;if(b)return b.isPlaying(a)}else{if("_main"===a)return!0;a=this.Ib(a);if(0<a.length)return a[0].ia?a[0].me:!a[0].a.ended&&!a[0].a.paused}return!1};b.prototype.le=function(a,b){if(this.wb){var c=this.ha;c&&c.playSound(a,b)}else try{for(var c=this.Ib(a),e=0;e<c.length;e++){var f=
c[e];f.Nc=b&&!isNaN(Number(b))?Number(b)-1:f.loop-1;-1==f.Nc&&(f.Nc=1E7);this.L(f.a);this.Cc(a)&&this.ej(a);f.ia?f.Kc():f.a.play()}}catch(g){this.L(g)}};b.prototype.Lk=function(a,b){for(var c=this.Ib(a),e=0;e<c.length;e++){var f=c[e];this.Cc(f.id)?this.Oi(f.id):this.le(f.id,b)}};b.prototype.In=function(a,b){for(var c=this.Ib(a),e=0;e<c.length;e++){var f=c[e];this.Cc(f.id)?this.ej(f.id):this.le(f.id,b)}};b.prototype.Oi=function(a){if(this.wb){var b=this.ha;b&&b.pauseSound(a)}else try{if("_main"==a){for(b=
0;b<this.S.length;b++)this.S[b].ia?this.S[b].Wh():this.S[b].a.pause();for(b=0;b<this.J.length;b++)this.J[b].a.pause()}else for(var c=this.Ib(a),b=0;b<c.length;b++){var e=c[b];e.ia?e.Wh():e.a.pause()}}catch(f){this.L(f)}};b.prototype.Rl=function(a,b){for(var c=this.Ib(a),e=0;e<c.length;e++){var f=c[e];0==b||1==b?f.Cf&&f.Cf(1==b):2==b&&f.Tc&&f.Tc()}};b.prototype.ej=function(a){var b;if(this.wb)(b=this.ha)&&b.stopSound(a);else try{if("_main"===a){for(b=0;b<this.S.length;b++)this.S[b].ia?this.S[b].Ae():
(this.S[b].a.pause(),this.S[b].a.currentTime=0);for(b=0;b<this.J.length;b++)this.J[b].a.pause(),this.J[b].a.currentTime=0}else{var c=this.Ib(a);for(b=0;b<c.length;b++){var e=c[b];e.ia?e.Ae():e.a&&e.a.pause&&(e.a.pause(),e.a.currentTime=0,this.If&&(e.td(),e.addElement()))}}}catch(f){this.L(f)}};b.prototype.ro=function(a){a=this.Ib(a);return 0<a.length?(a=a[0],a.ia?a.Zl():a.a?a.a.currentTime:0):0};b.prototype.so=function(a,b){var c=this.Ib(a);0<c.length&&(c=c[0],c.ia?(0>b&&(b=0),b>c.mf.duration&&(b=
c.mf.duration-.1),c.$l(b)):c.a&&(0>b&&(b=0),b>c.a.duration&&(b=c.a.duration-.1),c.a.currentTime=b))};b.prototype.mo=function(a,b){if(this.wb){var c=this.ha;c&&c.setVolume(a,b)}else try{var e=Number(b);1<e&&(e=1);0>e&&(e=0);"_videopanorama"===a&&this.o.a&&(this.o.a.volume=e);if("_main"===a){this.W=e;for(c=0;c<this.S.length;c++)this.S[c].a.volume=this.S[c].level*this.W;for(c=0;c<this.J.length;c++)this.J[c].a.volume=this.J[c].level*this.W;this.o.a&&(this.o.a.volume=this.W)}else{var f=this.Ib(a);this.L(f);
for(c=0;c<f.length;c++){var g=f[c];g.a&&null!=g.a.volume&&(g.a.volume=e*this.W);g.level=e}}}catch(h){this.L(h)}};b.prototype.gm=function(a,b){if(this.wb){var c=this.ha;c&&c.changeVolume(a,b)}else try{var e;"_videopanorama"===a&&this.o.a&&(this.o.a.volume=this.o.a.volume+Number(b));if("_main"===a){c=this.W;c+=Number(b);1<c&&(c=1);0>c&&(c=0);this.W=c;for(e=0;e<this.S.length;e++)this.S[e].a.volume=this.S[e].level*this.W;for(e=0;e<this.J.length;e++)this.J[e].a.volume=this.J[e].level*this.W;this.o.a&&
(this.o.a.volume=this.W)}else{var f=this.Ib(a);for(e=0;e<f.length;e++){var g=f[e],c=g.level,c=c+Number(b);1<c&&(c=1);0>c&&(c=0);g.level=c;g.a&&null!=g.a.volume&&(g.a.volume=c*this.W)}}}catch(h){this.L(h)}};b.prototype.kl=function(){try{for(var a=this,b=!1,c=!1,e=0;e<this.S.length;e++){var f=this.S[e];-1==f.loop||this.Cc(f.id)||(this.Ha&&this.Ea.enabled&&4!=f.mode&&6!=f.mode?this.Ea.Dj?(f.ia?f.Kc():(f.a.play(),f.a.currentTime=0),f.ka=0,c=!0):b=!0:4==f.mode||6==f.mode||"_background"==f.id&&this.Cc(f.id)||
(f.ia?f.Kc():(f.a.play(),f.a.currentTime&&(f.a.currentTime=0))))}b&&setTimeout(function(){a.Ea.xo()},1E3*this.Ea.nb);c&&(this.Ea.uo=this.Ha.currentTime,this.Ea.to=setInterval(function(){a.Ea.sm()},10))}catch(g){this.L(g)}};b.prototype.Tk=function(){for(var a;0<this.P.length;)a=this.P.pop(),a.a&&(this.Aa.removeChild(a.a.__div),delete a.a),a.a=null};b.prototype.$i=function(a){this.wg=a;0!=a?this.U.style.zIndex=a.toString():this.U.style.zIndex="auto";this.Ba&&this.Ba.Lc&&(this.Ba.Lc.zIndex=(a+4).toString());
this.Aa.style.zIndex=(a+4).toString();this.sa.style.zIndex=(a+3).toString();this.ta.style.zIndex=(a+5).toString();for(var b=0;b<this.J.length+this.Xa.length;b++){var c;c=b<this.J.length?this.J[b]:this.Xa[b-this.J.length];c.a&&(c.a.style.zIndex=(a+(c.yb?8E4:0)).toString())}};b.prototype.Ze=function(a){var b=this.isFullscreen!==a;this.isFullscreen!==a&&(this.isFullscreen=a,this.update(100));if(this.isFullscreen){if(this.Jh)try{this.U.webkitRequestFullScreen?this.U.webkitRequestFullScreen():this.U.mozRequestFullScreen?
this.U.mozRequestFullScreen():this.U.msRequestFullscreen?this.U.msRequestFullscreen():this.U.requestFullScreen?this.U.requestFullScreen():this.U.requestFullscreen&&this.U.requestFullscreen()}catch(c){this.L(c)}this.U.style.position="absolute";a=this.de();this.U.style.left=window.pageXOffset-a.x+this.margin.left+"px";this.U.style.top=window.pageYOffset-a.y+this.margin.top+"px";this.$i(10);document.body.style.overflow="hidden";b&&this.O&&this.O.ggEnterFullscreen&&this.O.ggEnterFullscreen()}else{if(this.Jh)try{document.webkitIsFullScreen?
document.webkitCancelFullScreen():document.mozFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.fullScreen&&(document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen&&document.exitFullscreen())}catch(c){this.L(c)}this.U.style.position="relative";this.U.style.left="0px";this.U.style.top="0px";this.$i(0);document.body.style.overflow="";b&&this.O&&this.O.ggExitFullscreen&&this.O.ggExitFullscreen()}this.ue()};b.prototype.Eh=function(){this.Ze(!this.isFullscreen)};
b.prototype.rm=function(){this.Ze(!0)};b.prototype.exitFullscreen=function(){this.Ze(!1)};b.prototype.Dm=function(){return this.isFullscreen};b.prototype.hl=function(a,b,c){this.s.enabled=!0;this.s.active=!0;this.s.pd=0;this.s.startTime=(new Date).getTime();a&&0!=a&&(this.s.speed=a);b&&(this.s.timeout=b);c&&(this.s.Ch=c)};b.prototype.yo=function(){this.s.active=!1;this.s.enabled=!1;this.s.dd=!1};b.prototype.Co=function(){this.s.enabled=!this.s.active;this.s.active=this.s.enabled;this.s.pd=0;this.s.enabled&&
(this.s.startTime=(new Date).getTime())};b.prototype.vo=function(){this.s.dd||(this.s.dd=!0,this.s.wj=this.s.enabled,this.hl())};b.prototype.Cj=function(a){if(this.Cd=document.getElementById(a)){this.Cd.innerHTML="";this.U=document.createElement("div");this.U.onselectstart=function(){return!1};O&&this.U.setAttribute("id","viewport");a="top:\t0px;left: 0px;position:relative;-ms-touch-action: none;touch-action: none;text-align: left;"+(this.Ja+"user-select: none;");this.U.setAttribute("style",a);this.Cd.appendChild(this.U);
this.C=document.createElement("div");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;-ms-touch-action: none;touch-action: none;"+(this.Ja+"user-select: none;");O&&this.C.setAttribute("id","viewer");this.C.setAttribute("style",a);this.U.appendChild(this.C);if(this.wb){var b=document.createElement("div");a="top:\t0px;left: 0px;width:  100%;height: 100%;overflow: hidden;position:absolute;-ms-touch-action: none;touch-action: none;"+(this.Ja+"user-select: none;");
b.setAttribute("id",this.pi);b.setAttribute("style",a);this.C.appendChild(b)}this.Ba&&(this.Ba.Lc=document.createElement("canvas"),O&&this.Ba.Lc.setAttribute("id","lensflarecanvas"),a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+(this.Ja+"user-select: none;"),a+=this.Ja+"pointer-events: none;",this.Ba.Lc.setAttribute("style",a),this.U.appendChild(this.Ba.Lc));this.Aa=document.createElement("div");O&&this.Aa.setAttribute("id","hotspots");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;";
this.mk&&(a+="background-image: url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);");this.Jd&&!this.Z&&(a+=this.Ja+"transform: translateZ(9999999px);");a+=this.Ja+"user-select: none;";this.Aa.setAttribute("style",a);this.U.appendChild(this.Aa);this.sa=document.createElement("canvas");O&&this.sa.setAttribute("id","hotspotcanvas");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+(this.Ja+"user-select: none;");a+=this.Ja+"pointer-events: none;";
this.sa.setAttribute("style",a);this.U.appendChild(this.sa);this.ta=document.createElement("div");O&&this.ta.setAttribute("id","hotspottext");this.ta.setAttribute("style","top:\t0px;left: 0px;position:absolute;padding: 3px;visibility: hidden;");this.ta.innerHTML=" Hotspot text!";this.U.appendChild(this.ta);this.divSkin=this.O=this.Aa;this.$i(0)}else alert("container not found!")};b.prototype.Ej=function(a){this.xa=!0;return function(){a.Oa&&(a.h&&a.h.complete?(a.loaded=!0,a.Oa.drawImage(a.h,0,0,a.width,
a.height),a.h=null,a.sd=null):a.sd&&a.sd.complete&&!a.loaded&&(a.Oa.drawImage(a.sd,0,0,a.width,a.height),a.sd=null))}};b.prototype.Bj=function(a){var b,c,e,f=128;this.h.Te&&(this.C.style.backgroundColor=this.h.Te.replace("0x","#"));a?(f=this.nf,this.af=1):this.ic>f&&(f=this.ic);for(e=0;6>e;e++){c=this.hb.ab[e];a?(c.width=this.nf,c.height=this.nf):(c.K=document.createElement("canvas"),c.K.width=this.ic,c.K.height=this.ic,c.width=this.ic,c.height=this.ic,c.Oa=c.K.getContext("2d"));b="position:absolute;";
b+="left: 0px;";b+="top: 0px;";b+="width: "+f+"px;";b+="height: "+f+"px;";a&&(b+="outline: 1px solid transparent;");b+=this.Ja+"transform-origin: 0% 0%;";b+="-webkit-user-select: none;";b+=this.Ja+"transform: ";var g;g="";var h=1;this.Ve&&(h=100);g=4>e?g+("rotateY("+-90*e+"deg)"):g+("rotateX("+(4==e?-90:90)+"deg)");this.Ve&&(g+=" scale("+h+")");g+=" translate3d("+-f/2+"px,"+-f/2+"px,"+-f*h/(2*this.af)+"px)";b+=g+";";c.bk=g;a||(c.K.setAttribute("style",b),this.C.insertBefore(c.K,this.C.firstChild))}if(!a){for(e=
0;6>e;e++)c=this.hb.ab[e],""!=this.Ee[e]&&(c.sd=new Image,c.sd.crossOrigin=this.crossOrigin,c.sd.onload=this.Ej(c),c.sd.setAttribute("src",this.Wb(this.Ee[e])),this.Gb.push(c.sd));for(e=0;6>e;e++)c=this.hb.ab[e],c.loaded=!1,c.h=new Image,c.h.crossOrigin=this.crossOrigin,c.h.onload=this.Ej(c),c.h.setAttribute("src",this.Wb(this.Hg[e])),this.Gb.push(c.h)}};b.prototype.rh=function(){var a;this.ua.ba.x=0;this.ua.ba.y=0;if(this.Fc){for(a=0;a<this.hb.ab.length;a++)this.hb.ab[a].K&&this.hb.ab[a].K.setAttribute&&
(this.hb.ab[a].K.setAttribute("src",this.Ij),this.C.removeChild(this.hb.ab[a].K));if(this.h.I){for(a=0;a<this.h.I.length;a++){var b=this.h.I[a],c;for(c in b.V)if(b.V.hasOwnProperty(c)){var e=b.V[c];e.visible=!1;e.K&&(e.Oa&&e.Oa.clearRect(0,0,e.Oa.canvas.width,e.Oa.canvas.height),this.Fh.push(e.K));e.h&&delete e.h;e.bb&&(this.H.deleteTexture(e.bb),this.Uc--);e.Oa=null;e.K=null;e.h=null}delete b.V}delete this.h.I;this.h.I=null}}this.la.rh();c=[];for(a=0;a<this.J.length;a++)b=this.J[a],b.Zc?c.push(b):
b.td();for(a=0;a<this.Xa.length;a++)this.Xa[a].td();this.w.Nf=-1;this.sa.style.visibility="hidden";this.kb=0;b=[];this.Ea.pg=[];for(a=0;a<this.S.length;a++)if(e=this.S[a],0==e.mode||1==e.mode)b.push(e),this.L("Keep in list "+e.id);else if(this.Ha&&this.Ea.enabled&&this.Cc(e.id))this.Ea.pg.push(e),1!=this.B.Na&&2!=this.B.Na&&this.Ea.ki(e);else{try{e.ia?e.Ae():e.a.pause()}catch(f){this.L(f)}e.td()}this.S=b;this.J=c;this.Xa=[];this.o.a&&(this.U.removeChild(this.o.a),this.o.a=null,a=this.Ib("_videopanorama"),
0<a.length&&(a[0].a=null));this.o.Wc=!1;this.o.$g=!1};b.prototype.Zj=function(){var a=1,b=-1!=navigator.userAgent.indexOf("Mac");window.devicePixelRatio&&b&&(a=window.devicePixelRatio);return{Lh:screen.width*a,Vg:screen.height*a}};b.prototype.Vj=function(){var a=this.Zj();return a.Lh>a.Vg?a.Lh:a.Vg};b.prototype.Si=function(a,b){var c=(new DOMParser).parseFromString(a,"text/xml");this.ei=a;this.Ok(c,b);this.ha&&(this.L("Apply to Flash player"),this.ha.readConfigString(this.ei),this.ha.setLocked(!0),
this.ha.setSlaveMode(!0))};b.prototype.Nk=function(a,b,c){try{var e;e=new XMLHttpRequest;e.open("GET",a,!1);e.send(null);if(e.responseXML){var f=a.lastIndexOf("/");0<=f&&(this.Ad=a.substr(0,f+1));2<=arguments.length&&null!=b&&(this.Ad=b);this.Si(e.responseText,c)}else alert("Error loading panorama XML")}catch(g){alert("Error:"+g)}};b.prototype.Kn=function(a,b,c,e){var f;f=new XMLHttpRequest;var g=this;f.onload=function(h){if(4<=f.readyState)if(f.responseXML){var k=a.lastIndexOf("/");0<=k&&(g.Ad=a.substr(0,
k+1));3<=arguments.length&&null!=c&&(g.Ad=c);g.Si(f.responseText,e);b&&b()}else alert("Error loading panorama XML");else console.error("Wrong state loading XML:"+f.statusText)};f.onerror=function(){console.error("Error loading XML:"+f.statusText)};f.open("GET",a,!0);f.send(null)};b.prototype.Xh=function(a){var b="";"{"==a.charAt(0)&&(b=a.substr(1,a.length-2));a={oldNodeId:this.Ub,nodeId:b};this.pl("beforechangenodeid",a);""!=this.Ub&&-1==this.qj.indexOf(this.Ub)&&this.qj.push(this.Ub);this.tk=this.Ub;
this.Ub=b;this.L("change active node: "+b);this.Qa&&this.Qa.changeActiveNode&&this.Qa.changeActiveNode("{"+b+"}");this.pl("changenodeid",a)};b.prototype.Uj=function(){return this.Ub};b.prototype.Wj=function(){if(0<this.La.length){var a;a=this.La.indexOf(this.Ub);a++;a>=this.La.length&&(a=0);return this.La[a]}return""};b.prototype.Tm=function(){if(0<this.La.length){var a;a=this.La.indexOf(this.Ub);a--;0>a&&(a=this.La.length-1);return this.La[a]}return""};b.prototype.Hm=function(){return this.tk};b.prototype.tn=
function(a){return-1!=this.qj.indexOf(a)};b.prototype.Ok=function(a,b){var c=a.firstChild;this.re=[];this.La=[];this.Jg=[];if("tour"==c.nodeName){this.Lf=!0;var e="",f;(f=c.getAttributeNode("start"))&&(e=f.nodeValue.toString());this.hasOwnProperty("startNode")&&this.startNode&&(e=String(this.startNode),this.startNode="");for(var g=c.firstChild,h="",c="";g;){if("panorama"==g.nodeName){if(f=g.getAttributeNode("id"))h=f.nodeValue.toString(),""==e&&(e=h),""==c&&(c=h),this.re[h]=g,this.La.push(h);for(f=
g.firstChild;f;){if("userdata"==f.nodeName){var k=this.Ng(f);this.oj[h]=k;k.customnodeid&&(this.Jg[k.customnodeid]=h)}f=f.nextSibling}}g=g.nextSibling}this.re.hasOwnProperty(e)||(g=this.Jg[e])&&(e=g);this.re.hasOwnProperty(e)||(this.Yc("Start node "+e+" not found!"),e=c);this.Ri(this.re[e],b);this.Xh("{"+e+"}")}else this.Lf=!1,this.Ri(c,b),this.Xh(""),this.La.push("")};b.prototype.Ri=function(a,b){this.Tk();this.Ba&&this.Ba.Mn();this.Ye(this.pb);this.rh();this.Of=0;for(var c=a.firstChild,e,f,g=0;c;){if("view"==
c.nodeName){if(e=c.getAttributeNode("fovmode"))this.f.mode=Number(e.nodeValue);e=c.getAttributeNode("pannorth");this.pan.Mi=1*(e?e.nodeValue:0);for(var h=c.firstChild;h;){"start"==h.nodeName&&(e=h.getAttributeNode("pan"),this.pan.c=Number(e?e.nodeValue:0),this.pan.Pa=this.pan.c,e=h.getAttributeNode("tilt"),this.j.c=Number(e?e.nodeValue:0),this.j.Pa=this.j.c,e=h.getAttributeNode("roll"),this.N.c=Number(e?e.nodeValue:0),this.N.Pa=this.N.c,e=h.getAttributeNode("fov"),this.f.c=Number(e?e.nodeValue:70),
this.f.Pa=this.f.c,e=h.getAttributeNode("projection"),this.mh=Number(e?e.nodeValue:4),this.$c(this.mh));"min"==h.nodeName&&(e=h.getAttributeNode("pan"),this.pan.min=1*(e?e.nodeValue:0),e=h.getAttributeNode("tilt"),this.j.min=1*(e?e.nodeValue:-90),e=h.getAttributeNode("fov"),this.f.min=1*(e?e.nodeValue:5),1E-20>this.f.min&&(this.f.min=1E-20),e=h.getAttributeNode("fovpixel"),this.f.Uf=1*(e?e.nodeValue:0));if("max"==h.nodeName){e=h.getAttributeNode("pan");this.pan.max=1*(e?e.nodeValue:0);e=h.getAttributeNode("tilt");
this.j.max=1*(e?e.nodeValue:90);e=h.getAttributeNode("fov");this.f.max=1*(e?e.nodeValue:120);180<=this.f.max&&(this.f.max=179.9);if(e=h.getAttributeNode("fovstereographic"))this.f.Ii=1*e.nodeValue;if(e=h.getAttributeNode("fovfisheye"))this.f.Hi=1*e.nodeValue;if(e=h.getAttributeNode("scaletofit"))this.A.Zk=1==e.nodeValue}if("flyin"==h.nodeName){if(e=h.getAttributeNode("projection"))this.lc.Bb=Number(e.nodeValue);if(e=h.getAttributeNode("pan"))this.lc.pan=parseFloat(e.nodeValue);if(e=h.getAttributeNode("tilt"))this.lc.j=
parseFloat(e.nodeValue);if(e=h.getAttributeNode("fov"))this.lc.f=parseFloat(e.nodeValue)}h=h.nextSibling}}if("autorotate"==c.nodeName){if(e=c.getAttributeNode("speed"))this.s.speed=1*e.nodeValue;if(e=c.getAttributeNode("delay"))this.s.timeout=1*e.nodeValue;if(e=c.getAttributeNode("returntohorizon"))this.s.Ch=1*e.nodeValue;if(e=c.getAttributeNode("nodedelay"))this.s.kh=1*e.nodeValue;if(e=c.getAttributeNode("noderandom"))this.s.Li=1==e.nodeValue;this.ae&&(this.s.enabled=!0,this.s.active=!1);if(e=c.getAttributeNode("startloaded"))this.s.mg=
1==e.nodeValue,this.s.mg&&(this.s.active=!1);if(e=c.getAttributeNode("useanimation"))this.s.nj=1==e.nodeValue;if(e=c.getAttributeNode("syncanimationwithvideo"))this.s.fj=1==e.nodeValue}if("animation"==c.nodeName){if(e=c.getAttributeNode("syncanimationwithvideo"))this.s.fj=1==e.nodeValue;if(e=c.getAttributeNode("useinautorotation"))this.s.nj=1==e.nodeValue;this.Ia=[];for(h=c.firstChild;h;){if("clip"==h.nodeName){this.D=new m.Bk;if(e=h.getAttributeNode("animtitle"))this.D.cp=e.nodeValue.toString();
if(e=h.getAttributeNode("cliptitle"))this.D.Ta=e.nodeValue.toString();if(e=h.getAttributeNode("nodeid"))this.D.ep=e.nodeValue.toString();if(e=h.getAttributeNode("length"))this.D.length=Number(e.nodeValue);if(e=h.getAttributeNode("animtype"))this.D.Tl=Number(e.nodeValue);if(e=h.getAttributeNode("nextcliptitle"))this.D.Fk=e.nodeValue.toString();if(e=h.getAttributeNode("nextclipnodeid"))this.D.Ek=e.nodeValue.toString();if(e=h.getAttributeNode("transitiontype"))this.D.Io=Number(e.nodeValue);var k=h.firstChild;
for(this.D.ja=[];k;){if("keyframe"==k.nodeName){var A=new m.yc;if(e=k.getAttributeNode("time"))A.time=Number(e.nodeValue);if(e=k.getAttributeNode("value"))A.value=Number(e.nodeValue);if(e=k.getAttributeNode("transitiontime"))A.nb=Number(e.nodeValue);e=k.getAttributeNode("type");var n=0;e&&(A.type=Number(e.nodeValue),n=Number(e.nodeValue));if(e=k.getAttributeNode("property"))A.vb=Number(e.nodeValue);if(1==n||2==n){if(e=k.getAttributeNode("bezierintime"))A.Ud=Number(e.nodeValue);if(e=k.getAttributeNode("bezierinvalue"))A.Ic=
Number(e.nodeValue);if(e=k.getAttributeNode("bezierouttime"))A.Vd=Number(e.nodeValue);if(e=k.getAttributeNode("bezieroutvalue"))A.Wd=Number(e.nodeValue)}this.D.ja.push(A)}k=k.nextSibling}this.zb==this.D.Ta&&(e=this.D.ja,this.eg(e[0].value,e[1].value,e[2].value));this.Ia.push(this.D)}h=h.nextSibling}}"input"==c.nodeName&&(f||(f=c));if(f)for(h=0;6>h;h++)e=f.getAttributeNode("prev"+h+"url"),this.Ee[h]=e?String(e.nodeValue):"";"altinput"==c.nodeName&&(h=0,(e=c.getAttributeNode("screensize"))&&(h=1*e.nodeValue),
0<h&&h<=this.Vj()&&h>g&&(g=h,f=c));if("control"==c.nodeName&&this.ae){if(e=c.getAttributeNode("simulatemass"))this.ua.enabled=1==e.nodeValue;if(e=c.getAttributeNode("rubberband"))this.A.Xk=1==e.nodeValue;if(e=c.getAttributeNode("locked"))this.A.sb=1==e.nodeValue;e&&(this.A.Oe=1==e.nodeValue);if(e=c.getAttributeNode("lockedmouse"))this.A.sb=1==e.nodeValue;if(e=c.getAttributeNode("lockedkeyboard"))this.A.Oe=1==e.nodeValue;if(e=c.getAttributeNode("lockedkeyboardzoom"))this.A.Fi=1==e.nodeValue;if(e=c.getAttributeNode("lockedwheel"))this.A.Xc=
1==e.nodeValue;if(e=c.getAttributeNode("invertwheel"))this.A.kk=1==e.nodeValue;if(e=c.getAttributeNode("speedwheel"))this.A.gl=1*e.nodeValue;if(e=c.getAttributeNode("invertcontrol"))this.A.nd=1==e.nodeValue;if(e=c.getAttributeNode("sensitivity"))this.A.sensitivity=1*e.nodeValue,1>this.A.sensitivity&&(this.A.sensitivity=1);if(e=c.getAttributeNode("dblclickfullscreen"))this.A.gi=1==e.nodeValue;if(e=c.getAttributeNode("contextfullscreen"))this.A.sf=1==e.nodeValue;if(e=c.getAttributeNode("contextprojections"))this.A.Fg=
1==e.nodeValue;if(e=c.getAttributeNode("hideabout"))this.A.Gf=1==e.nodeValue;for(h=c.firstChild;h;)"menulink"==h.nodeName&&(k={text:"",url:""},e=h.getAttributeNode("text"),k.text=e.nodeValue,e=h.getAttributeNode("url"),k.url=e.nodeValue,this.Tf.push(k)),h=h.nextSibling}if("transition"==c.nodeName&&this.ae){if(e=c.getAttributeNode("enabled"))this.B.enabled=1==e.nodeValue;if(e=c.getAttributeNode("blendtime"))this.B.Ag=e.nodeValue;if(e=c.getAttributeNode("blendcolor"))this.B.ye=e.nodeValue.toString();
if(e=c.getAttributeNode("type"))this.B.type=e.nodeValue.toString();if(e=c.getAttributeNode("softedge"))this.B.tc=1*e.nodeValue;if(e=c.getAttributeNode("zoomin"))this.B.Na=e.nodeValue;if(e=c.getAttributeNode("zoomout"))this.B.Nb=e.nodeValue;if(e=c.getAttributeNode("zoomfov"))this.B.gf=e.nodeValue;if(e=c.getAttributeNode("zoomspeed"))this.B.Rd=e.nodeValue;if(e=c.getAttributeNode("zoomoutpause"))this.B.hf=1==e.nodeValue}if("soundstransition"==c.nodeName){if(e=c.getAttributeNode("enabled"))this.Ea.enabled=
1==e.nodeValue;if(e=c.getAttributeNode("transitiontime"))this.Ea.nb=1*e.nodeValue;if(e=c.getAttributeNode("crossfade"))this.Ea.Dj=1==e.nodeValue}if("flyintransition"==c.nodeName){if(e=c.getAttributeNode("enabled"))this.qb.enabled=1==e.nodeValue&&this.Z;if(e=c.getAttributeNode("speed"))this.qb.speed=1*e.nodeValue}"userdata"==c.nodeName&&(this.userdata=this.ef=this.Ng(c));if("hotspots"==c.nodeName)for(h=c.firstChild;h;){if("label"==h.nodeName&&this.ae){k=this.w.hj;if(e=h.getAttributeNode("enabled"))k.enabled=
1==e.nodeValue;if(e=h.getAttributeNode("width"))k.width=1*e.nodeValue;if(e=h.getAttributeNode("height"))k.height=1*e.nodeValue;if(e=h.getAttributeNode("textcolor"))k.ij=1*e.nodeValue;if(e=h.getAttributeNode("textalpha"))k.gj=1*e.nodeValue;if(e=h.getAttributeNode("background"))k.background=1==e.nodeValue;if(e=h.getAttributeNode("backgroundalpha"))k.Ob=1*e.nodeValue;if(e=h.getAttributeNode("backgroundcolor"))k.Pb=1*e.nodeValue;if(e=h.getAttributeNode("border"))k.Vh=1*e.nodeValue;if(e=h.getAttributeNode("bordercolor"))k.Sb=
1*e.nodeValue;if(e=h.getAttributeNode("borderalpha"))k.Rb=1*e.nodeValue;if(e=h.getAttributeNode("borderradius"))k.Uh=1*e.nodeValue;if(e=h.getAttributeNode("wordwrap"))k.Nh=1==e.nodeValue}if("polystyle"==h.nodeName&&this.ae){if(e=h.getAttributeNode("mode"))this.w.mode=1*e.nodeValue;if(e=h.getAttributeNode("bordercolor"))this.w.Sb=1*e.nodeValue;if(e=h.getAttributeNode("backgroundcolor"))this.w.Pb=1*e.nodeValue;if(e=h.getAttributeNode("borderalpha"))this.w.Rb=1*e.nodeValue;if(e=h.getAttributeNode("backgroundalpha"))this.w.Ob=
1*e.nodeValue;if(e=h.getAttributeNode("handcursor"))this.w.Ke=1==e.nodeValue}e=void 0;"hotspot"==h.nodeName&&(e=new m.ah(this),e.type="point",e.Db(h),this.P.push(e));"polyhotspot"==h.nodeName&&(e=new m.ah(this),e.type="poly",e.Db(h),this.P.push(e));h=h.nextSibling}if("sounds"==c.nodeName||"media"==c.nodeName)for(h=c.firstChild;h;)"sound"!=h.nodeName||this.Gk||(e=new m.Pl(this),e.Db(h),this.wb||e.addElement()),"video"==h.nodeName&&(e=new m.Yk(this),e.Db(h),this.wb||e.addElement()),"image"==h.nodeName&&
(e=new m.Nl(this),e.Db(h),this.wb||e.addElement()),"lensflare"==h.nodeName&&this.Ba&&(e=new m.Ol(this),e.Db(h),this.Ba.Qf.push(e)),h=h.nextSibling;c=c.nextSibling}b&&""!=b&&(c=b.toString().split("/"),4<c.length&&this.$c(Number(c[4])),0<c.length&&(e=String(c[0]),"N"==e.charAt(0)?this.Zi(Number(e.substr(1))):"S"==e.charAt(0)?this.Zi(-180+Number(e.substr(1))):this.vh(Number(e))),1<c.length&&this.wh(Number(c[1])),2<c.length&&this.ag(Number(c[2])));if(f){for(h=0;6>h;h++)(e=f.getAttributeNode("tile"+h+
"url"))&&(this.Hg[h]=String(e.nodeValue)),e=f.getAttributeNode("tile"+h+"url1");for(h=0;6>h;h++)(e=f.getAttributeNode("prev"+h+"url"))&&(this.Ee[h]=String(e.nodeValue));if(e=f.getAttributeNode("tilesize"))this.ic=1*e.nodeValue;if(e=f.getAttributeNode("canvassize"))this.nf=Number(e.nodeValue);if(e=f.getAttributeNode("tilescale"))this.af=1*e.nodeValue;if(e=f.getAttributeNode("leveltileurl"))this.h.Ak=e.nodeValue;if(e=f.getAttributeNode("leveltilesize"))this.h.G=Number(e.nodeValue);if(e=f.getAttributeNode("levelbias"))this.h.yk=
Number(e.nodeValue);if(e=f.getAttributeNode("levelbiashidpi"))this.h.zk=Number(e.nodeValue);e=f.getAttributeNode("overlap");this.Ca.N=0;this.Ca.pitch=0;e&&(this.h.Ka=Number(e.nodeValue));if(e=f.getAttributeNode("levelingroll"))this.Ca.N=Number(e.nodeValue);if(e=f.getAttributeNode("levelingpitch"))this.Ca.pitch=Number(e.nodeValue);this.kb=0;(e=f.getAttributeNode("flat"))&&1==e.nodeValue&&(this.kb=2);e=f.getAttributeNode("width");this.h.width=1*(e?e.nodeValue:1);e=f.getAttributeNode("height");this.h.height=
1*(e?e.nodeValue:this.h.width);this.o.src=[];this.h.I=[];for(h=f.firstChild;h;){if("preview"==h.nodeName){if(e=h.getAttributeNode("color"))this.h.Te=e.nodeValue;if(e=h.getAttributeNode("strip"))this.h.Mk=1==e.nodeValue}if("video"==h.nodeName){if(e=h.getAttributeNode("format"))"3x2"==e.nodeValue&&(this.o.format=14),"equirectangular"==e.nodeValue&&(this.o.format=1);if(e=h.getAttributeNode("flipy"))this.o.ri=Number(e.nodeValue);if(e=h.getAttributeNode("startmuted"))this.o.jl=1==e.nodeValue;if(e=h.getAttributeNode("bleed"))this.o.xe=
Number(e.nodeValue);if(e=h.getAttributeNode("endaction"))this.o.$d=String(e.nodeValue);if(e=h.getAttributeNode("width"))this.o.width=Number(e.nodeValue);if(e=h.getAttributeNode("height"))this.o.height=Number(e.nodeValue);for(f=h.firstChild;f;)"source"==f.nodeName&&(e=f.getAttributeNode("url"))&&this.o.src.push(e.nodeValue.toString()),f=f.nextSibling}if("level"==h.nodeName){f=new m.Hk;e=h.getAttributeNode("width");f.width=1*(e?e.nodeValue:1);e=h.getAttributeNode("height");f.height=1*(e?e.nodeValue:
f.width);if(e=h.getAttributeNode("preload"))f.cache=1==e.nodeValue;if(e=h.getAttributeNode("preview"))f.Se=1==e.nodeValue;f.M=Math.floor((f.width+this.h.G-1)/this.h.G);f.ea=Math.floor((f.height+this.h.G-1)/this.h.G);this.h.I.push(f)}h=h.nextSibling}this.h.Ci=this.h.I.length}this.sg&&(this.Z=this.Fc=!1,this.Tb||(this.L("dummy rendering"),this.Tb=document.createElement("canvas"),this.Tb.width=100,this.Tb.height=100,this.Tb.id="dummycanvas",this.C.appendChild(this.Tb)),this.cd());this.Z&&this.H&&(this.la.ik(this.af),
this.la.jk());this.Fc&&(0<this.h.I.length?this.Bj(!0):this.Bj(!1),this.Of=0);var r=this;0<this.h.I.length&&this.h.Mk&&0==this.kb&&(c=new Image,f=new m.Hk,f.Se=!0,f.cache=!0,f.M=f.ea=0,f.height=f.width=0,this.h.I.push(f),c.crossOrigin=this.crossOrigin,c.onload=this.la.sn(c),c.setAttribute("src",this.qe(6,this.h.Ci-1,0,0)));if(0<this.o.src.length&&this.Z)if(this.Kh){this.o.a=document.createElement("video");this.o.a.crossOrigin=this.crossOrigin;this.o.a.setAttribute("style","display:none; max-width:none;");
this.o.a.setAttribute("playsinline","playsinline");this.Id&&this.ni&&this.o.jl&&this.o.a.setAttribute("muted","muted");this.o.a.b=!0;this.o.a.volume=this.W;this.U.appendChild(this.o.a);this.o.Wc=!1;this.o.ll=!1;this.o.a.oncanplay=function(){if(!r.o.Wc){r.o.$g=!0;var a,b,c,d,e,f,g=[],h=new m.ra,k=r.H,l=r.o.a.videoWidth/3;r.o.width=r.o.a.videoWidth;r.o.height=r.o.a.videoHeight;for(a=0;6>a;a++)for(c=a%3*l+r.o.xe,e=c+l-2*r.o.xe,f=4,3>a&&(f+=l),d=f+l-2*r.o.xe,b=0;4>b;b++){h.x=-1;h.y=-1;h.z=1;for(var n=
0;n<b;n++)h.Wk();g.push((0<h.x?c:e)/(3*l),(0<h.y?d:f)/(2*l))}k.bindBuffer(k.ARRAY_BUFFER,r.o.Ah);k.bufferData(k.ARRAY_BUFFER,new Float32Array(g),k.STATIC_DRAW)}};"exit"==this.o.$d?this.o.a.onended=function(){r.o.$g=!1;r.o.Wc=!1;r.U.removeChild(r.o.a);r.o.a=null;r.update()}:"stop"==this.o.$d?r.o.a.onended=function(){r.update()}:"{"==this.o.$d.charAt(0)?this.o.a.onended=function(){r.je(r.o.$d,"$fwd")}:this.o.a.loop=!0;for(h=0;h<this.o.src.length;h++)f=document.createElement("source"),f.setAttribute("src",
this.Wb(this.o.src[h])),this.o.a.appendChild(f);f=this.Ib("_videopanorama");0<f.length?f[0].a=this.o.a:this.Pk("_videopanorama",this.o.a);this.o.a.play()}else"{"==this.o.$d.charAt(0)&&r.je(r.o.$d,"$fwd");this.sj();this.B.yd||this.kl();this.update();this.ae&&(this.O&&this.O.ggViewerInit&&this.O.ggViewerInit(),this.qb.enabled&&0==this.kb&&this.Z&&(this.$c(9),this.pan.c=this.lc.pan,this.j.c=this.lc.j,this.f.c=this.lc.f,this.Za=this.lc.Bb,this.D=this.xf(!1),this.pan.c=this.D.ja[0].value,this.j.c=this.D.ja[1].value,
this.f.c=this.D.ja[2].value,3==this.D.ja[3].vb&&this.$c(this.D.ja[3].value),this.zb=this.D.Ta,this.B.hh=this.A.sb,this.B.Mh=this.A.Xc,this.B.bh=this.A.Oe,this.s.active=!1,this.s.Pg=!0));this.ae=!1;this.Ff=!0;this.cd()};b.prototype.Ni=function(a,b){0<a.length&&(".xml"==a.substr(a.length-4)||".swf"==a.substr(a.length-4)||"{"==a.charAt(0)?this.je(this.Wb(a),b):window.open(this.Wb(a),b))};b.prototype.wo=function(){this.Ff=this.isLoaded=!1;this.checkLoaded=this.Gb=[];this.nh=0;this.O&&this.O.ggReLoaded&&
this.O.ggReLoaded()};b.prototype.je=function(a,b){if(""!=a&&"{}"!=a){this.wo();this.Qa&&this.Qa.hotspotProxyOut&&this.Qa.hotspotProxyOut(this.za.id);".swf"==a.substr(a.length-4)&&(a=a.substr(0,a.length-4)+".xml");var c="";b&&(c=b.toString());c=c.replace("$cur",this.pan.c+"/"+this.j.c+"/"+this.f.c+"//"+this.ya());c=c.replace("$fwd","N"+this.Sg()+"/"+this.j.c+"/"+this.f.c+"//"+this.ya());c=c.replace("$bwd","S"+this.Sg()+"/"+this.j.c+"/"+this.f.c+"//"+this.ya());c=c.replace("$ap",String(this.pan.c));
c=c.replace("$an",String(this.Sg()));c=c.replace("$at",String(this.j.c));c=c.replace("$af",String(this.f.c));c=c.replace("$ar",String(this.ya()));if(""!=c){var e=c.split("/");3<e.length&&""!=e[3]&&(this.startNode=e[3])}this.pa();if("{"==a.charAt(0)){var e=a.substr(1,a.length-2),f=this.Jg[e];f&&(e=f);var f=this.B,g=this.H;if(this.re[e]){this.Dg=!0;if(this.B.enabled&&this.Z&&this.B.Mb){f.se||f.yd||(f.hh=this.A.sb,f.Mh=this.A.Xc,f.bh=this.A.Oe,this.cg(!0),this.dg(!0),this.bg(!0));var h;"wipeleftright"==
f.type?h=1:"wiperightleft"==f.type?h=2:"wipetopbottom"==f.type?h=3:"wipebottomtop"==f.type?h=4:"wiperandom"==f.type&&(h=Math.ceil(4*Math.random()));f.fi=h;g.bindFramebuffer(g.FRAMEBUFFER,f.Mb);g.viewport(0,0,f.Mb.width,f.Mb.height);g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT);f.og=!0;this.rg();f.og=!1;g.bindFramebuffer(g.FRAMEBUFFER,null);g.viewport(0,0,this.jb.width,this.jb.height);h=new Date;this.za!=this.pb?(f.xg=this.za.gc/this.m.width,f.yg=1-this.za.Cb/this.m.height):(f.xg=.5,f.yg=.5);1!=f.Na&&
2!=f.Na?(f.cj=h.getTime(),f.se=!0):(f.Fl=h.getTime(),f.yd=!0,f.ob=Math.sin(this.Jb()/2*Math.PI/180)/Math.sin(f.gf/2*Math.PI/180),f.ob=Math.max(f.ob,1),f.El=1/f.Rd*f.ob*.3)}this.Ri(this.re[e],c);this.Xh(a);f.enabled&&this.Z&&0!=f.Nb&&(f.oe=this.ti(),f.pe=this.vi(),f.xd=this.Jb(),f.ad=this.ya(),1==f.Nb||3==f.Nb?this.gg(f.gf):2==f.Nb?this.gg(this.yf()+(this.yf()-f.gf)):4==f.Nb&&(this.$c(this.lc.Bb),this.vh(this.lc.pan),this.wh(this.lc.j),this.gg(this.lc.f)),f.hf||1==f.Na||2==f.Na||(4==f.Nb?(this.D=this.xf(!0,
f.oe,f.pe,f.xd),this.zb=this.D.Ta,this.s.active=!0,this.qb.ud=!0):this.moveTo(f.oe,f.pe,f.xd,f.Rd,0,f.ad)));this.ha&&this.ha.openNext(a,c);this.B.yd||this.B.se||(this.ga&&this.bi(),this.Dg=!1)}else{this.Yc("invalid node id: "+e);return}}else this.Nk(a,null,c);this.update(5)}};b.prototype.Km=function(){return this.Lf?this.La.slice(0):[""]};b.prototype.Ng=function(a){var b,c;c=[];c.title="";c.description="";c.author="";c.datetime="";c.copyright="";c.source="";c.information="";c.comment="";c.latitude=
0;c.longitude=0;c.customnodeid="";c.tags=[];if(a&&((b=a.getAttributeNode("title"))&&(c.title=b.nodeValue.toString()),(b=a.getAttributeNode("description"))&&(c.description=b.nodeValue.toString()),(b=a.getAttributeNode("author"))&&(c.author=b.nodeValue.toString()),(b=a.getAttributeNode("datetime"))&&(c.datetime=b.nodeValue.toString()),(b=a.getAttributeNode("copyright"))&&(c.copyright=b.nodeValue.toString()),(b=a.getAttributeNode("source"))&&(c.source=b.nodeValue.toString()),(b=a.getAttributeNode("info"))&&
(c.information=b.nodeValue.toString()),(b=a.getAttributeNode("comment"))&&(c.comment=b.nodeValue.toString()),(b=a.getAttributeNode("latitude"))&&(c.latitude=Number(b.nodeValue)),(b=a.getAttributeNode("longitude"))&&(c.longitude=Number(b.nodeValue)),(b=a.getAttributeNode("customnodeid"))&&(c.customnodeid=b.nodeValue.toString()),b=a.getAttributeNode("tags"))){a=b.nodeValue.toString().split("|");for(b=0;b<a.length;b++)""==a[b]&&(a.splice(b,1),b--);c.tags=a}return c};b.prototype.si=function(a){return a?
this.oj[a]?this.oj[a]:this.Ng():this.ef};b.prototype.Lm=function(a){a=this.si(a);var b=[];""!=a.latitude&&0!=a.latitude&&0!=a.longitude&&(b.push(a.latitude),b.push(a.longitude));return b};b.prototype.Mm=function(a){return this.si(a).title};b.prototype.Ie=function(a,b){var c;for(c=0;c<this.D.ja.length;c++)if(this.D.ja[c].time==a&&this.D.ja[c].vb==b)return this.D.ja[c];return!1};b.prototype.Jm=function(a){var b,c=1E5,e=a,f=!1;for(b=0;b<this.D.ja.length;b++)this.D.ja[b].vb==a.vb&&this.D.ja[b].time>a.time&&
this.D.ja[b].time<c&&(e=this.D.ja[b],c=e.time,f=!0);return f?e:!1};b.prototype.xf=function(a,b,c,e){for(var f=0;f<this.Ia.length;f++)if(this.Ia[f].Ta&&0==this.Ia[f].Ta.indexOf("__FlyIn"))return this.Ia[f];f=new m.rk;f.Ta="__FlyIn";f.ig=this.pan.c;f.kg=this.j.c;f.wd=this.f.c;f.jg=this.Za;f.ad=this.mh;a?(f.Fe=!1,f.Yd=!1,f.speed=this.B.Rd,f.Pd=b,f.Qd=c,f.$e=e):(f.Fe=!0,f.Yd=!0,f.speed=this.qb.speed,f.Pd=this.pan.Pa,f.Qd=this.j.Pa,f.$e=this.f.Pa);return this.Rj(f)};b.prototype.Rj=function(a){var b=new m.Bk;
b.Ta=a.Ta;b.ja=[];var c=a.jg!=a.ad&&-1!=a.ad,e=a.Pd-a.ig;if(360==this.pan.max-this.pan.min){for(;-360>e;)e+=360;for(;360<e;)e-=360}var f=a.Qd-a.kg,g=a.$e-a.wd,h=Math.round(Math.sqrt(e*e+f*f+g*g)/a.speed*.33);c&&(h=Math.max(10,h));b.length=h;var k,A;a.Zd&&(k=Math.ceil(.7*h),k=Math.min(15,k),k=Math.max(5,k),b.length=h+k,A=.33*k);var n=a.$e,r=h,p=0,u=h-1;if(c){var t=a.wd,v;4==a.ad?v=120:v=this.zf(a.ad);var n=a.$e,g=n-a.wd,q=new m.kc(0,a.wd),w=new m.kc(h,n),B=new m.kc,z=new m.kc;z.Ya(h/3,a.wd+g/3);B.Ya(2*
h/3,n-g/3);if(t>v)for(;p<=h&&t>v;)t=new m.kc,t.Th(q,w,z,B,p),t=t.y,p++;else p=1;p>=.8*h&&(r=p=Math.round(.8*h));0==p&&(p=1);var y;4==a.jg?y=120:y=this.zf(a.jg);v=a.$e;if(v>y)for(;u>p&&v>y;)t=new m.kc,t.Th(q,w,z,B,u),v=t.y,u--}q=new m.yc;q.time=0;q.vb=0;q.value=a.ig;q.type=1;q.Vd=h/3;q.Wd=a.Fe?a.ig:a.ig+e/3;b.ja.push(q);q=new m.yc;q.time=0;q.vb=1;q.value=a.kg;q.type=1;q.Vd=h/3;q.Wd=a.Fe?a.kg:a.kg+f/3;b.ja.push(q);q=new m.yc;q.time=0;q.vb=2;q.value=a.wd;q.type=1;q.Vd=h/3;q.Wd=a.Fe?a.wd:a.wd+g/3;b.ja.push(q);
q=new m.yc;q.time=0;q.vb=3;q.value=a.jg;q.type=0;q.nb=0;b.ja.push(q);c&&(q=new m.yc,q.time=p,q.vb=3,q.value=a.ad,q.type=0,q.nb=u-p,b.ja.push(q));q=new m.yc;q.time=h;q.vb=0;q.value=a.Pd;q.type=1;q.Ud=2*h/3;a.Yd&&!a.Zd?q.Ic=a.Pd:q.Ic=a.Pd-e/3;a.Zd&&(q.Vd=h+A,q.Wd=q.value+A/h*e);b.ja.push(q);q=new m.yc;q.time=h;q.vb=1;q.value=a.Qd;q.type=1;q.Ud=2*h/3;a.Yd&&!a.Zd?q.Ic=a.Qd:q.Ic=a.Qd-f/3;a.Zd&&(q.Vd=h+A,q.Wd=q.value+A/h*f);b.ja.push(q);q=new m.yc;q.time=r;q.vb=2;q.value=n;q.type=1;q.Ud=2*r/3;a.Yd?q.Ic=
n:q.Ic=n-g/3;b.ja.push(q);a.Zd&&(q=new m.yc,q.time=h+k,q.vb=0,q.value=a.Pd,q.type=1,q.Ud=h+k-A,q.Ic=a.Pd,b.ja.push(q),q=new m.yc,q.time=h+k,q.vb=1,q.value=a.Qd,q.type=1,q.Ud=h+k-A,q.Ic=a.Qd,b.ja.push(q));this.Ia.push(b);return b};b.prototype.Uo=function(){this.o.a&&this.o.a.play()};b.prototype.Vo=function(){this.o.a&&(this.o.a.pause(),this.o.a.currentTime=0)};b.prototype.To=function(){this.o.a&&this.o.a.pause()};b.prototype.lo=function(a){this.o.a&&(0>a&&(a=0),a>this.o.a.duration&&(a=this.o.a.duration-
.1),this.o.a.currentTime=a,this.update())};b.prototype.Ym=function(){return this.o.a?this.o.a.currentTime:0};b.prototype.Xm=function(){if(this.o.a)return this.o.a};b.prototype.ko=function(a){if(this.o.a){var b=!this.o.a.paused&&!this.o.a.ended,c=this.o.a.currentTime;this.o.a.pause();isNaN(parseInt(a,10))?this.o.a.src=String(a):this.o.a.src=this.o.src[parseInt(a,10)];b&&(this.o.a.onloadedmetadata=function(){this.currentTime=c;this.play();this.onloadedmetadata=null});this.o.a.currentTime=c}};b.prototype.qm=
function(){this.Gk=!0};return b}();m.b=g})(ggP2VR||(ggP2VR={}));window.ggHasHtml5Css3D=G;window.ggHasWebGL=N;window.pano2vrPlayer=ggP2VR.b;ggP2VR.b.prototype.readConfigString=ggP2VR.b.prototype.Si;ggP2VR.b.prototype.readConfigUrl=ggP2VR.b.prototype.Nk;ggP2VR.b.prototype.readConfigUrlAsync=ggP2VR.b.prototype.Kn;ggP2VR.b.prototype.readConfigXml=ggP2VR.b.prototype.Ok;ggP2VR.b.prototype.openUrl=ggP2VR.b.prototype.Ni;ggP2VR.b.prototype.openNext=ggP2VR.b.prototype.je;ggP2VR.b.prototype.setMargins=ggP2VR.b.prototype.Xn;
ggP2VR.b.prototype.addListener=ggP2VR.b.prototype.addListener;ggP2VR.b.prototype.removeEventListener=ggP2VR.b.prototype.removeEventListener;ggP2VR.b.prototype.detectBrowser=ggP2VR.b.prototype.Hj;ggP2VR.b.prototype.initWebGL=ggP2VR.b.prototype.Bc;ggP2VR.b.prototype.getPercentLoaded=ggP2VR.b.prototype.Pm;ggP2VR.b.prototype.setBasePath=ggP2VR.b.prototype.Qn;ggP2VR.b.prototype.getBasePath=ggP2VR.b.prototype.xm;ggP2VR.b.prototype.setViewerSize=ggP2VR.b.prototype.bl;ggP2VR.b.prototype.getViewerSize=ggP2VR.b.prototype.an;
ggP2VR.b.prototype.setSkinObject=ggP2VR.b.prototype.io;ggP2VR.b.prototype.changeViewMode=ggP2VR.b.prototype.em;ggP2VR.b.prototype.getViewMode=ggP2VR.b.prototype.Zm;ggP2VR.b.prototype.changePolygonMode=ggP2VR.b.prototype.zj;ggP2VR.b.prototype.setPolygonMode=ggP2VR.b.prototype.zj;ggP2VR.b.prototype.getPolygonMode=ggP2VR.b.prototype.Rm;ggP2VR.b.prototype.showOnePolyHotspot=ggP2VR.b.prototype.dl;ggP2VR.b.prototype.hideOnePolyHotspot=ggP2VR.b.prototype.ek;ggP2VR.b.prototype.changePolyHotspotColor=ggP2VR.b.prototype.cm;
ggP2VR.b.prototype.toggleOnePolyHotspot=ggP2VR.b.prototype.Do;ggP2VR.b.prototype.changeViewState=ggP2VR.b.prototype.fm;ggP2VR.b.prototype.getViewState=ggP2VR.b.prototype.$m;ggP2VR.b.prototype.setRenderFlags=ggP2VR.b.prototype.Zn;ggP2VR.b.prototype.getRenderFlags=ggP2VR.b.prototype.Um;ggP2VR.b.prototype.setMaxTileCount=ggP2VR.b.prototype.$k;ggP2VR.b.prototype.getVFov=ggP2VR.b.prototype.Jb;ggP2VR.b.prototype.setVFov=ggP2VR.b.prototype.gg;ggP2VR.b.prototype.getHFov=ggP2VR.b.prototype.Am;
ggP2VR.b.prototype.updatePanorama=ggP2VR.b.prototype.rg;ggP2VR.b.prototype.isTouching=ggP2VR.b.prototype.gn;ggP2VR.b.prototype.getIsMobile=ggP2VR.b.prototype.Em;ggP2VR.b.prototype.setIsMobile=ggP2VR.b.prototype.Vn;ggP2VR.b.prototype.getIsAutorotating=ggP2VR.b.prototype.Cm;ggP2VR.b.prototype.getIsLoaded=ggP2VR.b.prototype.Rg;ggP2VR.b.prototype.getIsTileLoading=ggP2VR.b.prototype.Fm;ggP2VR.b.prototype.getLastActivity=ggP2VR.b.prototype.Gm;ggP2VR.b.prototype.getPan=ggP2VR.b.prototype.ti;
ggP2VR.b.prototype.getPanNorth=ggP2VR.b.prototype.Sg;ggP2VR.b.prototype.getPanDest=ggP2VR.b.prototype.Nm;ggP2VR.b.prototype.getPanN=ggP2VR.b.prototype.Om;ggP2VR.b.prototype.setPan=ggP2VR.b.prototype.vh;ggP2VR.b.prototype.setPanNorth=ggP2VR.b.prototype.Zi;ggP2VR.b.prototype.changePan=ggP2VR.b.prototype.Bg;ggP2VR.b.prototype.changePanLog=ggP2VR.b.prototype.bm;ggP2VR.b.prototype.getTilt=ggP2VR.b.prototype.vi;ggP2VR.b.prototype.getTiltDest=ggP2VR.b.prototype.Wm;ggP2VR.b.prototype.setTilt=ggP2VR.b.prototype.wh;
ggP2VR.b.prototype.changeTilt=ggP2VR.b.prototype.Cg;ggP2VR.b.prototype.changeTiltLog=ggP2VR.b.prototype.dm;ggP2VR.b.prototype.getFov=ggP2VR.b.prototype.yf;ggP2VR.b.prototype.getFovDest=ggP2VR.b.prototype.zm;ggP2VR.b.prototype.setFov=ggP2VR.b.prototype.ag;ggP2VR.b.prototype.changeFov=ggP2VR.b.prototype.yj;ggP2VR.b.prototype.changeFovLog=ggP2VR.b.prototype.pf;ggP2VR.b.prototype.getRoll=ggP2VR.b.prototype.Vm;ggP2VR.b.prototype.setRoll=ggP2VR.b.prototype.$n;ggP2VR.b.prototype.setPanTilt=ggP2VR.b.prototype.Yn;
ggP2VR.b.prototype.setPanTiltFov=ggP2VR.b.prototype.eg;ggP2VR.b.prototype.setDefaultView=ggP2VR.b.prototype.Sn;ggP2VR.b.prototype.setLocked=ggP2VR.b.prototype.Wn;ggP2VR.b.prototype.setLockedMouse=ggP2VR.b.prototype.cg;ggP2VR.b.prototype.setLockedKeyboard=ggP2VR.b.prototype.bg;ggP2VR.b.prototype.setLockedWheel=ggP2VR.b.prototype.dg;ggP2VR.b.prototype.moveTo=ggP2VR.b.prototype.moveTo;ggP2VR.b.prototype.moveToEx=ggP2VR.b.prototype.ih;ggP2VR.b.prototype.moveToDefaultView=ggP2VR.b.prototype.on;
ggP2VR.b.prototype.moveToDefaultViewEx=ggP2VR.b.prototype.pn;ggP2VR.b.prototype.addHotspotElements=ggP2VR.b.prototype.sj;ggP2VR.b.prototype.playSound=ggP2VR.b.prototype.le;ggP2VR.b.prototype.playPauseSound=ggP2VR.b.prototype.Lk;ggP2VR.b.prototype.playStopSound=ggP2VR.b.prototype.In;ggP2VR.b.prototype.pauseSound=ggP2VR.b.prototype.Oi;ggP2VR.b.prototype.activateSound=ggP2VR.b.prototype.Rl;ggP2VR.b.prototype.soundGetTime=ggP2VR.b.prototype.ro;ggP2VR.b.prototype.soundSetTime=ggP2VR.b.prototype.so;
ggP2VR.b.prototype.isPlaying=ggP2VR.b.prototype.Cc;ggP2VR.b.prototype.stopSound=ggP2VR.b.prototype.ej;ggP2VR.b.prototype.setVolume=ggP2VR.b.prototype.mo;ggP2VR.b.prototype.changeVolume=ggP2VR.b.prototype.gm;ggP2VR.b.prototype.removeHotspots=ggP2VR.b.prototype.Tk;ggP2VR.b.prototype.addHotspot=ggP2VR.b.prototype.Sl;ggP2VR.b.prototype.updateHotspot=ggP2VR.b.prototype.Lo;ggP2VR.b.prototype.removeHotspot=ggP2VR.b.prototype.Ln;ggP2VR.b.prototype.setActiveHotspot=ggP2VR.b.prototype.Ye;
ggP2VR.b.prototype.getPointHotspotIds=ggP2VR.b.prototype.Qm;ggP2VR.b.prototype.getHotspot=ggP2VR.b.prototype.Bm;ggP2VR.b.prototype.setFullscreen=ggP2VR.b.prototype.Ze;ggP2VR.b.prototype.toggleFullscreen=ggP2VR.b.prototype.Eh;ggP2VR.b.prototype.enterFullscreen=ggP2VR.b.prototype.rm;ggP2VR.b.prototype.exitFullscreen=ggP2VR.b.prototype.exitFullscreen;ggP2VR.b.prototype.getIsFullscreen=ggP2VR.b.prototype.Dm;ggP2VR.b.prototype.startAutorotate=ggP2VR.b.prototype.hl;ggP2VR.b.prototype.stopAutorotate=ggP2VR.b.prototype.yo;
ggP2VR.b.prototype.toggleAutorotate=ggP2VR.b.prototype.Co;ggP2VR.b.prototype.startAnimation=ggP2VR.b.prototype.vo;ggP2VR.b.prototype.createLayers=ggP2VR.b.prototype.Cj;ggP2VR.b.prototype.removePanorama=ggP2VR.b.prototype.rh;ggP2VR.b.prototype.getScreenResolution=ggP2VR.b.prototype.Zj;ggP2VR.b.prototype.getMaxScreenResolution=ggP2VR.b.prototype.Vj;ggP2VR.b.prototype.getNodeIds=ggP2VR.b.prototype.Km;ggP2VR.b.prototype.getNodeUserdata=ggP2VR.b.prototype.si;ggP2VR.b.prototype.getNodeLatLng=ggP2VR.b.prototype.Lm;
ggP2VR.b.prototype.getNodeTitle=ggP2VR.b.prototype.Mm;ggP2VR.b.prototype.getCurrentNode=ggP2VR.b.prototype.Uj;ggP2VR.b.prototype.getNextNode=ggP2VR.b.prototype.Wj;ggP2VR.b.prototype.getPrevNode=ggP2VR.b.prototype.Tm;ggP2VR.b.prototype.getLastVisitedNode=ggP2VR.b.prototype.Hm;ggP2VR.b.prototype.getCurrentPointHotspots=ggP2VR.b.prototype.ym;ggP2VR.b.prototype.getPositionAngles=ggP2VR.b.prototype.Sm;ggP2VR.b.prototype.getPositionRawAngles=ggP2VR.b.prototype.Xj;ggP2VR.b.prototype.nodeVisited=ggP2VR.b.prototype.tn;
ggP2VR.b.prototype.setElementIdPrefix=ggP2VR.b.prototype.Tn;ggP2VR.b.prototype.videoPanoPlay=ggP2VR.b.prototype.Uo;ggP2VR.b.prototype.videoPanoStop=ggP2VR.b.prototype.Vo;ggP2VR.b.prototype.videoPanoPause=ggP2VR.b.prototype.To;ggP2VR.b.prototype.getVideoPanoTime=ggP2VR.b.prototype.Ym;ggP2VR.b.prototype.setVideoPanoTime=ggP2VR.b.prototype.lo;ggP2VR.b.prototype.getVideoPanoObject=ggP2VR.b.prototype.Xm;ggP2VR.b.prototype.setVideoPanoSource=ggP2VR.b.prototype.ko;ggP2VR.b.prototype.getMediaObject=ggP2VR.b.prototype.Im;
ggP2VR.b.prototype.registerVideoElement=ggP2VR.b.prototype.Pk;ggP2VR.b.prototype.disableSoundLoading=ggP2VR.b.prototype.qm;ggP2VR.b.prototype.setCrossOrigin=ggP2VR.b.prototype.Rn;ggP2VR.b.prototype.setProjection=ggP2VR.b.prototype.$c;ggP2VR.b.prototype.getProjection=ggP2VR.b.prototype.ya;ggP2VR.b.prototype.changeProjection=ggP2VR.b.prototype.Yh;ggP2VR.b.prototype.changeProjectionEx=ggP2VR.b.prototype.Yh;ggP2VR.b.prototype.changeLensflares=ggP2VR.b.prototype.am;ggP2VR.b.prototype.setTransition=ggP2VR.b.prototype.jo;
